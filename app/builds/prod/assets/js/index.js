var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertyNames,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,l=(t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,o=(e,t)=>{for(var s in t||(t={}))i.call(t,s)&&l(e,s,t[s]);if(r)for(var s of r(t))n.call(t,s)&&l(e,s,t[s]);return e},c=(e,a)=>t(e,s(a)),d=(e,t,s)=>(l(e,"symbol"!=typeof t?t+"":t,s),s),u=(e,t,s)=>new Promise((a,r)=>{var i=e=>{try{l(s.next(e))}catch(t){r(t)}},n=e=>{try{l(s.throw(e))}catch(t){r(t)}},l=e=>e.done?a(e.value):Promise.resolve(e.value).then(i,n);l((s=s.apply(e,t)).next())});import{r as h,j as m,u as _,B as g,R as p,a as v,N as f,b,c as x}from"./vendor-react.js";import{c as j}from"./vendor-other.js";var N,y,w=(N={"assets/js/index.js"(e){!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const t=class e{constructor(){d(this,"element",null),d(this,"state"),d(this,"config"),d(this,"subscribers",new Set),d(this,"keyboardHandler",null),d(this,"mouseHandler",null),d(this,"touchHandler",null),d(this,"resizeObserver",null),d(this,"isInitialized",!1),d(this,"isAuthenticated",!1),this.config={items:[{id:"home",label:"Home",href:"/",position:0,disabled:!1,requiresAuth:!1,ariaLabel:"Navigate to Home"},{id:"add-meals",label:"Add Meals",href:"/add-meals",position:1,disabled:!1,requiresAuth:!0,ariaLabel:"Navigate to Add Meals"},{id:"journal",label:"Journal",href:"/journal",position:2,disabled:!1,requiresAuth:!0,ariaLabel:"Navigate to Health Journal"},{id:"profile",label:"Profile",href:"/profile",position:3,disabled:!1,requiresAuth:!0,ariaLabel:"Navigate to Profile"}],animationDuration:300,radius:120,centerSize:60,itemSize:50,autoClose:!0,closeDelay:1e3,enableKeyboard:!0,enableTouch:!0,centerIcon:"menu",centerLabel:"Menu"},this.state={isOpen:!1,activeItem:this.getActiveItemFromPath(),hoveredItem:null,focusedItem:null,keyboardMode:!1,isAnimating:!1},this.init()}static getInstance(){return e.instance||(e.instance=new e),e.instance}init(){this.isInitialized||(this.setupEventListeners(),this.setupRouterListeners(),this.isInitialized=!0)}setupRouterListeners(){window.addEventListener("popstate",()=>{this.updateActiveItemFromPath()});const e=history.pushState,t=history.replaceState;history.pushState=(...t)=>{e.apply(history,t),setTimeout(()=>this.updateActiveItemFromPath(),0)},history.replaceState=(...e)=>{t.apply(history,e),setTimeout(()=>this.updateActiveItemFromPath(),0)}}getActiveItemFromPath(){const e=window.location.pathname,t=this.config.items.find(t=>t.href===e);return t?t.id:"home"}updateActiveItemFromPath(){const e=this.getActiveItemFromPath();this.state.activeItem!==e&&this.setState({activeItem:e})}updateAuthState(e){this.isAuthenticated=e}setupEventListeners(){this.keyboardHandler=e=>{if(this.config.enableKeyboard)switch(e.key){case"Escape":this.state.isOpen&&(this.close(),e.preventDefault());break;case"Tab":this.setState({keyboardMode:!0});break;case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":this.state.isOpen&&(this.handleKeyboardNavigation(e.key),e.preventDefault());break;case"Enter":case" ":this.state.focusedItem&&this.state.isOpen&&(this.navigate(this.state.focusedItem),e.preventDefault())}},this.mouseHandler=e=>{this.state.keyboardMode&&this.setState({keyboardMode:!1})},this.touchHandler=e=>{this.config.enableTouch},document.addEventListener("keydown",this.keyboardHandler),document.addEventListener("mousedown",this.mouseHandler),document.addEventListener("touchstart",this.touchHandler,{passive:!0})}handleKeyboardNavigation(e){const t=this.config.items.findIndex(e=>e.id===this.state.focusedItem);let s=t;switch(e){case"ArrowUp":case"ArrowLeft":s=t>0?t-1:this.config.items.length-1;break;case"ArrowDown":case"ArrowRight":s=t<this.config.items.length-1?t+1:0}const a=this.config.items[s];a&&this.setState({focusedItem:a.id})}setElement(e){this.element=e,this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=new ResizeObserver(()=>{this.updateLayout()}),this.resizeObserver.observe(e)}updateLayout(){}open(){var e;this.state.isOpen||this.state.isAnimating||(this.setState({isOpen:!0,isAnimating:!0,focusedItem:(null==(e=this.config.items[0])?void 0:e.id)||null}),setTimeout(()=>{this.setState({isAnimating:!1})},this.config.animationDuration),this.emitEvent("open",null))}close(){this.state.isOpen&&!this.state.isAnimating&&(this.setState({isOpen:!1,isAnimating:!0,hoveredItem:null,focusedItem:null}),setTimeout(()=>{this.setState({isAnimating:!1})},this.config.animationDuration),this.emitEvent("close",null))}toggle(){this.state.isOpen?this.close():this.open()}navigate(e){const t=this.config.items.find(t=>t.id===e);if(t){if(t.requiresAuth&&!this.isAuthenticated)return this.emitEvent("auth-required",t),void this.showAuthPrompt(t);t.external?window.open(t.href,"_blank","noopener,noreferrer"):this.navigateToRoute(t.href),this.config.autoClose&&setTimeout(()=>{this.close()},this.config.closeDelay),this.emitEvent("navigate",t)}}navigateToRoute(e){window.location.pathname!==e&&(window.history.pushState(null,"",e),window.dispatchEvent(new PopStateEvent("popstate")))}showAuthPrompt(e){const t=document.getElementById("auth-prompt-modal");t&&t.remove();const s=document.createElement("div");s.id="auth-prompt-modal",s.style.cssText="\n            position: fixed;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            background: rgba(0, 0, 0, 0.7);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            z-index: 10000;\n            backdrop-filter: blur(4px);\n        ";const a=document.createElement("div");a.style.cssText="\n            background: var(--gd-surface-raised, white);\n            border-radius: var(--gd-radius-2xl, 16px);\n            padding: var(--gd-space-8, 2rem);\n            max-width: 400px;\n            width: 90%;\n            text-align: center;\n            box-shadow: var(--gd-shadow-2xl, 0 25px 50px -12px rgba(0, 0, 0, 0.25));\n            border: 1px solid var(--gd-border-light, #e5e7eb);\n        ",a.innerHTML=`\n            <h3 style="margin: 0 0 1rem 0; color: var(--gd-text-primary, #000); font-size: var(--gd-font-size-xl, 1.25rem);">\n                Sign in to access ${e.label}\n            </h3>\n            <p style="margin: 0 0 1.5rem 0; color: var(--gd-text-secondary, #666); font-size: var(--gd-font-size-base, 1rem);">\n                Please sign in with Google to continue to ${e.label.toLowerCase()}.\n            </p>\n            <div style="display: flex; gap: 1rem; justify-content: center;">\n                <button id="google-signin-btn" style="\n                    background: #4285f4;\n                    color: white;\n                    border: none;\n                    padding: 0.75rem 1.5rem;\n                    border-radius: var(--gd-radius-lg, 8px);\n                    font-size: var(--gd-font-size-base, 1rem);\n                    font-weight: 500;\n                    cursor: pointer;\n                    display: flex;\n                    align-items: center;\n                    gap: 0.5rem;\n                    transition: background 0.2s;\n                ">\n                    üîê Sign in with Google\n                </button>\n                <button id="cancel-btn" style="\n                    background: var(--gd-bg-secondary, #f3f4f6);\n                    color: var(--gd-text-primary, #000);\n                    border: 1px solid var(--gd-border-light, #e5e7eb);\n                    padding: 0.75rem 1.5rem;\n                    border-radius: var(--gd-radius-lg, 8px);\n                    font-size: var(--gd-font-size-base, 1rem);\n                    cursor: pointer;\n                    transition: background 0.2s;\n                ">\n                    Cancel\n                </button>\n            </div>\n        `,s.appendChild(a),document.body.appendChild(s);const r=s.querySelector("#google-signin-btn"),i=s.querySelector("#cancel-btn");null==r||r.addEventListener("click",()=>{this.emitEvent("google-signin-requested",e),s.remove()}),null==i||i.addEventListener("click",()=>{s.remove()}),s.addEventListener("click",e=>{e.target===s&&s.remove()});const n=e=>{"Escape"===e.key&&(s.remove(),document.removeEventListener("keydown",n))};document.addEventListener("keydown",n);const l=new MutationObserver(e=>{e.forEach(e=>{"childList"===e.type&&e.removedNodes.forEach(e=>{e===s&&(document.removeEventListener("keydown",n),l.disconnect())})})});l.observe(document.body,{childList:!0})}setHoveredItem(e){if(this.state.hoveredItem!==e&&(this.setState({hoveredItem:e}),e)){const t=this.config.items.find(t=>t.id===e);this.emitEvent("hover",t||null)}}getItemPosition(e){const t=(e*(360/this.config.items.length)-90)*(Math.PI/180);return{x:Math.cos(t)*this.config.radius,y:Math.sin(t)*this.config.radius}}getState(){return o({},this.state)}getConfig(){return o({},this.config)}updateConfig(e){const t=e,{items:s}=t,a=((e,t)=>{var s={};for(var a in e)i.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&r)for(var a of r(e))t.indexOf(a)<0&&n.call(e,a)&&(s[a]=e[a]);return s})(t,["items"]);this.config=o(o({},this.config),a),this.emitEvent("config-updated",null),this.notifySubscribers()}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}setState(e){this.state=o(o({},this.state),e),this.notifySubscribers()}notifySubscribers(){this.subscribers.forEach(e=>{try{e(this.state)}catch(t){}})}emitEvent(e,t){const s=new CustomEvent(`navigation:${e}`,{detail:{item:t,state:this.state},bubbles:!0});document.dispatchEvent(s)}destroy(){this.keyboardHandler&&document.removeEventListener("keydown",this.keyboardHandler),this.mouseHandler&&document.removeEventListener("mousedown",this.mouseHandler),this.touchHandler&&document.removeEventListener("touchstart",this.touchHandler),this.resizeObserver&&this.resizeObserver.disconnect();const t=document.getElementById("auth-prompt-modal");t&&t.remove(),this.subscribers.clear(),e.instance=null,this.isInitialized=!1}};d(t,"instance",null);let s=t;const a={url:"https://syxygcrxrldnhlcnpbyr.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN5eHlnY3J4cmxkbmhsY25wYnlyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1ODU3NDMsImV4cCI6MjA3MTE2MTc0M30.21zINCjjS_O5bSdR5EMRhmUHum6yStGwCe_haGUgYeo",auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce",redirectTo:"https://health.gamingdronzz.com/auth/callback"}},l={name:"Health Tracker",version:"1.0.0",baseUrl:"https://health.gamingdronzz.com",domain:"health.gamingdronzz.com"},N=new class{constructor(){d(this,"client"),this.client=j(a.url,a.anonKey,{auth:c(o({},a.auth),{flowType:"pkce",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0})})}signInWithGoogle(){return u(this,null,function*(){try{const{data:e,error:t}=yield this.client.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent"},scopes:"openid email profile"}});return{data:e,error:t}}catch(e){return{data:null,error:e}}})}signInWithGooglePopup(){return u(this,null,function*(){try{const{data:e,error:t}=yield this.client.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent"},scopes:"openid email profile"}});return{data:e,error:t}}catch(e){return{data:null,error:e}}})}handlePopupCallback(){return u(this,null,function*(){try{yield new Promise(e=>setTimeout(e,1e3));const{data:e,error:t}=yield this.client.auth.getSession();return t?{data:null,error:t}:e.session?{data:e.session,error:null}:{data:null,error:{message:"No session found after authentication",name:"NoSession",status:401}}}catch(e){return{data:null,error:e}}})}signInWithEmail(e,t,s=!1){return u(this,null,function*(){try{const{data:r,error:i}=yield this.client.auth.signInWithPassword({email:e,password:t});if(!i&&r.session&&s)try{yield this.extendSessionDuration(r.session)}catch(a){}return{data:r,error:i}}catch(r){return{data:null,error:r}}})}signUpWithEmail(e,t){return u(this,null,function*(){try{const{data:s,error:r}=yield this.client.auth.signUp({email:e,password:t,options:{emailRedirectTo:a.auth.redirectTo,data:{email_verify:!0}}});return{data:s,error:r}}catch(s){return{data:null,error:s}}})}signOut(){return u(this,null,function*(){try{this.clearExtendedSession();const{error:e}=yield this.client.auth.signOut();return{error:e}}catch(e){return{error:e}}})}getSession(){return u(this,null,function*(){try{const{data:{session:e},error:t}=yield this.client.auth.getSession();return{session:e,error:t}}catch(e){return{session:null,error:e}}})}getUser(){return u(this,null,function*(){try{const{data:{user:e},error:t}=yield this.client.auth.getUser();return{user:e,error:t}}catch(e){return{user:null,error:e}}})}refreshSession(){return u(this,null,function*(){try{const{data:{session:e},error:t}=yield this.client.auth.refreshSession();return{session:e,error:t}}catch(e){return{session:null,error:e}}})}extendSessionDuration(e){return u(this,null,function*(){try{const t=new Date;t.setDate(t.getDate()+30),localStorage.setItem("extended_session",JSON.stringify({expiry:t.toISOString(),userId:e.user.id}))}catch(t){}})}resetPassword(e){return u(this,null,function*(){try{const{data:t,error:s}=yield this.client.auth.resetPasswordForEmail(e,{redirectTo:`${l.baseUrl}/auth/reset-password`});return{data:t,error:s}}catch(t){return{data:null,error:t}}})}updatePassword(e){return u(this,null,function*(){try{const{data:t,error:s}=yield this.client.auth.updateUser({password:e});return{data:t,error:s}}catch(t){return{data:null,error:t}}})}resendEmailVerification(e){return u(this,null,function*(){try{const{data:t,error:s}=yield this.client.auth.resend({type:"signup",email:e,options:{emailRedirectTo:a.auth.redirectTo}});return{data:t,error:s}}catch(t){return{data:null,error:t}}})}onAuthStateChange(e){const{data:{subscription:t}}=this.client.auth.onAuthStateChange((t,s)=>{e(t,s)});return()=>{t.unsubscribe()}}registerUser(e){return u(this,null,function*(){var t,s,a,r,i;try{const{data:n,error:l}=yield this.client.from("user_profiles").select("id").eq("user_id",e.id).single();if(l&&"PGRST116"!==l.code)return{success:!1,error:"Failed to check existing user profile"};if(n)return{success:!0};const o={user_id:e.id,full_name:(null==(t=e.user_metadata)?void 0:t.full_name)||(null==(s=e.user_metadata)?void 0:s.name)||(null==(a=e.email)?void 0:a.split("@")[0]),avatar_url:(null==(r=e.user_metadata)?void 0:r.avatar_url)||(null==(i=e.user_metadata)?void 0:i.picture)},{error:c}=yield this.client.from("user_profiles").insert([o]);if(c)return{success:!1,error:"Failed to create user profile"};const{data:d,error:u}=yield this.client.from("user_roles").select("id").eq("user_id",e.id).single();if(u&&"PGRST116"!==u.code)return{success:!1,error:"Failed to check existing user role"};if(!d){const{error:t}=yield this.client.from("user_roles").insert([{user_id:e.id,role:"user"}]);if(t)return{success:!1,error:"Failed to create user role"}}return{success:!0}}catch(n){return{success:!1,error:"Unexpected error during user registration"}}})}isAdmin(e){return u(this,null,function*(){try{const{data:t,error:s}=yield this.client.from("user_roles").select("role").eq("user_id",e).maybeSingle();return!s&&"admin"===(null==t?void 0:t.role)}catch(t){return!1}})}getUserProfile(e){return u(this,null,function*(){try{const{data:t,error:s}=yield this.client.from("user_profiles").select("*").eq("user_id",e).single();return{data:t,error:s}}catch(t){return{data:null,error:t}}})}updateUserProfile(e,t){return u(this,null,function*(){try{const{data:s}=yield this.client.from("user_profiles").select("id").eq("user_id",e).single();if(s){const{data:s,error:a}=yield this.client.from("user_profiles").update(c(o({},t),{updated_at:(new Date).toISOString()})).eq("user_id",e).select().single();return{data:s,error:a}}{const{data:s,error:a}=yield this.client.from("user_profiles").insert(c(o({user_id:e},t),{updated_at:(new Date).toISOString()})).select().single();return{data:s,error:a}}}catch(s){return{data:null,error:s}}})}updateUserMetadata(e){return u(this,null,function*(){try{const{data:t,error:s}=yield this.client.auth.updateUser({data:e});return{data:t,error:s}}catch(t){return{data:null,error:t}}})}getClient(){return this.client}checkEmailExists(e){return u(this,null,function*(){try{const{data:t,error:s}=yield this.client.rpc("check_email_exists",{email_input:e});return!s&&!!t}catch(t){return!1}})}isSessionValid(e){if(!e)return!1;const t=(new Date).getTime()/1e3;return!!e.expires_at&&e.expires_at>t}shouldRefreshSession(e){if(!e||!e.expires_at)return!1;const t=(new Date).getTime()/1e3;return e.expires_at-t<300}getExtendedSessionInfo(){try{const e=localStorage.getItem("extended_session");if(!e)return{isExtended:!1,expiry:null};const t=JSON.parse(e),s=new Date(t.expiry),a=s>new Date;return{isExtended:a,expiry:a?s:null}}catch(e){return{isExtended:!1,expiry:null}}}clearExtendedSession(){try{localStorage.removeItem("extended_session")}catch(e){}}handleOAuthCallback(){return u(this,null,function*(){try{const{data:e,error:t}=yield this.client.auth.getSession();return t?{success:!1,error:t.message}:e.session?(window.opener&&window.opener!==window&&(window.opener.postMessage({type:"SUPABASE_AUTH_SUCCESS",session:e.session},window.location.origin),window.close()),{success:!0}):(window.opener&&window.opener!==window&&(window.opener.postMessage({type:"SUPABASE_AUTH_ERROR",error:{message:"No session found after OAuth callback"}},window.location.origin),window.close()),{success:!1,error:"No session found after OAuth callback"})}catch(e){return window.opener&&window.opener!==window&&(window.opener.postMessage({type:"SUPABASE_AUTH_ERROR",error:{message:"Failed to handle OAuth callback"}},window.location.origin),window.close()),{success:!1,error:"Failed to handle OAuth callback"}}})}},y=class e{constructor(){d(this,"notifications",[]),d(this,"subscribers",new Set),d(this,"nextId",1)}static getInstance(){return e.instance||(e.instance=new e),e.instance}show(e,t="info",s=5e3){const a={id:"notification-"+this.nextId++,message:e,type:t,duration:s,timestamp:Date.now()};return this.notifications.push(a),this.notify(),s>0&&setTimeout(()=>{this.remove(a.id)},s),a.id}remove(e){this.notifications=this.notifications.filter(t=>t.id!==e),this.notify()}clear(){this.notifications=[],this.notify()}subscribe(e){return this.subscribers.add(e),e(this.notifications),()=>this.subscribers.delete(e)}notify(){this.subscribers.forEach(e=>e([...this.notifications]))}success(e,t=5e3){return this.show(e,"success",t)}error(e,t=8e3){return this.show(e,"error",t)}info(e,t=5e3){return this.show(e,"info",t)}warning(e,t=6e3){return this.show(e,"warning",t)}};d(y,"instance");let w=y;const E=()=>{const t=h.useRef(!0),s=h.useRef(w.getInstance()),[a,r]=h.useState({user:null,session:null,loading:!0,isAuthenticated:!1,isAdmin:!1,authLoading:!1});h.useEffect(()=>(t.current=!0,u(e,null,function*(){try{const{session:e,error:s}=yield N.getSession();if(t.current)if(null==e?void 0:e.user){const t=yield N.isAdmin(e.user.id);r({user:e.user,session:e,loading:!1,isAuthenticated:!0,isAdmin:t,authLoading:!1})}else r({user:null,session:null,loading:!1,isAuthenticated:!1,isAdmin:!1,authLoading:!1})}catch(e){t.current&&r({user:null,session:null,loading:!1,isAuthenticated:!1,isAdmin:!1,authLoading:!1})}}),()=>{t.current=!1}),[]),h.useEffect(()=>N.onAuthStateChange((a,i)=>u(e,null,function*(){var n,l,o,c,d;if(t.current)if(null==i?void 0:i.user){const h=yield N.isAdmin(i.user.id);if(t.current&&(r({user:i.user,session:i,loading:!1,isAuthenticated:!0,isAdmin:h,authLoading:!1}),"SIGNED_IN"===a)){const t=(null==(n=i.user.user_metadata)?void 0:n.full_name)||(null==(l=i.user.user_metadata)?void 0:l.name)||(null==(o=i.user.email)?void 0:o.split("@")[0])||"User";"google"===(null==(c=i.user.app_metadata)?void 0:c.provider)&&s.current.show(`Welcome back, ${t}!`,"success",3e3),d=i.user.id,u(e,null,function*(){try{const{data:e}=yield N.getUserProfile(d);!(e&&e.height_cm&&e.weight_kg&&e.activity_level)&&"/profile"!==window.location.pathname&&setTimeout(()=>{window.location.href="/profile"},1e3)}catch(e){"/profile"!==window.location.pathname&&setTimeout(()=>{window.location.href="/profile"},1e3)}})}}else t.current&&(r({user:null,session:null,loading:!1,isAuthenticated:!1,isAdmin:!1,authLoading:!1}),"SIGNED_OUT"===a&&s.current.show("You have been signed out","info",2e3))})),[]);const i=h.useCallback(()=>u(e,null,function*(){try{t.current&&r(e=>c(o({},e),{authLoading:!0}));const{data:e,error:a}=yield N.signInWithGooglePopup();return a?(t.current&&r(e=>c(o({},e),{authLoading:!1})),s.current.show(a.message||"Google sign in failed","error",5e3),{success:!1,error:a}):e?{success:!0,data:e}:(t.current&&r(e=>c(o({},e),{authLoading:!1})),{success:!1,error:{message:"Authentication was cancelled"}})}catch(e){t.current&&r(e=>c(o({},e),{authLoading:!1}));const a=(null==e?void 0:e.message)||"Google sign in failed";return s.current.show(a,"error",5e3),{success:!1,error:{message:a}}}}),[]),n=h.useCallback((t,a,r=!1)=>u(e,null,function*(){try{const{data:e,error:i}=yield N.signInWithEmail(t,a,r);return i?(s.current.show(i.message||"Sign in failed","error",5e3),{success:!1,error:i}):{success:!0,data:e}}catch(e){const t=(null==e?void 0:e.message)||"Sign in failed";return s.current.show(t,"error",5e3),{success:!1,error:{message:t}}}}),[]),l=h.useCallback((t,a)=>u(e,null,function*(){try{const{data:e,error:r}=yield N.signUpWithEmail(t,a);return r?(s.current.show(r.message||"Sign up failed","error",5e3),{success:!1,error:r}):(s.current.show("Account created! Please check your email to verify.","success",7e3),{success:!0,data:e})}catch(e){const t=(null==e?void 0:e.message)||"Sign up failed";return s.current.show(t,"error",5e3),{success:!1,error:{message:t}}}}),[]),d=h.useCallback(()=>u(e,null,function*(){try{const{error:e}=yield N.signOut();return e?(s.current.show(e.message||"Sign out failed","error",5e3),{success:!1,error:e}):{success:!0}}catch(e){const t=(null==e?void 0:e.message)||"Sign out failed";return s.current.show(t,"error",5e3),{success:!1,error:{message:t}}}}),[]),m=h.useCallback(()=>u(e,null,function*(){try{const e=yield N.handleOAuthCallback();return e.success?s.current.show("Successfully signed in with Google!","success",3e3):s.current.show(e.error||"OAuth authentication failed","error",5e3),e}catch(e){const t=(null==e?void 0:e.message)||"OAuth callback failed";return s.current.show(t,"error",5e3),{success:!1,error:t}}}),[]);return c(o({},a),{signInWithGoogle:i,signInWithEmail:n,signUpWithEmail:l,signOut:d,handleOAuthCallback:m})},k=({className:e="",position:t="fixed-top",onNavigate:a,brand:r="Health Tracker",brandHref:i="#home"})=>{const n=h.useRef(null),l=h.useRef(a),o=h.useRef(),{isAuthenticated:c,loading:d}=E();l.current=a,o.current||(o.current=s.getInstance());const[u,_]=h.useState(()=>{var e,t;return null!=(t=null==(e=o.current)?void 0:e.getConfig())?t:{items:[]}}),[g,p]=h.useState(()=>({isOpen:!1,activeItem:"home",hoveredItem:null,focusedItem:null,keyboardMode:!1})),[v,f]=h.useState(!1),b=h.useMemo(()=>"undefined"!=typeof window&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,[]);h.useEffect(()=>{const e=()=>{f(window.scrollY>50)};return window.addEventListener("scroll",e,{passive:!0}),()=>window.removeEventListener("scroll",e)},[]),h.useEffect(()=>{const e=o.current;n.current&&e.setElement(n.current);const t=e.subscribe(p);return _(e.getConfig()),d||e.updateAuthState(c),()=>{t()}},[c,d]);const x=h.useCallback(e=>{var t;null==(t=l.current)||t.call(l,e),o.current.navigate(e)},[]),j=h.useCallback((e,t)=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),x(t))},[x]),N=h.useCallback(e=>{o.current.setHoveredItem(e)},[]),y=h.useCallback(()=>{o.current.setHoveredItem(null)},[]),w=h.useCallback(()=>{if(i.startsWith("#")){const e=u.items.find(e=>e.href===i);e&&x(e.id)}else window.location.href=i},[i,u.items,x]),k=h.useCallback(e=>({home:"üè†","add-meals":"üçΩÔ∏è",journal:"üìî"}[e]||"üìÑ"),[]),I=h.useMemo(()=>["modern-nav",`modern-nav--${t}`,e,g.keyboardMode&&"modern-nav--keyboard",b&&"modern-nav--reduced-motion",v&&"modern-nav--scrolled"].filter(Boolean).join(" "),[t,e,g.keyboardMode,b,v]);return m.jsx("nav",{ref:n,className:I,"aria-label":"Main navigation",role:"navigation",children:m.jsxs("div",{className:"modern-nav__container",children:[m.jsx("button",{className:"modern-nav__brand",onClick:w,"aria-label":`Go to ${r} home page`,type:"button",children:r}),m.jsx("ul",{className:"modern-nav__list",role:"menubar",children:u.items.map(e=>{const t=g.activeItem===e.id,s=["modern-nav__item",t&&"modern-nav__item--active",g.hoveredItem===e.id&&"modern-nav__item--hovered",g.focusedItem===e.id&&"modern-nav__item--focused"].filter(Boolean).join(" ");return m.jsx("li",{className:s,children:m.jsxs("button",{className:"modern-nav__link","data-nav-item":e.id,onClick:()=>x(e.id),onKeyDown:t=>j(t,e.id),onMouseEnter:()=>N(e.id),onMouseLeave:y,role:"menuitem","aria-current":t?"page":void 0,"aria-label":e.ariaLabel||`Navigate to ${e.label}`,type:"button",children:[m.jsx("span",{className:"modern-nav__icon",children:k(e.id)}),m.jsx("span",{className:"modern-nav__label",children:e.label})]})},e.id)})}),m.jsx("div",{className:"modern-nav__right"})]})})},I=({onComplete:e,duration:t=800,minDisplayTime:s=600,className:a=""})=>{const[r,i]=h.useState(0),[n,l]=h.useState(!0),[o,c]=h.useState(!1),[d,u]=h.useState("loading"),_=h.useMemo(()=>["Initializing Health Hub...","Loading Wellness Modules...","Syncing Health Data...","Preparing Your Dashboard...","Ready to Track Your Journey!"],[]),[g,p]=h.useState(_[0]);h.useEffect(()=>{const a=Date.now();let r,n=0;const o=()=>{const d=Date.now()-a,h=Math.min(d/t*100,100);i(h);const m=Math.floor(h/100*(_.length-1));if(m!==n&&m<_.length&&(n=m,p(_[n])),h<100)r=requestAnimationFrame(o);else{u("complete"),p("Welcome to Your Health Journey!");const t=Date.now()-a,r=Math.max(0,s-t);setTimeout(()=>{u("exiting"),c(!0),setTimeout(()=>{l(!1),null==e||e()},300)},r)}};return r=requestAnimationFrame(o),()=>{r&&cancelAnimationFrame(r)}},[t,s,e,_]);const v=h.useMemo(()=>["preloader",`preloader--${d}`,o&&"preloader--exiting",a].filter(Boolean).join(" "),[d,o,a]);return n?m.jsxs("div",{className:v,children:[m.jsxs("div",{className:"preloader__bg",children:[m.jsx("div",{className:"preloader__grid"}),m.jsxs("div",{className:"preloader__orbs",children:[m.jsx("div",{className:"preloader__orb preloader__orb--1"}),m.jsx("div",{className:"preloader__orb preloader__orb--2"}),m.jsx("div",{className:"preloader__orb preloader__orb--3"})]})]}),m.jsxs("div",{className:"preloader__content",children:[m.jsx("div",{className:"preloader__brand",children:m.jsxs("div",{className:"preloader__logo",children:[m.jsx("div",{className:"preloader__logo-icon",children:m.jsxs("div",{className:"preloader__health-icon",children:[m.jsx("div",{className:"preloader__heart",children:m.jsx("div",{className:"preloader__heart-beat"})}),m.jsxs("div",{className:"preloader__pulse-rings",children:[m.jsx("div",{className:"preloader__pulse-ring preloader__pulse-ring--1"}),m.jsx("div",{className:"preloader__pulse-ring preloader__pulse-ring--2"}),m.jsx("div",{className:"preloader__pulse-ring preloader__pulse-ring--3"})]})]})}),m.jsxs("div",{className:"preloader__brand-text",children:["Health",m.jsx("span",{className:"preloader__brand-accent",children:"Tracker"})]})]})}),m.jsx("div",{className:"preloader__status",children:m.jsx("div",{className:"preloader__message",children:g})}),m.jsxs("div",{className:"preloader__progress-section",children:[m.jsxs("div",{className:"preloader__progress-ring",children:[m.jsxs("svg",{className:"preloader__ring-svg",viewBox:"0 0 120 120",children:[m.jsx("circle",{className:"preloader__ring-bg",cx:"60",cy:"60",r:"50",fill:"none",strokeWidth:"4"}),m.jsx("circle",{className:"preloader__ring-progress",cx:"60",cy:"60",r:"50",fill:"none",strokeWidth:"4",style:{strokeDasharray:314,strokeDashoffset:314-314*r/100}})]}),m.jsxs("div",{className:"preloader__percentage",children:[Math.round(r),"%"]})]}),m.jsxs("div",{className:"preloader__pulse-bars",children:[m.jsx("div",{className:"preloader__bar"}),m.jsx("div",{className:"preloader__bar"}),m.jsx("div",{className:"preloader__bar"}),m.jsx("div",{className:"preloader__bar"}),m.jsx("div",{className:"preloader__bar"})]})]})]}),"complete"===d&&m.jsx("div",{className:"preloader__success",children:m.jsx("div",{className:"preloader__success-ring",children:m.jsxs("svg",{viewBox:"0 0 52 52",className:"preloader__success-svg",children:[m.jsx("circle",{className:"preloader__success-circle",cx:"26",cy:"26",r:"20",fill:"none"}),m.jsx("path",{className:"preloader__success-check",fill:"none",d:"M14,27 L22,35 L38,19"})]})})})]}):null};class S{constructor(e={}){d(this,"state"),d(this,"config"),d(this,"subscribers"),d(this,"intersectionObserver"),this.config=o({enableLazyLoading:!0,imageFormats:["webp","jpg","png"],seoEnabled:!0},e),this.state=this.getInitialState(),this.subscribers=new Set,this.intersectionObserver=null,this.init()}getInitialState(){return{isLoaded:!1,currentSection:"hero",lazyImages:new Map,seoData:{}}}init(){this.config.enableLazyLoading&&this.setupLazyLoading(),this.setState({isLoaded:!0})}setupLazyLoading(){"IntersectionObserver"in window&&(this.intersectionObserver=new IntersectionObserver(e=>{e.forEach(e=>{var t;if(e.isIntersecting){const s=e.target;this.loadImage(s),null==(t=this.intersectionObserver)||t.unobserve(s)}})},{rootMargin:"50px"}))}loadImage(e){const t=e.dataset.src;t&&(e.src=t,e.classList.add("loaded"),this.updateImageState(e.dataset.id||t,!0))}updateImageState(e,t){const s=new Map(this.state.lazyImages);s.set(e,t),this.setState({lazyImages:s})}observeImage(e){this.intersectionObserver&&e&&this.intersectionObserver.observe(e)}setCurrentSection(e){e!==this.state.currentSection&&this.setState({currentSection:e})}setSeoData(e){this.setState({seoData:o(o({},this.state.seoData),e)})}getState(){return o({},this.state)}setState(e){this.state=o(o({},this.state),e),this.notify()}subscribe(e){return this.subscribers.add(e),()=>this.subscribers.delete(e)}notify(){this.subscribers.forEach(e=>e(this.state))}destroy(){this.intersectionObserver&&this.intersectionObserver.disconnect(),this.subscribers.clear()}}let T=null;const C=()=>{const[e,t]=h.useState({isLoaded:!1,currentSection:"hero",lazyImages:new Map,seoData:{}});h.useEffect(()=>{T||(T=new S);const e=T.subscribe(t);return t(T.getState()),()=>{e()}},[]);const s=h.useCallback(e=>{null==T||T.setCurrentSection(e)},[]),a=h.useCallback(e=>{null==T||T.setSeoData(e)},[]),r=h.useCallback(e=>{null==T||T.observeImage(e)},[]);return c(o({},e),{setCurrentSection:s,setSeoData:a,observeImage:r})};class A{static calculateBMR(e){const{height_cm:t,weight_kg:s,age:a=30,gender:r="male"}=e;return"male"===r?5*s+6.25*t-5*a+5:5*s+6.25*t-5*a-161}static calculateTDEE(e,t){const s=this.ACTIVITY_MULTIPLIERS[t]||1.55;return Math.round(e*s)}static convertDurationToWeeks(e,t){switch(t){case"days":return e/7;case"weeks":default:return e;case"months":return 4.33*e}}static calculateTargetCalories(e){const t=this.calculateBMR(e),s=this.calculateTDEE(t,e.activity_level),{weight_kg:a,target_weight_kg:r,target_duration:i,target_duration_unit:n}=e,l=r-a,o=this.convertDurationToWeeks(i,n),c=o>0?l/o:0,d=c*this.CALORIES_PER_KG/7;let u=s+d;const h="male"===e.gender?1300:1100;return u<h&&(u=h),{bmr:Math.round(t),tdee:s,targetCalories:Math.round(u),weightChangePerWeek:Math.round(100*c)/100,dailyCalorieDeficit:Math.round(d)}}static getCalorieRecommendation(e){const{weightChangePerWeek:t,targetCalories:s,tdee:a}=e;return t>0?{message:`To gain ${Math.abs(t)}kg per week, aim for ${s} calories daily`,type:"gain",weeklyGoal:`+${Math.abs(t)}kg per week`}:t<0?{message:`To lose ${Math.abs(t)}kg per week, aim for ${s} calories daily`,type:"loss",weeklyGoal:`-${Math.abs(t)}kg per week`}:{message:`To maintain your current weight, aim for ${a} calories daily`,type:"maintain",weeklyGoal:"Maintain current weight"}}static validateProfile(e){const t=[];return(!e.height_cm||e.height_cm<=0)&&t.push("Height is required"),(!e.weight_kg||e.weight_kg<=0)&&t.push("Current weight is required"),(!e.target_weight_kg||e.target_weight_kg<=0)&&t.push("Target weight is required"),(!e.target_duration||e.target_duration<=0)&&t.push("Target duration is required"),{isValid:0===t.length,errors:t}}}d(A,"ACTIVITY_MULTIPLIERS",{sedentary:1.05,light:1.2,moderate:1.375,active:1.55,very_active:1.725}),d(A,"CALORIES_PER_KG",7700);const M=({title:t="Your Health Journey Starts Here",subtitle:s="Track nutrition, monitor wellness, achieve your goals",description:a="Take control of your health with comprehensive meal tracking, nutrition insights, and personalized wellness monitoring.",primaryCtaText:r="Sign In to Get Started",secondaryCtaText:i="",onPrimaryCtaClick:n,onSecondaryCtaClick:l,showParticles:d=!1,showAchievements:_=!1,autoScroll:g=!1})=>{var p,v,f,b,x;const j=h.useRef(null),y=h.useRef(null);h.useRef(null),h.useRef();const[w,k]=h.useState(!1),[I,S]=h.useState({x:0,y:0}),[T,M]=h.useState(!1),[P,O]=h.useState(!1),{setCurrentSection:L}=C(),{isAuthenticated:D,user:R}=E(),{calorieData:U,todaysMeals:z}=(()=>{const{user:t}=E(),[s,a]=h.useState(null),[r,i]=h.useState([]),[n,l]=h.useState(!0),o=()=>u(e,null,function*(){if(t)try{const{data:s}=yield N.getUserProfile(t.id);let r={target_weight_kg:0,target_duration:0,target_duration_unit:"weeks"};try{const e=localStorage.getItem(`profile_extra_${t.id}`);e&&(r=JSON.parse(e))}catch(e){}if(s&&s.height_cm&&s.weight_kg&&r.target_weight_kg&&r.target_duration){const e={height_cm:s.height_cm,weight_kg:s.weight_kg,target_weight_kg:r.target_weight_kg,target_duration:r.target_duration,target_duration_unit:r.target_duration_unit,activity_level:s.activity_level||"moderate",age:30,gender:"male"};a(e)}else a(null)}catch(s){a(null)}finally{l(!1)}else l(!1)}),c=()=>{i([{id:"1",name:"Oatmeal with Berries",calories:320,protein:12,carbs:58,fat:6,mealType:"breakfast",time:"8:00 AM"},{id:"2",name:"Grilled Chicken Salad",calories:450,protein:35,carbs:25,fat:18,mealType:"lunch",time:"12:30 PM"},{id:"3",name:"Greek Yogurt",calories:150,protein:15,carbs:12,fat:5,mealType:"snack",time:"3:15 PM"}])};return h.useEffect(()=>{o(),c()},[t]),{calorieData:h.useMemo(()=>{if(!s)return{targetCalories:0,currentCalories:0,remainingCalories:0,percentageConsumed:0,hasProfile:!1,isLoading:n};if(!A.validateProfile(s).isValid)return{targetCalories:0,currentCalories:0,remainingCalories:0,percentageConsumed:0,hasProfile:!1,isLoading:n};const e=A.calculateTargetCalories(s),t=A.getCalorieRecommendation(e),a=r.reduce((e,t)=>e+t.calories,0),i=e.targetCalories-a,l=e.targetCalories>0?Math.round(a/e.targetCalories*100):0;return{targetCalories:e.targetCalories,currentCalories:a,remainingCalories:i,percentageConsumed:l,calculation:e,recommendation:t,hasProfile:!0,isLoading:n}},[s,r,n]),todaysMeals:r,profile:s,refreshData:()=>{o(),c()}}})(),V=h.useMemo(()=>{const e=z.reduce((e,t)=>({calories:e.calories+t.calories,protein:e.protein+t.protein,carbs:e.carbs+t.carbs,fat:e.fat+t.fat}),{calories:0,protein:0,carbs:0,fat:0});return c(o({},e),{goalCalories:U.targetCalories,goalProtein:Math.round(.3*U.targetCalories/4),goalCarbs:Math.round(.45*U.targetCalories/4),goalFat:Math.round(.25*U.targetCalories/9)})},[z,U.targetCalories]);h.useMemo(()=>d?Array.from({length:30},(e,t)=>({id:t,delay:4*Math.random(),duration:4+3*Math.random(),x:100*Math.random(),y:100*Math.random(),size:2+3*Math.random()})):[],[d]),h.useEffect(()=>{const e=window.matchMedia("(prefers-reduced-motion: reduce)");O(e.matches);const t=e=>{O(e.matches)};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[]),h.useEffect(()=>{const e=new IntersectionObserver(([e])=>{var t,s;e.isIntersecting&&(L("hero"),k(!0),P||(null==(t=j.current)||t.classList.add("hero--animate-in"),null==(s=y.current)||s.classList.add("hero__content--stagger")))},{threshold:.3,rootMargin:"0px 0px -10% 0px"});return j.current&&e.observe(j.current),()=>e.disconnect()},[L,P]);const B=h.useCallback(e=>{if(!j.current||P)return;const t=j.current.getBoundingClientRect(),s={x:(e.clientX-t.left)/t.width*100,y:(e.clientY-t.top)/t.height*100};S(s)},[P]);h.useEffect(()=>{if(!j.current||P)return;let e;const t=t=>{clearTimeout(e),e=setTimeout(()=>B(t),16)},s=j.current;return s.addEventListener("mousemove",t),s.addEventListener("mouseenter",()=>M(!0)),s.addEventListener("mouseleave",()=>M(!1)),()=>{s.removeEventListener("mousemove",t),s.removeEventListener("mouseenter",()=>M(!0)),s.removeEventListener("mouseleave",()=>M(!1)),clearTimeout(e)}},[B,P]);const H=h.useCallback(()=>{if(n)n();else{const e=document.getElementById("contact");null==e||e.scrollIntoView({behavior:P?"auto":"smooth",block:"start"})}},[n,P]);return h.useCallback(()=>{if(l)l();else{const e=document.getElementById("projects");null==e||e.scrollIntoView({behavior:P?"auto":"smooth",block:"start"})}},[l,P]),h.useCallback(e=>{if(("Enter"===e.key||" "===e.key)&&(e.preventDefault(),g)){const e=document.getElementById("about");null==e||e.scrollIntoView({behavior:P?"auto":"smooth",block:"start"})}},[g,P]),h.useCallback(()=>{const e=document.getElementById("about");null==e||e.scrollIntoView({behavior:P?"auto":"smooth",block:"start"})},[P]),m.jsx("section",{ref:j,id:"hero",className:"hero","aria-label":"Hero section - Health Tracker",role:"banner",children:m.jsx("div",{className:"hero__container",children:m.jsx("div",{className:"hero__content-wrapper",ref:y,children:D?m.jsxs("div",{className:"hero__dashboard-content",children:[m.jsx("div",{className:"hero__welcome",children:m.jsxs("p",{className:"hero__dashboard-greeting",children:["Welcome back, ",(null==(p=null==R?void 0:R.user_metadata)?void 0:p.full_name)||(null==(v=null==R?void 0:R.email)?void 0:v.split("@")[0])||"there","! üëã"]})}),m.jsxs("div",{className:"hero__meals-visualization",children:[m.jsxs("div",{className:"hero__macro-pie-chart",children:[m.jsxs("svg",{className:"hero__pie-svg",width:"200",height:"200",viewBox:"0 0 42 42",children:[m.jsx("circle",{className:"hero__pie-bg",cx:"21",cy:"21",r:"15.91549430918954",fill:"transparent",stroke:"#e2e8f0",strokeWidth:"3"}),(()=>{const e=V.protein+V.carbs+V.fat;if(0===e)return null;const t=V.protein/e*100,s=V.carbs/e*100,a=V.fat/e*100;let r=0;const i=[];return t>0&&(i.push(m.jsx("circle",{className:"hero__pie-segment hero__pie-segment--protein",cx:"21",cy:"21",r:"15.91549430918954",fill:"transparent",stroke:"#10b981",strokeWidth:"3",strokeDasharray:`${t} ${100-t}`,strokeDashoffset:25-r,transform:"rotate(-90 21 21)"},"protein")),r+=t),s>0&&(i.push(m.jsx("circle",{className:"hero__pie-segment hero__pie-segment--carbs",cx:"21",cy:"21",r:"15.91549430918954",fill:"transparent",stroke:"#f59e0b",strokeWidth:"3",strokeDasharray:`${s} ${100-s}`,strokeDashoffset:25-r,transform:"rotate(-90 21 21)"},"carbs")),r+=s),a>0&&i.push(m.jsx("circle",{className:"hero__pie-segment hero__pie-segment--fat",cx:"21",cy:"21",r:"15.91549430918954",fill:"transparent",stroke:"#ec4899",strokeWidth:"3",strokeDasharray:`${a} ${100-a}`,strokeDashoffset:25-r,transform:"rotate(-90 21 21)"},"fat")),i})(),m.jsx("text",{x:"21",y:"22",textAnchor:"middle",className:"hero__pie-calories",children:V.calories}),m.jsx("text",{x:"21",y:"29",textAnchor:"middle",className:"hero__pie-calories-label",children:"calories"})]}),m.jsxs("div",{className:"hero__macro-legend",children:[m.jsxs("div",{className:"hero__legend-item hero__legend-item--protein",children:[m.jsx("span",{className:"hero__legend-color"}),m.jsx("span",{className:"hero__legend-label",children:"Protein"}),m.jsxs("span",{className:"hero__legend-value",children:[V.protein,"g"]})]}),m.jsxs("div",{className:"hero__legend-item hero__legend-item--carbs",children:[m.jsx("span",{className:"hero__legend-color"}),m.jsx("span",{className:"hero__legend-label",children:"Carbs"}),m.jsxs("span",{className:"hero__legend-value",children:[V.carbs,"g"]})]}),m.jsxs("div",{className:"hero__legend-item hero__legend-item--fat",children:[m.jsx("span",{className:"hero__legend-color"}),m.jsx("span",{className:"hero__legend-label",children:"Fat"}),m.jsxs("span",{className:"hero__legend-value",children:[V.fat,"g"]})]})]})]}),m.jsxs("div",{className:"hero__meals-list",children:[m.jsx("h3",{className:"hero__meals-title",children:"Today's Meals"}),z.length>0?m.jsx("div",{className:"hero__meals-grid",children:z.map((e,t)=>m.jsxs("div",{className:"hero__meal-card",children:[m.jsxs("div",{className:"hero__meal-header",children:[m.jsxs("span",{className:"hero__meal-type",children:["breakfast"===e.mealType&&"üåÖ","lunch"===e.mealType&&"‚òÄÔ∏è","dinner"===e.mealType&&"üåô","snack"===e.mealType&&"üçø",e.mealType]}),m.jsx("span",{className:"hero__meal-time",children:e.time})]}),m.jsx("div",{className:"hero__meal-name",children:e.name}),m.jsxs("div",{className:"hero__meal-calories",children:[e.calories," cal"]})]},e.id))}):m.jsxs("div",{className:"hero__no-meals",children:[m.jsx("p",{children:"No meals tracked today yet"}),m.jsx("button",{className:"hero__add-meal-btn",onClick:()=>null==n?void 0:n(),children:"Add Your First Meal"})]})]})]}),U.hasProfile?m.jsxs("div",{className:"hero__calorie-tracking",children:[m.jsxs("div",{className:"hero__metabolic-overview",children:[m.jsxs("div",{className:"hero__metabolic-card hero__metabolic-card--bmr",children:[m.jsx("div",{className:"hero__metabolic-icon",children:"üî•"}),m.jsx("div",{className:"hero__metabolic-label",children:"Basal Metabolic Rate"}),m.jsx("div",{className:"hero__metabolic-value",children:null==(f=U.calculation)?void 0:f.bmr.toLocaleString()}),m.jsx("div",{className:"hero__metabolic-subtext",children:"calories/day at rest"})]}),m.jsxs("div",{className:"hero__metabolic-card hero__metabolic-card--tdee",children:[m.jsx("div",{className:"hero__metabolic-icon",children:"‚ö°"}),m.jsx("div",{className:"hero__metabolic-label",children:"Total Daily Energy"}),m.jsx("div",{className:"hero__metabolic-value",children:null==(b=U.calculation)?void 0:b.tdee.toLocaleString()}),m.jsx("div",{className:"hero__metabolic-subtext",children:"calories burned with lifestyle"})]})]}),m.jsxs("div",{className:"hero__calorie-overview",children:[m.jsxs("div",{className:"hero__calorie-card hero__calorie-card--target",children:[m.jsx("div",{className:"hero__calorie-label",children:"Target Calories"}),m.jsx("div",{className:"hero__calorie-value",children:U.targetCalories.toLocaleString()}),m.jsx("div",{className:"hero__calorie-subtext",children:null==(x=U.recommendation)?void 0:x.weeklyGoal})]}),m.jsxs("div",{className:"hero__calorie-card hero__calorie-card--current",children:[m.jsx("div",{className:"hero__calorie-label",children:"Current Intake"}),m.jsx("div",{className:"hero__calorie-value",children:U.currentCalories.toLocaleString()}),m.jsx("div",{className:"hero__calorie-subtext",children:U.remainingCalories>0?`${U.remainingCalories} remaining`:`${Math.abs(U.remainingCalories)} over`})]}),m.jsxs("div",{className:"hero__calorie-card hero__calorie-card--progress",children:[m.jsx("div",{className:"hero__calorie-label",children:"Progress"}),m.jsxs("div",{className:"hero__calorie-value",children:[U.percentageConsumed,"%"]}),m.jsx("div",{className:"hero__calorie-progress-bar",children:m.jsx("div",{className:"hero__calorie-progress-fill",style:{width:`${Math.min(U.percentageConsumed,100)}%`}})})]})]}),U.recommendation&&m.jsxs("div",{className:`hero__calorie-recommendation hero__calorie-recommendation--${U.recommendation.type}`,children:[m.jsxs("span",{className:"hero__recommendation-icon",children:["loss"===U.recommendation.type&&"üìâ","gain"===U.recommendation.type&&"üìà","maintain"===U.recommendation.type&&"‚öñÔ∏è"]}),m.jsx("span",{className:"hero__recommendation-text",children:U.recommendation.message})]})]}):m.jsxs("div",{className:"hero__setup-profile",children:[m.jsx("div",{className:"hero__setup-icon",children:"‚öôÔ∏è"}),m.jsx("p",{className:"hero__setup-message",children:"Complete your profile to see personalized calorie targets"}),m.jsx("button",{className:"hero__setup-btn",onClick:()=>window.location.href="/profile",children:"Setup Profile"})]})]}):m.jsxs("div",{className:"hero__auth-content",children:[m.jsx("div",{className:"hero__auth-visual",children:m.jsx("div",{className:"hero__health-icon",children:"üçé"})}),m.jsxs("div",{className:"hero__auth-text",children:[m.jsx("h1",{className:"hero__title",children:t}),m.jsx("h2",{className:"hero__subtitle",children:s}),m.jsx("p",{className:"hero__description",children:a}),m.jsx("div",{className:"hero__cta-group",children:m.jsxs("button",{className:"hero__cta hero__cta--primary",onClick:H,"aria-label":"Sign in to start tracking your health",type:"button",children:[m.jsx("span",{className:"hero__cta-icon",children:"üîë"}),m.jsx("span",{className:"hero__cta-text",children:r})]})})]})]})})})})},P=()=>{const e=h.useRef(null),{setCurrentSection:t}=C();E();const[s,a]=h.useState([]);h.useState(!1);const[r,i]=h.useState(""),[n,l]=h.useState("breakfast"),[d,u]=h.useState(!1),[_,g]=h.useState({totalCalories:0,totalProtein:0,totalCarbs:0,totalFat:0,goalCalories:2e3,goalProtein:150,goalCarbs:250,goalFat:65});h.useEffect(()=>{t("add-meals");const e=[{id:"1",name:"Oatmeal with Banana",calories:259,protein:7.3,carbs:55,fat:3.4,timestamp:new Date,mealType:"breakfast"},{id:"2",name:"Grilled Chicken Salad",calories:285,protein:35,carbs:12,fat:8,timestamp:new Date(Date.now()-72e5),mealType:"lunch"}];a(e),p(e)},[t]);const p=e=>{const t=new Date;t.setHours(0,0,0,0);const s=e.filter(e=>{const s=new Date(e.timestamp);return s.setHours(0,0,0,0),s.getTime()===t.getTime()}).reduce((e,t)=>c(o({},e),{totalCalories:e.totalCalories+t.calories,totalProtein:e.totalProtein+t.protein,totalCarbs:e.totalCarbs+t.carbs,totalFat:e.totalFat+t.fat}),{totalCalories:0,totalProtein:0,totalCarbs:0,totalFat:0,goalCalories:_.goalCalories,goalProtein:_.goalProtein,goalCarbs:_.goalCarbs,goalFat:_.goalFat});g(s)},v=[{name:"Banana",calories:105,protein:1.3,carbs:27,fat:.4},{name:"Chicken Breast (100g)",calories:165,protein:31,carbs:0,fat:3.6},{name:"Brown Rice (1 cup)",calories:216,protein:5,carbs:45,fat:1.8},{name:"Greek Yogurt",calories:100,protein:17,carbs:6,fat:0},{name:"Almonds (28g)",calories:164,protein:6,carbs:6,fat:14},{name:"Avocado (half)",calories:160,protein:2,carbs:8.5,fat:15},{name:"Oatmeal (1 cup)",calories:154,protein:6,carbs:28,fat:3},{name:"Apple",calories:95,protein:.5,carbs:25,fat:.3}].filter(e=>e.name.toLowerCase().includes(r.toLowerCase())),f=(e,t)=>Math.min(e/t*100,100);return m.jsx("section",{ref:e,id:"add-meals",className:"add-meals",children:m.jsxs("div",{className:"add-meals__container",children:[m.jsxs("div",{className:"add-meals__quick-actions",children:[m.jsx("button",{className:"add-meals__quick-btn add-meals__quick-btn--primary",onClick:()=>u(!d),children:"üçé Quick Add Food"}),m.jsx("button",{className:"add-meals__quick-btn",children:"üîç Search Foods"}),m.jsx("button",{className:"add-meals__quick-btn",children:"üìä Custom Entry"})]}),m.jsxs("div",{className:"add-meals__nutrition-summary",children:[m.jsx("h2",{className:"add-meals__section-title",children:"Today's Nutrition"}),m.jsxs("div",{className:"add-meals__nutrition-visual",children:[m.jsx("div",{className:"add-meals__macro-circle",children:m.jsxs("div",{className:"add-meals__circle-container",children:[m.jsxs("svg",{className:"add-meals__circle-svg",width:"100",height:"100",viewBox:"0 0 36 36",children:[m.jsx("path",{className:"add-meals__circle-bg",d:"M18 2.0845\r\n                                           a 15.9155 15.9155 0 0 1 0 31.831\r\n                                           a 15.9155 15.9155 0 0 1 0 -31.831"}),m.jsx("path",{className:"add-meals__circle-progress add-meals__circle-progress--calories",strokeDasharray:`${f(_.totalCalories,_.goalCalories)}, 100`,d:"M18 2.0845\r\n                                           a 15.9155 15.9155 0 0 1 0 31.831\r\n                                           a 15.9155 15.9155 0 0 1 0 -31.831"})]}),m.jsxs("div",{className:"add-meals__circle-content",children:[m.jsx("div",{className:"add-meals__circle-icon",children:"üî•"}),m.jsx("div",{className:"add-meals__circle-value",children:Math.round(_.totalCalories)}),m.jsx("div",{className:"add-meals__circle-label",children:"Calories"})]})]})}),m.jsx("div",{className:"add-meals__macro-circle",children:m.jsxs("div",{className:"add-meals__circle-container",children:[m.jsxs("svg",{className:"add-meals__circle-svg",width:"100",height:"100",viewBox:"0 0 36 36",children:[m.jsx("path",{className:"add-meals__circle-bg",d:"M18 2.0845\r\n                                           a 15.9155 15.9155 0 0 1 0 31.831\r\n                                           a 15.9155 15.9155 0 0 1 0 -31.831"}),m.jsx("path",{className:"add-meals__circle-progress add-meals__circle-progress--protein",strokeDasharray:`${f(_.totalProtein,_.goalProtein)}, 100`,d:"M18 2.0845\r\n                                           a 15.9155 15.9155 0 0 1 0 31.831\r\n                                           a 15.9155 15.9155 0 0 1 0 -31.831"})]}),m.jsxs("div",{className:"add-meals__circle-content",children:[m.jsx("div",{className:"add-meals__circle-icon",children:"üí™"}),m.jsxs("div",{className:"add-meals__circle-value",children:[Math.round(_.totalProtein),"g"]}),m.jsx("div",{className:"add-meals__circle-label",children:"Protein"})]})]})}),m.jsx("div",{className:"add-meals__macro-circle",children:m.jsxs("div",{className:"add-meals__circle-container",children:[m.jsxs("svg",{className:"add-meals__circle-svg",width:"100",height:"100",viewBox:"0 0 36 36",children:[m.jsx("path",{className:"add-meals__circle-bg",d:"M18 2.0845\r\n                                           a 15.9155 15.9155 0 0 1 0 31.831\r\n                                           a 15.9155 15.9155 0 0 1 0 -31.831"}),m.jsx("path",{className:"add-meals__circle-progress add-meals__circle-progress--carbs",strokeDasharray:`${f(_.totalCarbs,_.goalCarbs)}, 100`,d:"M18 2.0845\r\n                                           a 15.9155 15.9155 0 0 1 0 31.831\r\n                                           a 15.9155 15.9155 0 0 1 0 -31.831"})]}),m.jsxs("div",{className:"add-meals__circle-content",children:[m.jsx("div",{className:"add-meals__circle-icon",children:"üåæ"}),m.jsxs("div",{className:"add-meals__circle-value",children:[Math.round(_.totalCarbs),"g"]}),m.jsx("div",{className:"add-meals__circle-label",children:"Carbs"})]})]})}),m.jsx("div",{className:"add-meals__macro-circle",children:m.jsxs("div",{className:"add-meals__circle-container",children:[m.jsxs("svg",{className:"add-meals__circle-svg",width:"100",height:"100",viewBox:"0 0 36 36",children:[m.jsx("path",{className:"add-meals__circle-bg",d:"M18 2.0845\r\n                                           a 15.9155 15.9155 0 0 1 0 31.831\r\n                                           a 15.9155 15.9155 0 0 1 0 -31.831"}),m.jsx("path",{className:"add-meals__circle-progress add-meals__circle-progress--fat",strokeDasharray:`${f(_.totalFat,_.goalFat)}, 100`,d:"M18 2.0845\r\n                                           a 15.9155 15.9155 0 0 1 0 31.831\r\n                                           a 15.9155 15.9155 0 0 1 0 -31.831"})]}),m.jsxs("div",{className:"add-meals__circle-content",children:[m.jsx("div",{className:"add-meals__circle-icon",children:"ü•ë"}),m.jsxs("div",{className:"add-meals__circle-value",children:[Math.round(_.totalFat),"g"]}),m.jsx("div",{className:"add-meals__circle-label",children:"Fat"})]})]})})]})]}),d&&m.jsxs("div",{className:"add-meals__quick-add-panel",children:[m.jsxs("div",{className:"add-meals__panel-header",children:[m.jsx("h3",{className:"add-meals__panel-title",children:"Quick Add Foods"}),m.jsx("button",{className:"add-meals__close-btn",onClick:()=>u(!1),children:"‚úï"})]}),m.jsxs("div",{className:"add-meals__meal-type-selector",children:[m.jsx("label",{className:"add-meals__meal-label",children:"Meal Type:"}),m.jsxs("select",{value:n,onChange:e=>l(e.target.value),className:"add-meals__meal-select",children:[m.jsx("option",{value:"breakfast",children:"üåÖ Breakfast"}),m.jsx("option",{value:"lunch",children:"‚òÄÔ∏è Lunch"}),m.jsx("option",{value:"dinner",children:"üåô Dinner"}),m.jsx("option",{value:"snack",children:"üçø Snack"})]})]}),m.jsx("div",{className:"add-meals__search-box",children:m.jsx("input",{type:"text",placeholder:"Search foods...",value:r,onChange:e=>i(e.target.value),className:"add-meals__search-input"})}),m.jsx("div",{className:"add-meals__foods-grid",children:v.map((e,t)=>m.jsxs("div",{className:"add-meals__food-card",children:[m.jsxs("div",{className:"add-meals__food-info",children:[m.jsx("h4",{className:"add-meals__food-name",children:e.name}),m.jsxs("div",{className:"add-meals__food-nutrition",children:[m.jsxs("span",{children:[e.calories," cal"]}),m.jsxs("span",{children:[e.protein,"g protein"]})]})]}),m.jsx("button",{className:"add-meals__add-food-btn",onClick:()=>(e=>{const t={id:Date.now().toString(),name:e.name,calories:e.calories,protein:e.protein,carbs:e.carbs,fat:e.fat,timestamp:new Date,mealType:n},r=[...s,t];a(r),p(r),u(!1)})(e),children:"+"})]},t))})]}),m.jsxs("div",{className:"add-meals__meals-section",children:[m.jsx("h2",{className:"add-meals__section-title",children:"Today's Meals"}),["breakfast","lunch","dinner","snack"].map(e=>{const t=(e=>{const t=new Date;return t.setHours(0,0,0,0),s.filter(s=>{const a=new Date(s.timestamp);return a.setHours(0,0,0,0),s.mealType===e&&a.getTime()===t.getTime()})})(e),r=t.reduce((e,t)=>e+t.calories,0);return m.jsxs("div",{className:"add-meals__meal-type-section",children:[m.jsxs("div",{className:"add-meals__meal-type-header",children:[m.jsxs("h3",{className:"add-meals__meal-type-title",children:["breakfast"===e&&"üåÖ","lunch"===e&&"‚òÄÔ∏è","dinner"===e&&"üåô","snack"===e&&"üçø",e.charAt(0).toUpperCase()+e.slice(1)]}),m.jsxs("span",{className:"add-meals__meal-type-calories",children:[Math.round(r)," calories"]})]}),t.length>0?m.jsx("div",{className:"add-meals__meal-list",children:t.map(e=>m.jsxs("div",{className:"add-meals__meal-item",children:[m.jsxs("div",{className:"add-meals__meal-info",children:[m.jsx("span",{className:"add-meals__meal-name",children:e.name}),m.jsxs("span",{className:"add-meals__meal-nutrition",children:[e.calories," cal ‚Ä¢ ",e.protein,"g protein ‚Ä¢ ",e.carbs,"g carbs ‚Ä¢ ",e.fat,"g fat"]})]}),m.jsx("button",{className:"add-meals__remove-btn",onClick:()=>(e=>{const t=s.filter(t=>t.id!==e);a(t),p(t)})(e.id),children:"üóëÔ∏è"})]},e.id))}):m.jsxs("div",{className:"add-meals__empty-meal-type",children:[m.jsxs("p",{children:["No ",e," entries yet"]}),m.jsxs("button",{className:"add-meals__add-meal-btn",onClick:()=>{l(e),u(!0)},children:["+ Add ",e]})]})]},e)})]})]})})},O=()=>{const{user:t,signOut:s}=E(),a=_(),[r,i]=h.useState({height_cm:0,weight_kg:0,target_weight_kg:0,target_duration:0,target_duration_unit:"weeks",activity_level:"moderate",health_goals:[]}),[n,l]=h.useState(!1),[d,g]=h.useState("cm"),[p,v]=h.useState("kg"),[f,b]=h.useState("kg"),[x,j]=h.useState(0),[y,k]=h.useState(0),[I,S]=h.useState(!1),[T,C]=h.useState(!1),A=h.useCallback(()=>{var e,s,a;return t?(null==(e=t.user_metadata)?void 0:e.full_name)||(null==(s=t.user_metadata)?void 0:s.name)||(null==(a=t.email)?void 0:a.split("@")[0])||"User":""},[t]),M=h.useCallback(()=>{var e,s;if(!(null==t?void 0:t.email))return"U";const a=t.email,r=(null==(e=t.user_metadata)?void 0:e.full_name)||(null==(s=t.user_metadata)?void 0:s.name);if(r){const e=r.trim().split(" ");return e.length>=2?(e[0][0]+e[e.length-1][0]).toUpperCase():r[0].toUpperCase()}return a[0].toUpperCase()},[t]);h.useEffect(()=>{P()},[t]);const P=()=>u(e,null,function*(){if(t)try{const{data:s}=yield N.getUserProfile(t.id);let a={target_weight_kg:0,target_duration:0,target_duration_unit:"weeks"};try{const e=localStorage.getItem(`profile_extra_${t.id}`);e&&(a=JSON.parse(e))}catch(e){}if(s){if(i({height_cm:s.height_cm||0,weight_kg:s.weight_kg||0,target_weight_kg:a.target_weight_kg||0,target_duration:a.target_duration||0,target_duration_unit:a.target_duration_unit||"weeks",activity_level:s.activity_level||"moderate",health_goals:s.health_goals||[]}),C(!0),s.height_cm){const e=Math.floor(s.height_cm/30.48),t=Math.round(s.height_cm%30.48/2.54);j(e),k(t)}}else i({height_cm:0,weight_kg:0,target_weight_kg:a.target_weight_kg||0,target_duration:a.target_duration||0,target_duration_unit:a.target_duration_unit||"weeks",activity_level:"moderate",health_goals:[]}),l(!0)}catch(s){}}),O=(e,t)=>Math.round(30.48*e+2.54*t),L=(e,t,s)=>t===s?e:"kg"===t&&"lbs"===s?Math.round(2.20462*e*10)/10:"lbs"===t&&"kg"===s?Math.round(e/2.20462*10)/10:e,D=(e,t)=>{i(s=>c(o({},s),{[e]:t}))},R=h.useCallback(()=>u(e,null,function*(){try{yield s(),a("/")}catch(e){w.getInstance().show("Failed to sign out","error")}}),[s,a]);return m.jsx("div",{className:"profile",children:m.jsxs("div",{className:"profile__container",children:[m.jsxs("div",{className:"profile__header",children:[m.jsxs("div",{className:"profile__user",children:[m.jsx("div",{className:"profile__avatar",children:m.jsx("span",{className:"profile__initials",children:M()})}),m.jsxs("ul",{className:"profile__info",children:[m.jsx("li",{className:"profile__name",children:A()}),m.jsx("li",{className:"profile__email",children:null==t?void 0:t.email})]})]}),m.jsxs("button",{className:"profile__signout-btn",onClick:R,"aria-label":"Sign out",type:"button",children:[m.jsx("span",{className:"profile__signout-icon",children:"üö™"}),m.jsx("span",{className:"profile__signout-text",children:"Sign Out"})]})]}),m.jsx("div",{className:"profile__content",children:m.jsxs("div",{className:"profile__section",children:[m.jsxs("div",{className:"profile__section-header",children:[m.jsx("h2",{children:"Setup Profile"}),!n&&T&&m.jsx("button",{className:"profile__edit-btn",onClick:()=>l(!0),children:"Edit"})]}),m.jsxs("div",{className:"profile__form",children:[m.jsxs("div",{className:"profile__row",children:[m.jsxs("div",{className:"profile__field-group",children:[m.jsxs("div",{className:"profile__field-header",children:[m.jsx("h3",{children:"Height"}),m.jsx("button",{type:"button",className:"profile__unit-toggle",onClick:()=>{g(e=>"cm"===e?"ft":"cm")},disabled:!n,children:"cm"===d?"ft/in":"cm"})]}),"cm"===d?m.jsxs("div",{className:"profile__input-group",children:[m.jsx("input",{id:"height-cm",name:"height-cm",type:"number",min:"0",max:"250",value:r.height_cm,onChange:e=>D("height_cm",parseInt(e.target.value)||0),disabled:!n,placeholder:"Height in cm"}),m.jsx("span",{className:"profile__unit",children:"cm"})]}):m.jsxs("div",{className:"profile__height-row",children:[m.jsxs("div",{className:"profile__input-group",children:[m.jsx("input",{id:"height-feet",name:"height-feet",type:"number",min:"0",max:"8",value:x,onChange:e=>{const t=parseInt(e.target.value)||0;j(t),D("height_cm",O(t,y))},disabled:!n,placeholder:"Feet"}),m.jsx("span",{className:"profile__unit",children:"ft"})]}),m.jsxs("div",{className:"profile__input-group",children:[m.jsx("input",{id:"height-inches",name:"height-inches",type:"number",min:"0",max:"11",value:y,onChange:e=>{const t=parseInt(e.target.value)||0;k(t),D("height_cm",O(x,t))},disabled:!n,placeholder:"Inches"}),m.jsx("span",{className:"profile__unit",children:"in"})]})]})]}),m.jsxs("div",{className:"profile__field-group",children:[m.jsxs("div",{className:"profile__field-header",children:[m.jsx("h3",{children:"Weight"}),m.jsx("button",{type:"button",className:"profile__unit-toggle",onClick:()=>{v(e=>"kg"===e?"lbs":"kg")},disabled:!n,children:"kg"===p?"lbs":"kg"})]}),m.jsxs("div",{className:"profile__input-group",children:[m.jsx("input",{id:"weight",name:"weight",type:"number",min:"0",max:"kg"===p?"500":"1100",step:"0.1",value:"kg"===p?r.weight_kg:L(r.weight_kg,"kg","lbs"),onChange:e=>{const t=parseFloat(e.target.value)||0;D("weight_kg","kg"===p?t:L(t,"lbs","kg"))},disabled:!n,placeholder:`Weight in ${p}`}),m.jsx("span",{className:"profile__unit",children:p})]})]})]}),m.jsxs("div",{className:"profile__row",children:[m.jsxs("div",{className:"profile__field-group",children:[m.jsxs("div",{className:"profile__field-header",children:[m.jsx("h3",{children:"Target Weight"}),m.jsx("button",{type:"button",className:"profile__unit-toggle",onClick:()=>{b(e=>"kg"===e?"lbs":"kg")},disabled:!n,children:"kg"===f?"lbs":"kg"})]}),m.jsxs("div",{className:"profile__input-group",children:[m.jsx("input",{id:"target-weight",name:"target-weight",type:"number",min:"0",max:"kg"===f?"500":"1100",step:"0.1",value:"kg"===f?r.target_weight_kg:L(r.target_weight_kg,"kg","lbs"),onChange:e=>{const t=parseFloat(e.target.value)||0;D("target_weight_kg","kg"===f?t:L(t,"lbs","kg"))},disabled:!n,placeholder:`Target weight in ${f}`}),m.jsx("span",{className:"profile__unit",children:f})]})]}),m.jsxs("div",{className:"profile__field-group",children:[m.jsx("div",{className:"profile__field-header",children:m.jsx("h3",{children:"Target Duration"})}),m.jsxs("div",{className:"profile__duration-row",children:[m.jsx("div",{className:"profile__input-group",children:m.jsx("input",{id:"target-duration",name:"target-duration",type:"number",min:"1",max:"999",value:r.target_duration,onChange:e=>D("target_duration",parseInt(e.target.value)||0),disabled:!n,placeholder:"Duration"})}),m.jsxs("select",{id:"target-duration-unit",name:"target-duration-unit",value:r.target_duration_unit,onChange:e=>D("target_duration_unit",e.target.value),disabled:!n,className:"profile__select profile__duration-unit",children:[m.jsx("option",{value:"days",children:"Days"}),m.jsx("option",{value:"weeks",children:"Weeks"}),m.jsx("option",{value:"months",children:"Months"})]})]})]})]}),m.jsx("div",{className:"profile__row",children:m.jsxs("div",{className:"profile__field-group",children:[m.jsx("div",{className:"profile__field-header",children:m.jsx("h3",{children:"Activity Level"})}),m.jsxs("select",{id:"activity-level",name:"activity-level",value:r.activity_level,onChange:e=>D("activity_level",e.target.value),disabled:!n,className:"profile__select",children:[m.jsx("option",{value:"sedentary",children:"Sedentary"}),m.jsx("option",{value:"light",children:"Light"}),m.jsx("option",{value:"moderate",children:"Moderate"}),m.jsx("option",{value:"active",children:"Active"}),m.jsx("option",{value:"very_active",children:"Very Active"})]})]})})]}),m.jsx("div",{className:"profile__actions",children:n?m.jsxs(m.Fragment,{children:[m.jsx("button",{className:"profile__save-btn "+(I?"profile__save-btn--loading":""),onClick:()=>u(e,null,function*(){if(t&&(()=>{if("ft"===d){if(x<0||x>8||y<0||y>=12)return w.getInstance().show("Please enter valid height (0-8 feet, 0-11 inches)","error"),!1}else if(r.height_cm<0||r.height_cm>250)return w.getInstance().show("Please enter valid height (0-250 cm)","error"),!1;const e="kg"===p?r.weight_kg:L(r.weight_kg,"lbs","kg");if(e<0||e>500)return w.getInstance().show("Please enter valid weight","error"),!1;const t="kg"===f?r.target_weight_kg:L(r.target_weight_kg,"lbs","kg");return t<0||t>500?(w.getInstance().show("Please enter valid target weight","error"),!1):!(r.target_duration<=0&&(w.getInstance().show("Please enter valid target duration","error"),1))})()){S(!0);try{const e={};e.height_cm="ft"===d?O(x,y):r.height_cm,e.weight_kg="lbs"===p?L(r.weight_kg,"lbs","kg"):r.weight_kg,e.activity_level=r.activity_level,e.health_goals=r.health_goals;const s={target_weight_kg:"lbs"===f?L(r.target_weight_kg,"lbs","kg"):r.target_weight_kg,target_duration:r.target_duration,target_duration_unit:r.target_duration_unit};localStorage.setItem(`profile_extra_${t.id}`,JSON.stringify(s));const{error:a}=yield N.updateUserProfile(t.id,e);if(a)throw a;w.getInstance().show("Profile updated successfully!","success"),l(!1),C(!0)}catch(e){w.getInstance().show(e.message||"Failed to save profile","error")}finally{S(!1)}}}),disabled:I,children:I?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"profile__loading-spinner"}),"Updating..."]}):T?"Update Profile":"Save Profile"}),T&&m.jsx("button",{className:"profile__cancel-btn",onClick:()=>{P(),l(!1)},disabled:I,children:"Cancel"})]}):T&&m.jsx("button",{className:"profile__edit-btn",onClick:()=>l(!0),children:"Edit Profile"})})]})})]})})},L=()=>{const e=h.useRef(null),{setCurrentSection:t}=C();E();const[s,a]=h.useState([]),[r,i]=h.useState({totalCalories:0,totalProtein:0,totalCarbs:0,totalFat:0,goalCalories:2e3,goalProtein:150,goalCarbs:250,goalFat:65});h.useEffect(()=>{t("journal");const e=[{id:"1",name:"Greek Yogurt with Berries",calories:180,protein:15,carbs:20,fat:5,timestamp:new Date((new Date).setHours(8,30,0,0)),mealType:"breakfast"},{id:"2",name:"Banana",calories:105,protein:1.3,carbs:27,fat:.4,timestamp:new Date((new Date).setHours(10,15,0,0)),mealType:"snack"},{id:"3",name:"Grilled Chicken Salad",calories:350,protein:35,carbs:12,fat:18,timestamp:new Date((new Date).setHours(12,45,0,0)),mealType:"lunch"},{id:"4",name:"Almonds (28g)",calories:164,protein:6,carbs:6,fat:14,timestamp:new Date((new Date).setHours(15,20,0,0)),mealType:"snack"},{id:"5",name:"Salmon with Quinoa",calories:420,protein:38,carbs:35,fat:16,timestamp:new Date((new Date).setHours(19,0,0,0)),mealType:"dinner"},{id:"6",name:"Mixed Vegetables",calories:80,protein:4,carbs:16,fat:1,timestamp:new Date((new Date).setHours(19,0,0,0)),mealType:"dinner"}];a(e),n(e)},[t]);const n=e=>{const t=new Date;t.setHours(0,0,0,0);const s=e.filter(e=>{const s=new Date(e.timestamp);return s.setHours(0,0,0,0),s.getTime()===t.getTime()}).reduce((e,t)=>c(o({},e),{totalCalories:e.totalCalories+t.calories,totalProtein:e.totalProtein+t.protein,totalCarbs:e.totalCarbs+t.carbs,totalFat:e.totalFat+t.fat}),{totalCalories:0,totalProtein:0,totalCarbs:0,totalFat:0,goalCalories:r.goalCalories,goalProtein:r.goalProtein,goalCarbs:r.goalCarbs,goalFat:r.goalFat});i(s)},l=e=>{const t=new Date;return t.setHours(0,0,0,0),s.filter(s=>{const a=new Date(s.timestamp);return a.setHours(0,0,0,0),s.mealType===e&&a.getTime()===t.getTime()}).sort((e,t)=>e.timestamp.getTime()-t.timestamp.getTime())},d=(e,t)=>Math.min(e/t*100,100);return m.jsx("section",{ref:e,id:"journal",className:"journal",children:m.jsxs("div",{className:"journal__container",children:[m.jsxs("div",{className:"journal__header",children:[m.jsx("h1",{className:"journal__title",children:"üìù Today's Health Journal"}),m.jsx("div",{className:"journal__date",children:(new Date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),m.jsxs("div",{className:"journal__nutrition-overview",children:[m.jsx("h2",{className:"journal__section-title",children:"Daily Nutrition Summary"}),m.jsxs("div",{className:"journal__nutrition-grid",children:[m.jsxs("div",{className:"journal__nutrition-card journal__nutrition-card--calories",children:[m.jsx("div",{className:"journal__nutrition-icon",children:"üî•"}),m.jsxs("div",{className:"journal__nutrition-content",children:[m.jsxs("div",{className:"journal__nutrition-value",children:[Math.round(r.totalCalories)," / ",r.goalCalories]}),m.jsx("div",{className:"journal__nutrition-label",children:"Calories"}),m.jsx("div",{className:"journal__progress-bar",children:m.jsx("div",{className:"journal__progress-fill journal__progress-fill--calories",style:{width:`${d(r.totalCalories,r.goalCalories)}%`}})})]})]}),m.jsxs("div",{className:"journal__nutrition-card journal__nutrition-card--protein",children:[m.jsx("div",{className:"journal__nutrition-icon",children:"üí™"}),m.jsxs("div",{className:"journal__nutrition-content",children:[m.jsxs("div",{className:"journal__nutrition-value",children:[Math.round(r.totalProtein),"g / ",r.goalProtein,"g"]}),m.jsx("div",{className:"journal__nutrition-label",children:"Protein"}),m.jsx("div",{className:"journal__progress-bar",children:m.jsx("div",{className:"journal__progress-fill journal__progress-fill--protein",style:{width:`${d(r.totalProtein,r.goalProtein)}%`}})})]})]}),m.jsxs("div",{className:"journal__nutrition-card journal__nutrition-card--carbs",children:[m.jsx("div",{className:"journal__nutrition-icon",children:"üåæ"}),m.jsxs("div",{className:"journal__nutrition-content",children:[m.jsxs("div",{className:"journal__nutrition-value",children:[Math.round(r.totalCarbs),"g / ",r.goalCarbs,"g"]}),m.jsx("div",{className:"journal__nutrition-label",children:"Carbs"}),m.jsx("div",{className:"journal__progress-bar",children:m.jsx("div",{className:"journal__progress-fill journal__progress-fill--carbs",style:{width:`${d(r.totalCarbs,r.goalCarbs)}%`}})})]})]}),m.jsxs("div",{className:"journal__nutrition-card journal__nutrition-card--fat",children:[m.jsx("div",{className:"journal__nutrition-icon",children:"ü•ë"}),m.jsxs("div",{className:"journal__nutrition-content",children:[m.jsxs("div",{className:"journal__nutrition-value",children:[Math.round(r.totalFat),"g / ",r.goalFat,"g"]}),m.jsx("div",{className:"journal__nutrition-label",children:"Fat"}),m.jsx("div",{className:"journal__progress-bar",children:m.jsx("div",{className:"journal__progress-fill journal__progress-fill--fat",style:{width:`${d(r.totalFat,r.goalFat)}%`}})})]})]})]})]}),m.jsxs("div",{className:"journal__meals-timeline",children:[m.jsx("h2",{className:"journal__section-title",children:"Today's Detailed Meal Log"}),["breakfast","lunch","dinner","snack"].map(e=>{const t=l(e),s=l(e).reduce((e,t)=>e+t.calories,0);return 0===t.length?null:m.jsxs("div",{className:"journal__meal-section",children:[m.jsxs("div",{className:"journal__meal-header",children:[m.jsxs("div",{className:"journal__meal-type",children:[m.jsxs("span",{className:"journal__meal-icon",children:["breakfast"===e&&"üåÖ","lunch"===e&&"‚òÄÔ∏è","dinner"===e&&"üåô","snack"===e&&"üçø"]}),m.jsx("h3",{className:"journal__meal-title",children:e.charAt(0).toUpperCase()+e.slice(1)})]}),m.jsxs("div",{className:"journal__meal-summary",children:[m.jsxs("span",{className:"journal__meal-count",children:[t.length," ",1===t.length?"item":"items"]}),m.jsxs("span",{className:"journal__meal-calories",children:[Math.round(s)," cal"]})]})]}),m.jsx("div",{className:"journal__meal-items",children:t.map(e=>{return m.jsxs("div",{className:"journal__meal-item",children:[m.jsx("div",{className:"journal__meal-time",children:(t=e.timestamp,t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}))}),m.jsxs("div",{className:"journal__meal-details",children:[m.jsx("div",{className:"journal__meal-name",children:e.name}),m.jsxs("div",{className:"journal__meal-nutrition",children:[m.jsxs("span",{className:"journal__nutrition-item",children:["üî• ",e.calories," cal"]}),m.jsxs("span",{className:"journal__nutrition-item",children:["üí™ ",e.protein,"g protein"]}),m.jsxs("span",{className:"journal__nutrition-item",children:["üåæ ",e.carbs,"g carbs"]}),m.jsxs("span",{className:"journal__nutrition-item",children:["ü•ë ",e.fat,"g fat"]})]})]})]},e.id);var t})})]},e)})]}),m.jsxs("div",{className:"journal__quick-stats",children:[m.jsx("h2",{className:"journal__section-title",children:"Today's Quick Stats"}),m.jsxs("div",{className:"journal__stats-grid",children:[m.jsxs("div",{className:"journal__stat-card",children:[m.jsx("div",{className:"journal__stat-value",children:s.length}),m.jsx("div",{className:"journal__stat-label",children:"Total Meals/Snacks"})]}),m.jsxs("div",{className:"journal__stat-card",children:[m.jsxs("div",{className:"journal__stat-value",children:[Math.round(r.totalCalories/r.goalCalories*100),"%"]}),m.jsx("div",{className:"journal__stat-label",children:"Daily Goal Progress"})]}),m.jsxs("div",{className:"journal__stat-card",children:[m.jsx("div",{className:"journal__stat-value",children:s.length>0?Math.round(r.totalCalories/s.length):0}),m.jsx("div",{className:"journal__stat-label",children:"Avg Calories per Meal"})]}),m.jsxs("div",{className:"journal__stat-card",children:[m.jsxs("div",{className:"journal__stat-value",children:[Math.round(r.totalProtein/r.totalCalories*100),"%"]}),m.jsx("div",{className:"journal__stat-label",children:"Protein Ratio"})]})]})]})]})})},D=()=>{const[t,s]=h.useState("processing"),[a,r]=h.useState("Completing sign in..."),i=_();return h.useEffect(()=>{u(e,null,function*(){try{s("processing"),r("Completing sign in...");const e=yield N.handleOAuthCallback();e.success?(s("success"),r("Sign in successful! Redirecting..."),window.opener&&window.opener!==window||setTimeout(()=>{i("/",{replace:!0})},1500)):(s("error"),r(e.error||"Authentication failed. Please try again."),window.opener&&window.opener!==window||setTimeout(()=>{i("/",{replace:!0})},3e3))}catch(e){s("error"),r("Authentication callback failed. Please try again."),window.opener&&window.opener!==window?(window.opener.postMessage({type:"SUPABASE_AUTH_ERROR",error:{message:"Authentication callback failed"}},window.location.origin),window.close()):setTimeout(()=>{i("/",{replace:!0})},3e3)}})},[i]),m.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",fontFamily:"Arial, sans-serif",backgroundColor:"#f5f5f5"},children:m.jsxs("div",{style:{textAlign:"center",padding:"2rem",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:["processing"===t&&m.jsx("div",{style:{width:"40px",height:"40px",border:"3px solid #e3e3e3",borderTop:"3px solid #007bff",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),"success"===t&&m.jsx("div",{style:{fontSize:"2rem",color:"#28a745",margin:"0 auto 1rem"},children:"‚úì"}),"error"===t&&m.jsx("div",{style:{fontSize:"2rem",color:"#dc3545",margin:"0 auto 1rem"},children:"‚úó"}),m.jsx("p",{style:{margin:0,color:"error"===t?"#dc3545":"success"===t?"#28a745":"#666"},children:a}),m.jsx("style",{children:"\n                    @keyframes spin {\n                        0% { transform: rotate(0deg); }\n                        100% { transform: rotate(360deg); }\n                    }\n                "})]})})},R=({size:e="md",message:t="Loading..."})=>m.jsxs("div",{className:`loading-spinner loading-spinner--${e}`,children:[m.jsx("div",{className:"loading-spinner__circle"}),t&&m.jsx("p",{className:"loading-spinner__message",children:t})]}),U=({children:e,requireAdmin:t=!1,fallback:s=null})=>{const{loading:a,isAuthenticated:r,isAdmin:i,user:n}=E();return a?m.jsx("div",{className:"protected-route protected-route--loading",children:m.jsx(R,{})}):t&&!i?m.jsx("div",{className:"protected-route protected-route--unauthorized",children:m.jsxs("div",{className:"protected-route__container",children:[m.jsx("h2",{className:"protected-route__title",children:"Access Denied"}),m.jsx("p",{className:"protected-route__message",children:"You don't have admin privileges to access this area."}),m.jsxs("p",{className:"protected-route__user-info",children:["Signed in as: ",null==n?void 0:n.email]})]})}):m.jsx(m.Fragment,{children:e})},z=(e,t=!1)=>{const a=((e={})=>{const{autoInit:t=!0,onStateChange:a}=e,r=h.useRef(null),i=h.useRef(null),n=h.useRef(a);n.current=a;const[l,o]=h.useState(()=>({isOpen:!1,activeItem:"home",hoveredItem:null,focusedItem:null,keyboardMode:!1,isAnimating:!1})),[c,d]=h.useState(()=>({items:[],animationDuration:300,radius:120,centerSize:60,itemSize:50,autoClose:!0,closeDelay:1e3,enableKeyboard:!0,enableTouch:!0,centerIcon:"menu",centerLabel:"Menu"}));return h.useEffect(()=>{if(!t)return;r.current=s.getInstance(),d(r.current.getConfig()),o(r.current.getState()),i.current=r.current.subscribe(e=>{var t;o(e),null==(t=n.current)||t.call(n,e)});const e=()=>{r.current&&d(r.current.getConfig())};return document.addEventListener("navigation:config-updated",e),()=>{var t;null==(t=i.current)||t.call(i),i.current=null,document.removeEventListener("navigation:config-updated",e)}},[t]),{state:l,actions:h.useMemo(()=>({open:()=>{var e;return null==(e=r.current)?void 0:e.open()},close:()=>{var e;return null==(e=r.current)?void 0:e.close()},toggle:()=>{var e;return null==(e=r.current)?void 0:e.toggle()},navigate:e=>{var t;return null==(t=r.current)?void 0:t.navigate(e)},setHovered:e=>{var t;return null==(t=r.current)?void 0:t.setHoveredItem(e)},updateAuthState:e=>{var t;return null==(t=r.current)?void 0:t.updateAuthState(e)}}),[]),config:c}})();return h.useEffect(()=>{!t&&a.actions.updateAuthState&&a.actions.updateAuthState(e)},[e,t,a.actions]),a},V=class e{constructor(){d(this,"observer",null),d(this,"elements",new Map),d(this,"scrollPosition",0),d(this,"isScrolling",!1),d(this,"scrollTimeout",null),d(this,"callbacks",new Set),d(this,"defaultConfig",{threshold:.1,rootMargin:"0px 0px -50px 0px",triggerOnce:!1,reverse:!0}),this.init()}static getInstance(){return e.instance||(e.instance=new e),e.instance}init(){this.setupIntersectionObserver(),this.setupScrollListener(),this.bindMethods()}bindMethods(){this.handleIntersection=this.handleIntersection.bind(this),this.handleScroll=this.handleScroll.bind(this)}setupIntersectionObserver(){const e={threshold:[0,.1,.25,.5,.75,1],rootMargin:this.defaultConfig.rootMargin};this.observer=new IntersectionObserver(this.handleIntersection,e)}setupScrollListener(){let e=!1;window.addEventListener("scroll",()=>{e||(requestAnimationFrame(()=>{this.handleScroll(),e=!1}),e=!0)},{passive:!0})}handleIntersection(e){e.forEach(e=>{const t=e.target.getAttribute("data-scroll-id");if(!t)return;const s=this.elements.get(t);if(!s)return;const a=e.isIntersecting,r=s.isVisible;s.isVisible=a,a&&!r?this.triggerAnimation(t,"enter"):!a&&r&&s.config.reverse&&this.triggerAnimation(t,"exit")})}handleScroll(){const e=window.pageYOffset||document.documentElement.scrollTop,t=e>this.scrollPosition?"down":"up";this.scrollPosition=e,this.isScrolling=!0,this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=window.setTimeout(()=>{this.isScrolling=!1},150),this.callbacks.forEach(s=>{s(e,t)})}register(e,t,s={}){const a=`scroll-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,r=o(o({},this.defaultConfig),s);return e.setAttribute("data-scroll-id",a),this.elements.set(a,{element:e,animation:t,config:r,isVisible:!1,hasAnimated:!1}),this.observer&&this.observer.observe(e),a}unregister(e){const t=this.elements.get(e);t&&this.observer&&(this.observer.unobserve(t.element),t.element.removeAttribute("data-scroll-id")),this.elements.delete(e)}triggerAnimation(e,t){const s=this.elements.get(e);if(!s)return;const{element:a,animation:r,config:i}=s;if(i.triggerOnce&&s.hasAnimated&&"enter"===t)return;const n="enter"===t?`${r}-enter`:`${r}-exit`;a.classList.remove(`${r}-enter`,`${r}-exit`),a.offsetHeight,a.classList.add(n),"enter"===t&&(s.hasAnimated=!0);const l=new CustomEvent("scrollAnimation",{detail:{id:e,type:t,animation:r,element:a}});a.dispatchEvent(l)}onScroll(e){return this.callbacks.add(e),()=>{this.callbacks.delete(e)}}getScrollPosition(){return this.scrollPosition}isCurrentlyScrolling(){return this.isScrolling}scrollTo(e,t=!0){const s={behavior:t?"smooth":"auto"};if("number"==typeof e)s.top=e;else{const t=e.getBoundingClientRect();s.top=window.pageYOffset+t.top}window.scrollTo(s)}destroy(){this.observer&&(this.observer.disconnect(),this.observer=null),this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.elements.clear(),this.callbacks.clear()}};d(V,"instance");let B=V;const H=class e{constructor(){d(this,"metrics",{fcp:null,lcp:null,fid:null,cls:null,ttfb:null}),d(this,"observers",new Map),this.init()}static getInstance(){return e.instance||(e.instance=new e),e.instance}init(){"undefined"!=typeof window&&(this.observeWebVitals(),this.observeResourceTiming(),this.setupErrorTracking())}observeWebVitals(){if("PerformanceObserver"in window){const t=new PerformanceObserver(e=>{for(const t of e.getEntries())"first-contentful-paint"===t.name&&(this.metrics.fcp=t.startTime,this.reportMetric("fcp",t.startTime))});t.observe({entryTypes:["paint"]}),this.observers.set("paint",t);const s=new PerformanceObserver(e=>{const t=e.getEntries(),s=t[t.length-1];this.metrics.lcp=s.startTime,this.reportMetric("lcp",s.startTime)});s.observe({entryTypes:["largest-contentful-paint"]}),this.observers.set("lcp",s);const a=new PerformanceObserver(e=>{for(const t of e.getEntries()){const e=t;void 0!==e.processingStart&&(this.metrics.fid=e.processingStart-e.startTime,this.reportMetric("fid",this.metrics.fid))}});try{a.observe({entryTypes:["first-input"]}),this.observers.set("fid",a)}catch(e){}let r=0;const i=new PerformanceObserver(e=>{for(const t of e.getEntries()){const e=t;e.hadRecentInput||(r+=e.value)}this.metrics.cls=r,this.reportMetric("cls",r)});try{i.observe({entryTypes:["layout-shift"]}),this.observers.set("cls",i)}catch(e){}}}observeResourceTiming(){if("PerformanceObserver"in window){const e=new PerformanceObserver(e=>{for(const t of e.getEntries())this.analyzeResourceTiming(t)});e.observe({entryTypes:["resource"]}),this.observers.set("resource",e)}}analyzeResourceTiming(e){e.responseEnd,e.startTime,"navigation"===e.initiatorType&&(this.metrics.ttfb=e.responseStart-e.startTime,this.reportMetric("ttfb",this.metrics.ttfb))}setupErrorTracking(){window.addEventListener("error",e=>{var t;this.reportError({type:"javascript",message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,stack:null==(t=e.error)?void 0:t.stack})}),window.addEventListener("unhandledrejection",e=>{var t,s;this.reportError({type:"promise",message:(null==(t=e.reason)?void 0:t.message)||"Unhandled Promise Rejection",stack:null==(s=e.reason)?void 0:s.stack})})}reportMetric(e,t){this.sendToAnalytics("performance_metric",{metric_name:e,metric_value:t,url:window.location.href,timestamp:Date.now()})}reportError(e){this.sendToAnalytics("error",c(o({},e),{url:window.location.href,userAgent:navigator.userAgent,timestamp:Date.now()}))}sendToAnalytics(e,t){}getMetrics(){return o({},this.metrics)}startMark(e){"performance"in window&&performance.mark&&performance.mark(`${e}-start`)}endMark(e){if("performance"in window&&performance.mark&&performance.measure){performance.mark(`${e}-end`),performance.measure(e,`${e}-start`,`${e}-end`);const t=performance.getEntriesByName(e,"measure");return t.length>0?t[0].duration:null}return null}destroy(){this.observers.forEach(e=>e.disconnect()),this.observers.clear()}};d(H,"instance");let F=H;const G=(e,t)=>{const s={VITE_SUPABASE_URL:"https://syxygcrxrldnhlcnpbyr.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN5eHlnY3J4cmxkbmhsY25wYnlyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1ODU3NDMsImV4cCI6MjA3MTE2MTc0M30.21zINCjjS_O5bSdR5EMRhmUHum6yStGwCe_haGUgYeo",VITE_APP_NAME:"Health Tracker",VITE_APP_VERSION:"1.0.0",VITE_APP_DOMAIN:"health.gamingdronzz.com",VITE_APP_URL:"https://health.gamingdronzz.com",VITE_DEBUG_MODE:"false",VITE_ENABLE_DEBUG_PANEL:"false",VITE_ENABLE_LOGGING:"false",VITE_ENABLE_PERFORMANCE_MONITORING:"true",VITE_ENABLE_EXPERIMENTAL_FEATURES:"false",VITE_API_BASE_URL:"https://api.health.gamingdronzz.com/api",VITE_API_TIMEOUT:"10000",VITE_OAUTH_REDIRECT_URL:"https://health.gamingdronzz.com/auth/callback",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}[e];return void 0===s&&void 0===t?"":s||t||""},$=(e,t=!1)=>{const s={VITE_SUPABASE_URL:"https://syxygcrxrldnhlcnpbyr.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN5eHlnY3J4cmxkbmhsY25wYnlyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1ODU3NDMsImV4cCI6MjA3MTE2MTc0M30.21zINCjjS_O5bSdR5EMRhmUHum6yStGwCe_haGUgYeo",VITE_APP_NAME:"Health Tracker",VITE_APP_VERSION:"1.0.0",VITE_APP_DOMAIN:"health.gamingdronzz.com",VITE_APP_URL:"https://health.gamingdronzz.com",VITE_DEBUG_MODE:"false",VITE_ENABLE_DEBUG_PANEL:"false",VITE_ENABLE_LOGGING:"false",VITE_ENABLE_PERFORMANCE_MONITORING:"true",VITE_ENABLE_EXPERIMENTAL_FEATURES:"false",VITE_API_BASE_URL:"https://api.health.gamingdronzz.com/api",VITE_API_TIMEOUT:"10000",VITE_OAUTH_REDIRECT_URL:"https://health.gamingdronzz.com/auth/callback",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}[e];return void 0===s?t:"true"===s||"1"===s||"yes"===s},Y=(e,t=0)=>{const s={VITE_SUPABASE_URL:"https://syxygcrxrldnhlcnpbyr.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN5eHlnY3J4cmxkbmhsY25wYnlyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1ODU3NDMsImV4cCI6MjA3MTE2MTc0M30.21zINCjjS_O5bSdR5EMRhmUHum6yStGwCe_haGUgYeo",VITE_APP_NAME:"Health Tracker",VITE_APP_VERSION:"1.0.0",VITE_APP_DOMAIN:"health.gamingdronzz.com",VITE_APP_URL:"https://health.gamingdronzz.com",VITE_DEBUG_MODE:"false",VITE_ENABLE_DEBUG_PANEL:"false",VITE_ENABLE_LOGGING:"false",VITE_ENABLE_PERFORMANCE_MONITORING:"true",VITE_ENABLE_EXPERIMENTAL_FEATURES:"false",VITE_API_BASE_URL:"https://api.health.gamingdronzz.com/api",VITE_API_TIMEOUT:"10000",VITE_OAUTH_REDIRECT_URL:"https://health.gamingdronzz.com/auth/callback",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}[e];if(void 0===s)return t;const a=parseInt(s,10);return isNaN(a)?t:a},J=(()=>{const e=(()=>{const e={}.NODE_ENV;return"production"===e?"production":"development"===e?"development":"production"})(),t="development"===e,s="production"===e;return{env:e,isDevelopment:t,isProduction:s,name:G("VITE_APP_NAME","Health Tracker Prototype"),version:G("VITE_APP_VERSION",s?"1.0.0":"1.0.0-dev"),description:G("VITE_APP_DESCRIPTION","Health and nutrition tracking prototype"),api:{baseUrl:G("VITE_API_BASE_URL",s?"/api":"http://localhost:3001/api"),timeout:Y("VITE_API_TIMEOUT",1e4)},supabase:{url:G("VITE_SUPABASE_URL"),anonKey:G("VITE_SUPABASE_ANON_KEY")},debug:{enabled:$("VITE_DEBUG_MODE",t),showPanel:$("VITE_ENABLE_DEBUG_PANEL",t),enableLogging:$("VITE_ENABLE_LOGGING",t),enablePerformanceMonitoring:$("VITE_ENABLE_PERFORMANCE_MONITORING",t)},features:{experimentalFeatures:$("VITE_ENABLE_EXPERIMENTAL_FEATURES",t)}}})();"undefined"!=typeof window&&(()=>{const e=["VITE_SUPABASE_URL","VITE_SUPABASE_ANON_KEY"].filter(e=>!G(e));if(e.length>0)throw new Error(`Missing required environment variables: ${e.join(", ")}`)})();const W=({children:e})=>{const t=E(),s=z(t.isAuthenticated,t.loading),{actions:a}=s,r="/"===b().pathname;return m.jsxs("div",{className:"app",children:[m.jsx(k,{position:"fixed-top",onNavigate:e=>{a.navigate(e)},brand:"Health Tracker",brandHref:"/"}),m.jsx("main",{className:"app__main",children:e}),r&&m.jsx("footer",{className:"app__footer",children:m.jsxs("div",{className:"app__footer-content",children:[m.jsx("div",{className:"app__footer-main",children:m.jsxs("div",{className:"app__footer-brand",children:[m.jsx("strong",{children:J.name}),m.jsx("span",{children:"Your health journey starts here"})]})}),m.jsxs("div",{className:"app__footer-bottom",children:[m.jsxs("span",{children:["¬© 2025 ",J.name]}),J.debug.enabled&&m.jsxs("span",{className:"app__footer-version",children:["v",J.version]})]})]})})]})},q=()=>{const t=E(),s=z(t.isAuthenticated,t.loading),{isAuthenticated:a,authLoading:r}=t,{actions:i}=s,n=r?"Signing in...":a?"Go to Add Meals":"Sign In with Google";return m.jsx("section",{id:"home",className:"app__section",children:m.jsx(M,{title:`Welcome to ${J.name}`,subtitle:"Track your health and nutrition journey with ease",primaryCtaText:n,onPrimaryCtaClick:()=>{var s;if(!r)return a?(s="add-meals",void i.navigate(s)):u(e,null,function*(){yield t.signInWithGoogle()})}})})};function K(){const[e,t]=h.useState(!0),a=E();z(a.isAuthenticated,a.loading);const{isAuthenticated:r,loading:i,authLoading:n}=a;h.useEffect(()=>{const e=B.getInstance(),t=F.getInstance();return J.debug.enablePerformanceMonitoring&&t.startMark("app-init"),()=>{e.destroy(),t.destroy()}},[]),((e,t,a=[])=>{const r=h.useRef(t);r.current=t,h.useEffect(()=>{const t=t=>{var a,i;const n=t,l={type:n.type.replace("navigation:",""),item:null==(a=n.detail)?void 0:a.item,state:(null==(i=n.detail)?void 0:i.state)||s.getInstance().getState(),timestamp:Date.now()};"all"!==e&&l.type!==e||r.current(l)},a="all"===e?["navigation:open","navigation:close","navigation:navigate","navigation:navigate-blocked","navigation:hover","navigation:focus","navigation:config-updated"]:[`navigation:${e}`];return a.forEach(e=>{document.addEventListener(e,t)}),()=>{a.forEach(e=>{document.removeEventListener(e,t)})}},[e,...a])})("all",e=>{e.type},[]);const l=()=>{t(!1),document.body.classList.add("app-loaded"),J.debug.enableLogging&&J.debug.enablePerformanceMonitoring&&F.getInstance().endMark("app-init")};return e&&!n?m.jsx(I,{onComplete:l,duration:1200,minDisplayTime:800}):m.jsx(g,{children:m.jsx(W,{children:m.jsxs(p,{children:[m.jsx(v,{path:"/",element:m.jsx(q,{})}),m.jsx(v,{path:"/auth/callback",element:m.jsx(D,{})}),m.jsx(v,{path:"/add-meals",element:m.jsx(U,{children:m.jsx(P,{})})}),m.jsx(v,{path:"/profile",element:m.jsx(U,{children:m.jsx(O,{})})}),m.jsx(v,{path:"/journal",element:m.jsx(U,{children:m.jsx(L,{})})}),m.jsx(v,{path:"*",element:m.jsx(f,{to:"/",replace:!0})})]})})})}x(document.getElementById("root")).render(m.jsx(h.StrictMode,{children:m.jsx(K,{})}))}},function(){return y||(0,N[a(N)[0]])((y={exports:{}}).exports,y),y.exports});export default w();
