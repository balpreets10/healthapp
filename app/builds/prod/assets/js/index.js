var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertyNames,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,l=(s,a,t)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,o=(e,s)=>{for(var a in s||(s={}))i.call(s,a)&&l(e,a,s[a]);if(r)for(var a of r(s))n.call(s,a)&&l(e,a,s[a]);return e},c=(e,t)=>s(e,a(t)),d=(e,s,a)=>(l(e,"symbol"!=typeof s?s+"":s,a),a),u=(e,s,a)=>new Promise((t,r)=>{var i=e=>{try{l(a.next(e))}catch(s){r(s)}},n=e=>{try{l(a.throw(e))}catch(s){r(s)}},l=e=>e.done?t(e.value):Promise.resolve(e.value).then(i,n);l((a=a.apply(e,s)).next())});import{r as h,j as m,u as _,B as g,R as p,a as v,N as f,b as x,c as b}from"./vendor-react.js";import{c as j}from"./vendor-other.js";var N,y,w=(N={"assets/js/index.js"(e){!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();const s=class e{constructor(){d(this,"element",null),d(this,"state"),d(this,"config"),d(this,"subscribers",new Set),d(this,"keyboardHandler",null),d(this,"mouseHandler",null),d(this,"touchHandler",null),d(this,"resizeObserver",null),d(this,"isInitialized",!1),d(this,"isAuthenticated",!1),this.config={items:[{id:"home",label:"Home",href:"/",position:0,disabled:!1,requiresAuth:!1,ariaLabel:"Navigate to Home"},{id:"add-meals",label:"Add Meals",href:"/add-meals",position:1,disabled:!1,requiresAuth:!0,ariaLabel:"Navigate to Add Meals"},{id:"journal",label:"Journal",href:"/journal",position:2,disabled:!1,requiresAuth:!0,ariaLabel:"Navigate to Health Journal"},{id:"profile",label:"Profile",href:"/profile",position:3,disabled:!1,requiresAuth:!0,ariaLabel:"Navigate to Profile"}],animationDuration:300,radius:120,centerSize:60,itemSize:50,autoClose:!0,closeDelay:1e3,enableKeyboard:!0,enableTouch:!0,centerIcon:"menu",centerLabel:"Menu"},this.state={isOpen:!1,activeItem:this.getActiveItemFromPath(),hoveredItem:null,focusedItem:null,keyboardMode:!1,isAnimating:!1},this.init()}static getInstance(){return e.instance||(e.instance=new e),e.instance}init(){this.isInitialized||(this.setupEventListeners(),this.setupRouterListeners(),this.isInitialized=!0)}setupRouterListeners(){window.addEventListener("popstate",()=>{this.updateActiveItemFromPath()});const e=history.pushState,s=history.replaceState;history.pushState=(...s)=>{e.apply(history,s),setTimeout(()=>this.updateActiveItemFromPath(),0)},history.replaceState=(...e)=>{s.apply(history,e),setTimeout(()=>this.updateActiveItemFromPath(),0)}}getActiveItemFromPath(){const e=window.location.pathname,s=this.config.items.find(s=>s.href===e);return s?s.id:"home"}updateActiveItemFromPath(){const e=this.getActiveItemFromPath();this.state.activeItem!==e&&this.setState({activeItem:e})}updateAuthState(e){this.isAuthenticated=e}setupEventListeners(){this.keyboardHandler=e=>{if(this.config.enableKeyboard)switch(e.key){case"Escape":this.state.isOpen&&(this.close(),e.preventDefault());break;case"Tab":this.setState({keyboardMode:!0});break;case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":this.state.isOpen&&(this.handleKeyboardNavigation(e.key),e.preventDefault());break;case"Enter":case" ":this.state.focusedItem&&this.state.isOpen&&(this.navigate(this.state.focusedItem),e.preventDefault())}},this.mouseHandler=e=>{this.state.keyboardMode&&this.setState({keyboardMode:!1})},this.touchHandler=e=>{this.config.enableTouch},document.addEventListener("keydown",this.keyboardHandler),document.addEventListener("mousedown",this.mouseHandler),document.addEventListener("touchstart",this.touchHandler,{passive:!0})}handleKeyboardNavigation(e){const s=this.config.items.findIndex(e=>e.id===this.state.focusedItem);let a=s;switch(e){case"ArrowUp":case"ArrowLeft":a=s>0?s-1:this.config.items.length-1;break;case"ArrowDown":case"ArrowRight":a=s<this.config.items.length-1?s+1:0}const t=this.config.items[a];t&&this.setState({focusedItem:t.id})}setElement(e){this.element=e,this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=new ResizeObserver(()=>{this.updateLayout()}),this.resizeObserver.observe(e)}updateLayout(){}open(){var e;this.state.isOpen||this.state.isAnimating||(this.setState({isOpen:!0,isAnimating:!0,focusedItem:(null==(e=this.config.items[0])?void 0:e.id)||null}),setTimeout(()=>{this.setState({isAnimating:!1})},this.config.animationDuration),this.emitEvent("open",null))}close(){this.state.isOpen&&!this.state.isAnimating&&(this.setState({isOpen:!1,isAnimating:!0,hoveredItem:null,focusedItem:null}),setTimeout(()=>{this.setState({isAnimating:!1})},this.config.animationDuration),this.emitEvent("close",null))}toggle(){this.state.isOpen?this.close():this.open()}navigate(e){const s=this.config.items.find(s=>s.id===e);if(s){if(s.requiresAuth&&!this.isAuthenticated)return this.emitEvent("auth-required",s),void this.showAuthPrompt(s);s.external?window.open(s.href,"_blank","noopener,noreferrer"):this.navigateToRoute(s.href),this.config.autoClose&&setTimeout(()=>{this.close()},this.config.closeDelay),this.emitEvent("navigate",s)}}navigateToRoute(e){window.location.pathname!==e&&(window.history.pushState(null,"",e),window.dispatchEvent(new PopStateEvent("popstate")))}showAuthPrompt(e){const s=document.getElementById("auth-prompt-modal");s&&s.remove();const a=document.createElement("div");a.id="auth-prompt-modal",a.style.cssText="\n            position: fixed;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            background: rgba(0, 0, 0, 0.7);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            z-index: 10000;\n            backdrop-filter: blur(4px);\n        ";const t=document.createElement("div");t.style.cssText="\n            background: var(--gd-surface-raised, white);\n            border-radius: var(--gd-radius-2xl, 16px);\n            padding: var(--gd-space-8, 2rem);\n            max-width: 400px;\n            width: 90%;\n            text-align: center;\n            box-shadow: var(--gd-shadow-2xl, 0 25px 50px -12px rgba(0, 0, 0, 0.25));\n            border: 1px solid var(--gd-border-light, #e5e7eb);\n        ",t.innerHTML=`\n            <h3 style="margin: 0 0 1rem 0; color: var(--gd-text-primary, #000); font-size: var(--gd-font-size-xl, 1.25rem);">\n                Sign in to access ${e.label}\n            </h3>\n            <p style="margin: 0 0 1.5rem 0; color: var(--gd-text-secondary, #666); font-size: var(--gd-font-size-base, 1rem);">\n                Please sign in with Google to continue to ${e.label.toLowerCase()}.\n            </p>\n            <div style="display: flex; gap: 1rem; justify-content: center;">\n                <button id="google-signin-btn" style="\n                    background: #4285f4;\n                    color: white;\n                    border: none;\n                    padding: 0.75rem 1.5rem;\n                    border-radius: var(--gd-radius-lg, 8px);\n                    font-size: var(--gd-font-size-base, 1rem);\n                    font-weight: 500;\n                    cursor: pointer;\n                    display: flex;\n                    align-items: center;\n                    gap: 0.5rem;\n                    transition: background 0.2s;\n                ">\n                    üîê Sign in with Google\n                </button>\n                <button id="cancel-btn" style="\n                    background: var(--gd-bg-secondary, #f3f4f6);\n                    color: var(--gd-text-primary, #000);\n                    border: 1px solid var(--gd-border-light, #e5e7eb);\n                    padding: 0.75rem 1.5rem;\n                    border-radius: var(--gd-radius-lg, 8px);\n                    font-size: var(--gd-font-size-base, 1rem);\n                    cursor: pointer;\n                    transition: background 0.2s;\n                ">\n                    Cancel\n                </button>\n            </div>\n        `,a.appendChild(t),document.body.appendChild(a);const r=a.querySelector("#google-signin-btn"),i=a.querySelector("#cancel-btn");null==r||r.addEventListener("click",()=>{this.emitEvent("google-signin-requested",e),a.remove()}),null==i||i.addEventListener("click",()=>{a.remove()}),a.addEventListener("click",e=>{e.target===a&&a.remove()});const n=e=>{"Escape"===e.key&&(a.remove(),document.removeEventListener("keydown",n))};document.addEventListener("keydown",n);const l=new MutationObserver(e=>{e.forEach(e=>{"childList"===e.type&&e.removedNodes.forEach(e=>{e===a&&(document.removeEventListener("keydown",n),l.disconnect())})})});l.observe(document.body,{childList:!0})}setHoveredItem(e){if(this.state.hoveredItem!==e&&(this.setState({hoveredItem:e}),e)){const s=this.config.items.find(s=>s.id===e);this.emitEvent("hover",s||null)}}getItemPosition(e){const s=(e*(360/this.config.items.length)-90)*(Math.PI/180);return{x:Math.cos(s)*this.config.radius,y:Math.sin(s)*this.config.radius}}getState(){return o({},this.state)}getConfig(){return o({},this.config)}updateConfig(e){const s=e,{items:a}=s,t=((e,s)=>{var a={};for(var t in e)i.call(e,t)&&s.indexOf(t)<0&&(a[t]=e[t]);if(null!=e&&r)for(var t of r(e))s.indexOf(t)<0&&n.call(e,t)&&(a[t]=e[t]);return a})(s,["items"]);this.config=o(o({},this.config),t),this.emitEvent("config-updated",null),this.notifySubscribers()}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}setState(e){this.state=o(o({},this.state),e),this.notifySubscribers()}notifySubscribers(){this.subscribers.forEach(e=>{try{e(this.state)}catch(s){}})}emitEvent(e,s){const a=new CustomEvent(`navigation:${e}`,{detail:{item:s,state:this.state},bubbles:!0});document.dispatchEvent(a)}destroy(){this.keyboardHandler&&document.removeEventListener("keydown",this.keyboardHandler),this.mouseHandler&&document.removeEventListener("mousedown",this.mouseHandler),this.touchHandler&&document.removeEventListener("touchstart",this.touchHandler),this.resizeObserver&&this.resizeObserver.disconnect();const s=document.getElementById("auth-prompt-modal");s&&s.remove(),this.subscribers.clear(),e.instance=null,this.isInitialized=!1}};d(s,"instance",null);let a=s;const t={url:"https://syxygcrxrldnhlcnpbyr.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN5eHlnY3J4cmxkbmhsY25wYnlyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1ODU3NDMsImV4cCI6MjA3MTE2MTc0M30.21zINCjjS_O5bSdR5EMRhmUHum6yStGwCe_haGUgYeo",auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce",redirectTo:"https://health.gamingdronzz.com/auth/callback"}},l={name:"Health Tracker",version:"1.0.0",baseUrl:"https://health.gamingdronzz.com",domain:"health.gamingdronzz.com"},N=new class{constructor(){d(this,"client"),this.client=j(t.url,t.anonKey,{auth:c(o({},t.auth),{flowType:"pkce",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0})})}signInWithGoogle(){return u(this,null,function*(){try{const{data:e,error:s}=yield this.client.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent"},scopes:"openid email profile"}});return{data:e,error:s}}catch(e){return{data:null,error:e}}})}signInWithGooglePopup(){return u(this,null,function*(){try{const{data:e,error:s}=yield this.client.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent"},scopes:"openid email profile"}});return{data:e,error:s}}catch(e){return{data:null,error:e}}})}handlePopupCallback(){return u(this,null,function*(){try{yield new Promise(e=>setTimeout(e,1e3));const{data:e,error:s}=yield this.client.auth.getSession();return s?{data:null,error:s}:e.session?{data:e.session,error:null}:{data:null,error:{message:"No session found after authentication",name:"NoSession",status:401}}}catch(e){return{data:null,error:e}}})}signInWithEmail(e,s,a=!1){return u(this,null,function*(){try{const{data:r,error:i}=yield this.client.auth.signInWithPassword({email:e,password:s});if(!i&&r.session&&a)try{yield this.extendSessionDuration(r.session)}catch(t){}return{data:r,error:i}}catch(r){return{data:null,error:r}}})}signUpWithEmail(e,s){return u(this,null,function*(){try{const{data:a,error:r}=yield this.client.auth.signUp({email:e,password:s,options:{emailRedirectTo:t.auth.redirectTo,data:{email_verify:!0}}});return{data:a,error:r}}catch(a){return{data:null,error:a}}})}signOut(){return u(this,null,function*(){try{this.clearExtendedSession();const{error:e}=yield this.client.auth.signOut();return{error:e}}catch(e){return{error:e}}})}getSession(){return u(this,null,function*(){try{const{data:{session:e},error:s}=yield this.client.auth.getSession();return{session:e,error:s}}catch(e){return{session:null,error:e}}})}getUser(){return u(this,null,function*(){try{const{data:{user:e},error:s}=yield this.client.auth.getUser();return{user:e,error:s}}catch(e){return{user:null,error:e}}})}refreshSession(){return u(this,null,function*(){try{const{data:{session:e},error:s}=yield this.client.auth.refreshSession();return{session:e,error:s}}catch(e){return{session:null,error:e}}})}extendSessionDuration(e){return u(this,null,function*(){try{const s=new Date;s.setDate(s.getDate()+30),localStorage.setItem("extended_session",JSON.stringify({expiry:s.toISOString(),userId:e.user.id}))}catch(s){}})}resetPassword(e){return u(this,null,function*(){try{const{data:s,error:a}=yield this.client.auth.resetPasswordForEmail(e,{redirectTo:`${l.baseUrl}/auth/reset-password`});return{data:s,error:a}}catch(s){return{data:null,error:s}}})}updatePassword(e){return u(this,null,function*(){try{const{data:s,error:a}=yield this.client.auth.updateUser({password:e});return{data:s,error:a}}catch(s){return{data:null,error:s}}})}resendEmailVerification(e){return u(this,null,function*(){try{const{data:s,error:a}=yield this.client.auth.resend({type:"signup",email:e,options:{emailRedirectTo:t.auth.redirectTo}});return{data:s,error:a}}catch(s){return{data:null,error:s}}})}onAuthStateChange(e){const{data:{subscription:s}}=this.client.auth.onAuthStateChange((s,a)=>{e(s,a)});return()=>{s.unsubscribe()}}registerUser(e){return u(this,null,function*(){var s,a,t,r,i;try{const{data:n,error:l}=yield this.client.from("user_profiles").select("id").eq("user_id",e.id).single();if(l&&"PGRST116"!==l.code)return{success:!1,error:"Failed to check existing user profile"};if(n)return{success:!0};const o={user_id:e.id,full_name:(null==(s=e.user_metadata)?void 0:s.full_name)||(null==(a=e.user_metadata)?void 0:a.name)||(null==(t=e.email)?void 0:t.split("@")[0]),avatar_url:(null==(r=e.user_metadata)?void 0:r.avatar_url)||(null==(i=e.user_metadata)?void 0:i.picture)},{error:c}=yield this.client.from("user_profiles").insert([o]);if(c)return{success:!1,error:"Failed to create user profile"};const{data:d,error:u}=yield this.client.from("user_roles").select("id").eq("user_id",e.id).single();if(u&&"PGRST116"!==u.code)return{success:!1,error:"Failed to check existing user role"};if(!d){const{error:s}=yield this.client.from("user_roles").insert([{user_id:e.id,role:"user"}]);if(s)return{success:!1,error:"Failed to create user role"}}return{success:!0}}catch(n){return{success:!1,error:"Unexpected error during user registration"}}})}isAdmin(e){return u(this,null,function*(){try{const{data:s,error:a}=yield this.client.from("user_roles").select("role").eq("user_id",e).maybeSingle();return!a&&"admin"===(null==s?void 0:s.role)}catch(s){return!1}})}getUserProfile(e){return u(this,null,function*(){try{const{data:s,error:a}=yield this.client.from("user_profiles").select("*").eq("user_id",e).single();return{data:s,error:a}}catch(s){return{data:null,error:s}}})}updateUserProfile(e,s){return u(this,null,function*(){try{const{data:a}=yield this.client.from("user_profiles").select("id").eq("user_id",e).single();if(a){const{data:a,error:t}=yield this.client.from("user_profiles").update(c(o({},s),{updated_at:(new Date).toISOString()})).eq("user_id",e).select().single();return{data:a,error:t}}{const{data:a,error:t}=yield this.client.from("user_profiles").insert(c(o({user_id:e},s),{updated_at:(new Date).toISOString()})).select().single();return{data:a,error:t}}}catch(a){return{data:null,error:a}}})}updateUserMetadata(e){return u(this,null,function*(){try{const{data:s,error:a}=yield this.client.auth.updateUser({data:e});return{data:s,error:a}}catch(s){return{data:null,error:s}}})}getClient(){return this.client}checkEmailExists(e){return u(this,null,function*(){try{const{data:s,error:a}=yield this.client.rpc("check_email_exists",{email_input:e});return!a&&!!s}catch(s){return!1}})}isSessionValid(e){if(!e)return!1;const s=(new Date).getTime()/1e3;return!!e.expires_at&&e.expires_at>s}shouldRefreshSession(e){if(!e||!e.expires_at)return!1;const s=(new Date).getTime()/1e3;return e.expires_at-s<300}getExtendedSessionInfo(){try{const e=localStorage.getItem("extended_session");if(!e)return{isExtended:!1,expiry:null};const s=JSON.parse(e),a=new Date(s.expiry),t=a>new Date;return{isExtended:t,expiry:t?a:null}}catch(e){return{isExtended:!1,expiry:null}}}clearExtendedSession(){try{localStorage.removeItem("extended_session")}catch(e){}}getOrientations(e){return u(this,null,function*(){try{let s=this.client.from("orientations").select("*").order("label",{ascending:!0});e&&"both"!==e&&(s=s.or(`applicable_for.eq.${e},applicable_for.eq.both`));const{data:a,error:t}=yield s;return{data:a||[],error:t}}catch(s){return{data:[],error:s}}})}getTodaysMeals(e){return u(this,null,function*(){try{const s=(new Date).toISOString().split("T")[0],{data:a,error:t}=yield this.client.from("meals").select("*").eq("user_id",e).eq("date",s).order("time",{ascending:!0});return{data:a||[],error:t}}catch(s){return{data:[],error:s}}})}getMealsByDateRange(e,s,a){return u(this,null,function*(){try{const{data:t,error:r}=yield this.client.from("meals").select("*").eq("user_id",e).gte("date",s).lte("date",a).order("date",{ascending:!1}).order("time",{ascending:!0});return{data:t||[],error:r}}catch(t){return{data:[],error:t}}})}addMeal(e){return u(this,null,function*(){try{const{data:s,error:a}=yield this.client.from("meals").insert([e]).select().single();return{data:s,error:a}}catch(s){return{data:null,error:s}}})}updateMeal(e,s){return u(this,null,function*(){try{const{data:a,error:t}=yield this.client.from("meals").update(c(o({},s),{updated_at:(new Date).toISOString()})).eq("id",e).select().single();return{data:a,error:t}}catch(a){return{data:null,error:a}}})}deleteMeal(e){return u(this,null,function*(){try{const{error:s}=yield this.client.from("meals").delete().eq("id",e);return{error:s}}catch(s){return{error:s}}})}checkCustomMealExists(e,s,a,t,r,i){return u(this,null,function*(){try{const{data:n,error:l}=yield this.client.from("custom_meals").select("id").eq("submitted_by",e).eq("name",s).eq("calories_per_100g",a).eq("protein_g",t).eq("carbohydrates_g",r).eq("fats_g",i).maybeSingle();return{exists:!!n,error:l}}catch(n){return{exists:!1,error:n}}})}addCustomMeal(e){return u(this,null,function*(){try{const{data:s,error:a}=yield this.client.from("custom_meals").insert([e]).select().single();return{data:s,error:a}}catch(s){return{data:null,error:s}}})}searchFoods(e,s=5){return u(this,null,function*(){try{const{data:a,error:t}=yield this.client.from("foods").select("id, name, calories_per_100g, protein_g, carbohydrates_g, fats_g, fiber_g, free_sugar_g, sodium_mg").ilike("name",`%${e}%`).limit(s).order("name",{ascending:!0});return{data:a||[],error:t}}catch(a){return{data:[],error:a}}})}searchCustomMeals(e,s,a=5){return u(this,null,function*(){try{const{data:t,error:r}=yield this.client.from("custom_meals").select("id, name, calories_per_100g, protein_g, carbohydrates_g, fats_g, fiber_g, free_sugar_g, sodium_mg").eq("submitted_by",e).eq("status","approved").ilike("name",`%${s}%`).limit(a).order("name",{ascending:!0});return{data:t||[],error:r}}catch(t){return{data:[],error:t}}})}searchFoodsAndCustomMeals(e,s,a=5){return u(this,null,function*(){try{const[t,r]=yield Promise.all([this.searchFoods(s,Math.ceil(a/2)),this.searchCustomMeals(e,s,Math.ceil(a/2))]);if(t.error&&r.error)return{data:[],error:t.error};const i=[...(t.data||[]).map(e=>c(o({},e),{source:"foods"})),...(r.data||[]).map(e=>c(o({},e),{source:"custom_meals"}))];return{data:i.sort((e,s)=>e.name.localeCompare(s.name)).slice(0,a),error:null}}catch(t){return{data:[],error:t}}})}handleOAuthCallback(){return u(this,null,function*(){try{const{data:e,error:s}=yield this.client.auth.getSession();return s?{success:!1,error:s.message}:e.session?(window.opener&&window.opener!==window&&(window.opener.postMessage({type:"SUPABASE_AUTH_SUCCESS",session:e.session},window.location.origin),window.close()),{success:!0}):(window.opener&&window.opener!==window&&(window.opener.postMessage({type:"SUPABASE_AUTH_ERROR",error:{message:"No session found after OAuth callback"}},window.location.origin),window.close()),{success:!1,error:"No session found after OAuth callback"})}catch(e){return window.opener&&window.opener!==window&&(window.opener.postMessage({type:"SUPABASE_AUTH_ERROR",error:{message:"Failed to handle OAuth callback"}},window.location.origin),window.close()),{success:!1,error:"Failed to handle OAuth callback"}}})}},y=class e{constructor(){d(this,"notifications",[]),d(this,"subscribers",new Set),d(this,"nextId",1)}static getInstance(){return e.instance||(e.instance=new e),e.instance}show(e,s="info",a=5e3){const t={id:"notification-"+this.nextId++,message:e,type:s,duration:a,timestamp:Date.now()};return this.notifications.push(t),this.notify(),a>0&&setTimeout(()=>{this.remove(t.id)},a),t.id}remove(e){this.notifications=this.notifications.filter(s=>s.id!==e),this.notify()}clear(){this.notifications=[],this.notify()}subscribe(e){return this.subscribers.add(e),e(this.notifications),()=>this.subscribers.delete(e)}notify(){this.subscribers.forEach(e=>e([...this.notifications]))}success(e,s=5e3){return this.show(e,"success",s)}error(e,s=8e3){return this.show(e,"error",s)}info(e,s=5e3){return this.show(e,"info",s)}warning(e,s=6e3){return this.show(e,"warning",s)}};d(y,"instance");let w=y;const E=()=>{const s=h.useRef(!0),a=h.useRef(w.getInstance()),[t,r]=h.useState({user:null,session:null,loading:!0,isAuthenticated:!1,isAdmin:!1,authLoading:!1});h.useEffect(()=>(s.current=!0,u(e,null,function*(){try{const{session:e,error:a}=yield N.getSession();if(s.current)if(null==e?void 0:e.user){const s=yield N.isAdmin(e.user.id);r({user:e.user,session:e,loading:!1,isAuthenticated:!0,isAdmin:s,authLoading:!1})}else r({user:null,session:null,loading:!1,isAuthenticated:!1,isAdmin:!1,authLoading:!1})}catch(e){s.current&&r({user:null,session:null,loading:!1,isAuthenticated:!1,isAdmin:!1,authLoading:!1})}}),()=>{s.current=!1}),[]),h.useEffect(()=>N.onAuthStateChange((t,i)=>u(e,null,function*(){var n,l,o,c,d;if(s.current)if(null==i?void 0:i.user){const h=yield N.isAdmin(i.user.id);if(s.current&&(r({user:i.user,session:i,loading:!1,isAuthenticated:!0,isAdmin:h,authLoading:!1}),"SIGNED_IN"===t)){const s=(null==(n=i.user.user_metadata)?void 0:n.full_name)||(null==(l=i.user.user_metadata)?void 0:l.name)||(null==(o=i.user.email)?void 0:o.split("@")[0])||"User";"google"===(null==(c=i.user.app_metadata)?void 0:c.provider)&&a.current.show(`Welcome back, ${s}!`,"success",3e3),d=i.user.id,u(e,null,function*(){try{const{data:e}=yield N.getUserProfile(d);!(e&&e.height_cm&&e.weight_kg&&e.activity_level)&&"/profile"!==window.location.pathname&&setTimeout(()=>{window.location.href="/profile"},1e3)}catch(e){"/profile"!==window.location.pathname&&setTimeout(()=>{window.location.href="/profile"},1e3)}})}}else s.current&&(r({user:null,session:null,loading:!1,isAuthenticated:!1,isAdmin:!1,authLoading:!1}),"SIGNED_OUT"===t&&a.current.show("You have been signed out","info",2e3))})),[]);const i=h.useCallback(()=>u(e,null,function*(){try{s.current&&r(e=>c(o({},e),{authLoading:!0}));const{data:e,error:t}=yield N.signInWithGooglePopup();return t?(s.current&&r(e=>c(o({},e),{authLoading:!1})),a.current.show(t.message||"Google sign in failed","error",5e3),{success:!1,error:t}):e?{success:!0,data:e}:(s.current&&r(e=>c(o({},e),{authLoading:!1})),{success:!1,error:{message:"Authentication was cancelled"}})}catch(e){s.current&&r(e=>c(o({},e),{authLoading:!1}));const t=(null==e?void 0:e.message)||"Google sign in failed";return a.current.show(t,"error",5e3),{success:!1,error:{message:t}}}}),[]),n=h.useCallback((s,t,r=!1)=>u(e,null,function*(){try{const{data:e,error:i}=yield N.signInWithEmail(s,t,r);return i?(a.current.show(i.message||"Sign in failed","error",5e3),{success:!1,error:i}):{success:!0,data:e}}catch(e){const s=(null==e?void 0:e.message)||"Sign in failed";return a.current.show(s,"error",5e3),{success:!1,error:{message:s}}}}),[]),l=h.useCallback((s,t)=>u(e,null,function*(){try{const{data:e,error:r}=yield N.signUpWithEmail(s,t);return r?(a.current.show(r.message||"Sign up failed","error",5e3),{success:!1,error:r}):(a.current.show("Account created! Please check your email to verify.","success",7e3),{success:!0,data:e})}catch(e){const s=(null==e?void 0:e.message)||"Sign up failed";return a.current.show(s,"error",5e3),{success:!1,error:{message:s}}}}),[]),d=h.useCallback(()=>u(e,null,function*(){try{const{error:e}=yield N.signOut();return e?(a.current.show(e.message||"Sign out failed","error",5e3),{success:!1,error:e}):{success:!0}}catch(e){const s=(null==e?void 0:e.message)||"Sign out failed";return a.current.show(s,"error",5e3),{success:!1,error:{message:s}}}}),[]),m=h.useCallback(()=>u(e,null,function*(){try{const e=yield N.handleOAuthCallback();return e.success?a.current.show("Successfully signed in with Google!","success",3e3):a.current.show(e.error||"OAuth authentication failed","error",5e3),e}catch(e){const s=(null==e?void 0:e.message)||"OAuth callback failed";return a.current.show(s,"error",5e3),{success:!1,error:s}}}),[]);return c(o({},t),{signInWithGoogle:i,signInWithEmail:n,signUpWithEmail:l,signOut:d,handleOAuthCallback:m})},k=({className:e="",position:s="fixed-top",onNavigate:t,brand:r="Health Tracker",brandHref:i="#home"})=>{const n=h.useRef(null),l=h.useRef(t),o=h.useRef(),{isAuthenticated:c,loading:d}=E();l.current=t,o.current||(o.current=a.getInstance());const[u,_]=h.useState(()=>{var e,s;return null!=(s=null==(e=o.current)?void 0:e.getConfig())?s:{items:[]}}),[g,p]=h.useState(()=>{var e;return{isOpen:!1,activeItem:(null==(e=o.current)?void 0:e.getState().activeItem)||"home",hoveredItem:null,focusedItem:null,keyboardMode:!1}}),[v,f]=h.useState(!1),x=h.useMemo(()=>"undefined"!=typeof window&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,[]);h.useEffect(()=>{const e=()=>{f(window.scrollY>50)};return window.addEventListener("scroll",e,{passive:!0}),()=>window.removeEventListener("scroll",e)},[]),h.useEffect(()=>{const e=o.current;n.current&&e.setElement(n.current);const s=e.subscribe(p);return _(e.getConfig()),d||e.updateAuthState(c),()=>{s()}},[c,d]);const b=h.useCallback(e=>{var s;null==(s=l.current)||s.call(l,e),o.current.navigate(e)},[]),j=h.useCallback((e,s)=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),b(s))},[b]),N=h.useCallback(e=>{o.current.setHoveredItem(e)},[]),y=h.useCallback(()=>{o.current.setHoveredItem(null)},[]),w=h.useCallback(()=>{if(i.startsWith("#")){const e=u.items.find(e=>e.href===i);e&&b(e.id)}else window.location.href=i},[i,u.items,b]),k=h.useCallback(e=>({home:"üè†","add-meals":"üçΩÔ∏è",journal:"üìî"}[e]||"üìÑ"),[]),I=h.useMemo(()=>["modern-nav",`modern-nav--${s}`,e,g.keyboardMode&&"modern-nav--keyboard",x&&"modern-nav--reduced-motion",v&&"modern-nav--scrolled"].filter(Boolean).join(" "),[s,e,g.keyboardMode,x,v]);return m.jsx("nav",{ref:n,className:I,"aria-label":"Main navigation",role:"navigation",children:m.jsxs("div",{className:"modern-nav__container",children:[m.jsx("button",{className:"modern-nav__brand",onClick:w,"aria-label":`Go to ${r} home page`,type:"button",children:r}),m.jsx("ul",{className:"modern-nav__list",role:"menubar",children:u.items.map(e=>{const s=g.activeItem===e.id,a=["modern-nav__item",s&&"modern-nav__item--active",g.hoveredItem===e.id&&"modern-nav__item--hovered",g.focusedItem===e.id&&"modern-nav__item--focused"].filter(Boolean).join(" ");return m.jsx("li",{className:a,children:m.jsxs("button",{className:"modern-nav__link","data-nav-item":e.id,onClick:()=>b(e.id),onKeyDown:s=>j(s,e.id),onMouseEnter:()=>N(e.id),onMouseLeave:y,role:"menuitem","aria-current":s?"page":void 0,"aria-label":e.ariaLabel||`Navigate to ${e.label}`,type:"button",children:[m.jsx("span",{className:"modern-nav__icon",children:k(e.id)}),m.jsx("span",{className:"modern-nav__label",children:e.label})]})},e.id)})}),m.jsx("div",{className:"modern-nav__right"})]})})},I=({onComplete:e,duration:s=800,minDisplayTime:a=600,className:t=""})=>{const[r,i]=h.useState(0),[n,l]=h.useState(!0),[o,c]=h.useState(!1),[d,u]=h.useState("loading"),_=h.useMemo(()=>["Initializing Health Hub...","Loading Wellness Modules...","Syncing Health Data...","Preparing Your Dashboard...","Ready to Track Your Journey!"],[]),[g,p]=h.useState(_[0]);h.useEffect(()=>{const t=Date.now();let r,n=0;const o=()=>{const d=Date.now()-t,h=Math.min(d/s*100,100);i(h);const m=Math.floor(h/100*(_.length-1));if(m!==n&&m<_.length&&(n=m,p(_[n])),h<100)r=requestAnimationFrame(o);else{u("complete"),p("Welcome to Your Health Journey!");const s=Date.now()-t,r=Math.max(0,a-s);setTimeout(()=>{u("exiting"),c(!0),setTimeout(()=>{l(!1),null==e||e()},300)},r)}};return r=requestAnimationFrame(o),()=>{r&&cancelAnimationFrame(r)}},[s,a,e,_]);const v=h.useMemo(()=>["preloader",`preloader--${d}`,o&&"preloader--exiting",t].filter(Boolean).join(" "),[d,o,t]);return n?m.jsxs("div",{className:v,children:[m.jsxs("div",{className:"preloader__bg",children:[m.jsx("div",{className:"preloader__grid"}),m.jsxs("div",{className:"preloader__orbs",children:[m.jsx("div",{className:"preloader__orb preloader__orb--1"}),m.jsx("div",{className:"preloader__orb preloader__orb--2"}),m.jsx("div",{className:"preloader__orb preloader__orb--3"})]})]}),m.jsxs("div",{className:"preloader__content",children:[m.jsx("div",{className:"preloader__brand",children:m.jsxs("div",{className:"preloader__logo",children:[m.jsx("div",{className:"preloader__logo-icon",children:m.jsxs("div",{className:"preloader__health-icon",children:[m.jsx("div",{className:"preloader__heart",children:m.jsx("div",{className:"preloader__heart-beat"})}),m.jsxs("div",{className:"preloader__pulse-rings",children:[m.jsx("div",{className:"preloader__pulse-ring preloader__pulse-ring--1"}),m.jsx("div",{className:"preloader__pulse-ring preloader__pulse-ring--2"}),m.jsx("div",{className:"preloader__pulse-ring preloader__pulse-ring--3"})]})]})}),m.jsxs("div",{className:"preloader__brand-text",children:["Health",m.jsx("span",{className:"preloader__brand-accent",children:"Tracker"})]})]})}),m.jsx("div",{className:"preloader__status",children:m.jsx("div",{className:"preloader__message",children:g})}),m.jsxs("div",{className:"preloader__progress-section",children:[m.jsxs("div",{className:"preloader__progress-ring",children:[m.jsxs("svg",{className:"preloader__ring-svg",viewBox:"0 0 120 120",children:[m.jsx("circle",{className:"preloader__ring-bg",cx:"60",cy:"60",r:"50",fill:"none",strokeWidth:"4"}),m.jsx("circle",{className:"preloader__ring-progress",cx:"60",cy:"60",r:"50",fill:"none",strokeWidth:"4",style:{strokeDasharray:314,strokeDashoffset:314-314*r/100}})]}),m.jsxs("div",{className:"preloader__percentage",children:[Math.round(r),"%"]})]}),m.jsxs("div",{className:"preloader__pulse-bars",children:[m.jsx("div",{className:"preloader__bar"}),m.jsx("div",{className:"preloader__bar"}),m.jsx("div",{className:"preloader__bar"}),m.jsx("div",{className:"preloader__bar"}),m.jsx("div",{className:"preloader__bar"})]})]})]}),"complete"===d&&m.jsx("div",{className:"preloader__success",children:m.jsx("div",{className:"preloader__success-ring",children:m.jsxs("svg",{viewBox:"0 0 52 52",className:"preloader__success-svg",children:[m.jsx("circle",{className:"preloader__success-circle",cx:"26",cy:"26",r:"20",fill:"none"}),m.jsx("path",{className:"preloader__success-check",fill:"none",d:"M14,27 L22,35 L38,19"})]})})})]}):null};class S{constructor(e={}){d(this,"state"),d(this,"config"),d(this,"subscribers"),d(this,"intersectionObserver"),this.config=o({enableLazyLoading:!0,imageFormats:["webp","jpg","png"],seoEnabled:!0},e),this.state=this.getInitialState(),this.subscribers=new Set,this.intersectionObserver=null,this.init()}getInitialState(){return{isLoaded:!1,currentSection:"hero",lazyImages:new Map,seoData:{}}}init(){this.config.enableLazyLoading&&this.setupLazyLoading(),this.setState({isLoaded:!0})}setupLazyLoading(){"IntersectionObserver"in window&&(this.intersectionObserver=new IntersectionObserver(e=>{e.forEach(e=>{var s;if(e.isIntersecting){const a=e.target;this.loadImage(a),null==(s=this.intersectionObserver)||s.unobserve(a)}})},{rootMargin:"50px"}))}loadImage(e){const s=e.dataset.src;s&&(e.src=s,e.classList.add("loaded"),this.updateImageState(e.dataset.id||s,!0))}updateImageState(e,s){const a=new Map(this.state.lazyImages);a.set(e,s),this.setState({lazyImages:a})}observeImage(e){this.intersectionObserver&&e&&this.intersectionObserver.observe(e)}setCurrentSection(e){e!==this.state.currentSection&&this.setState({currentSection:e})}setSeoData(e){this.setState({seoData:o(o({},this.state.seoData),e)})}getState(){return o({},this.state)}setState(e){this.state=o(o({},this.state),e),this.notify()}subscribe(e){return this.subscribers.add(e),()=>this.subscribers.delete(e)}notify(){this.subscribers.forEach(e=>e(this.state))}destroy(){this.intersectionObserver&&this.intersectionObserver.disconnect(),this.subscribers.clear()}}let C=null;const M=()=>{const[e,s]=h.useState({isLoaded:!1,currentSection:"hero",lazyImages:new Map,seoData:{}});h.useEffect(()=>{C||(C=new S);const e=C.subscribe(s);return s(C.getState()),()=>{e()}},[]);const a=h.useCallback(e=>{null==C||C.setCurrentSection(e)},[]),t=h.useCallback(e=>{null==C||C.setSeoData(e)},[]),r=h.useCallback(e=>{null==C||C.observeImage(e)},[]);return c(o({},e),{setCurrentSection:a,setSeoData:t,observeImage:r})};class T{static calculateBMR(e){const{height_cm:s,weight_kg:a,age:t=30,gender:r="male"}=e;return"male"===r?5*a+6.25*s-5*t+5:5*a+6.25*s-5*t-161}static calculateTDEE(e,s){const a=this.ACTIVITY_MULTIPLIERS[s]||1.55;return Math.round(e*a)}static convertDurationToWeeks(e,s){switch(s){case"days":return e/7;case"weeks":default:return e;case"months":return 4.33*e}}static calculateTargetCalories(e){const s=this.calculateBMR(e),a=this.calculateTDEE(s,e.activity_level),{weight_kg:t,target_weight_kg:r,target_duration:i,target_duration_unit:n}=e,l=r-t,o=this.convertDurationToWeeks(i,n),c=o>0?l/o:0,d=c*this.CALORIES_PER_KG/7;let u=a+d;const h="male"===e.gender?1300:1100;return u<h&&(u=h),{bmr:Math.round(s),tdee:a,targetCalories:Math.round(u),weightChangePerWeek:Math.round(100*c)/100,dailyCalorieDeficit:Math.round(d)}}static getCalorieRecommendation(e){const{weightChangePerWeek:s,targetCalories:a,tdee:t}=e;return s>0?{message:`To gain ${Math.abs(s)}kg per week, aim for ${a} calories daily`,type:"gain",weeklyGoal:`+${Math.abs(s)}kg per week`}:s<0?{message:`To lose ${Math.abs(s)}kg per week, aim for ${a} calories daily`,type:"loss",weeklyGoal:`-${Math.abs(s)}kg per week`}:{message:`To maintain your current weight, aim for ${t} calories daily`,type:"maintain",weeklyGoal:"Maintain current weight"}}static getMacroRatios(e){if(!e)return{protein:.3,carbs:.45,fat:.25};switch(e){case"energy_focused":case"energetic_bulking":return{protein:.2,carbs:.4,fat:.4};case"lean_muscle_building":case"muscle_preservation":return{protein:.3,carbs:.35,fat:.35};default:return{protein:.3,carbs:.45,fat:.25}}}static validateProfile(e){const s=[];return(!e.height_cm||e.height_cm<=0)&&s.push("Height is required"),(!e.weight_kg||e.weight_kg<=0)&&s.push("Current weight is required"),(!e.target_weight_kg||e.target_weight_kg<=0)&&s.push("Target weight is required"),(!e.target_duration||e.target_duration<=0)&&s.push("Target duration is required"),{isValid:0===s.length,errors:s}}}d(T,"ACTIVITY_MULTIPLIERS",{sedentary:1.05,light:1.2,moderate:1.375,active:1.55,very_active:1.725}),d(T,"CALORIES_PER_KG",7700);const A=()=>{const{user:s}=E(),[a,t]=h.useState(null),[r,i]=h.useState([]),[n,l]=h.useState(!0),o=()=>u(e,null,function*(){if(s)try{const{data:a}=yield N.getUserProfile(s.id);let r={target_weight_kg:0,target_duration:0,target_duration_unit:"weeks",orientation:""};try{const e=localStorage.getItem(`profile_extra_${s.id}`);e&&(r=JSON.parse(e))}catch(e){}if(a&&a.height_cm&&a.weight_kg&&r.target_weight_kg&&r.target_duration){const e={height_cm:a.height_cm,weight_kg:a.weight_kg,target_weight_kg:r.target_weight_kg,target_duration:r.target_duration,target_duration_unit:r.target_duration_unit,activity_level:a.activity_level||"moderate",age:30,gender:"male",orientation:r.orientation||""};t(e)}else t(null)}catch(a){t(null)}finally{l(!1)}else l(!1)}),c=()=>u(e,null,function*(){if(s)try{const{data:e,error:a}=yield N.getTodaysMeals(s.id);if(a)return void i([]);const t=e.map(e=>({id:e.id,name:e.meal_name,calories:e.total_calories,protein:e.total_protein_g,carbs:e.total_carbs_g,fat:e.total_fat_g,mealType:e.meal_type,time:e.time?new Date(`1970-01-01T${e.time}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):"Not specified"}));i(t)}catch(e){i([])}else i([])});return h.useEffect(()=>{o(),c()},[s]),{calorieData:h.useMemo(()=>{if(!a)return{targetCalories:0,currentCalories:0,remainingCalories:0,percentageConsumed:0,hasProfile:!1,isLoading:n};if(!T.validateProfile(a).isValid)return{targetCalories:0,currentCalories:0,remainingCalories:0,percentageConsumed:0,hasProfile:!1,isLoading:n};const e=T.calculateTargetCalories(a),s=T.getCalorieRecommendation(e),t=r.reduce((e,s)=>e+s.calories,0),i=e.targetCalories-t,l=e.targetCalories>0?Math.round(t/e.targetCalories*100):0;return{targetCalories:e.targetCalories,currentCalories:t,remainingCalories:i,percentageConsumed:l,calculation:e,recommendation:s,hasProfile:!0,isLoading:n}},[a,r,n]),todaysMeals:r,profile:a,refreshData:()=>u(e,null,function*(){yield o(),yield c()})}},P=({title:e="Your Health Journey Starts Here",subtitle:s="Track nutrition, monitor wellness, achieve your goals",description:a="Take control of your health with comprehensive meal tracking, nutrition insights, and personalized wellness monitoring.",primaryCtaText:t="Sign In to Get Started",secondaryCtaText:r="",onPrimaryCtaClick:i,onSecondaryCtaClick:n,showParticles:l=!1,showAchievements:d=!1,autoScroll:u=!1})=>{var _,g,p,v,f,x,b,j,N,y;const w=h.useRef(null),k=h.useRef(null);h.useRef(null),h.useRef();const[I,S]=h.useState(!1),[C,P]=h.useState({x:0,y:0}),[L,O]=h.useState(!1),[R,D]=h.useState(!1),{setCurrentSection:U}=M(),{isAuthenticated:F,user:z}=E(),{calorieData:V,todaysMeals:B,profile:G}=A(),H=h.useMemo(()=>{const e=B.reduce((e,s)=>({calories:e.calories+s.calories,protein:e.protein+s.protein,carbs:e.carbs+s.carbs,fat:e.fat+s.fat}),{calories:0,protein:0,carbs:0,fat:0}),s=T.getMacroRatios(null==G?void 0:G.orientation);return c(o({},e),{goalCalories:V.targetCalories,goalProtein:Math.round(V.targetCalories*s.protein/4),goalCarbs:Math.round(V.targetCalories*s.carbs/4),goalFat:Math.round(V.targetCalories*s.fat/9)})},[B,V.targetCalories,null==G?void 0:G.orientation]);h.useMemo(()=>l?Array.from({length:30},(e,s)=>({id:s,delay:4*Math.random(),duration:4+3*Math.random(),x:100*Math.random(),y:100*Math.random(),size:2+3*Math.random()})):[],[l]),h.useEffect(()=>{const e=window.matchMedia("(prefers-reduced-motion: reduce)");D(e.matches);const s=e=>{D(e.matches)};return e.addEventListener("change",s),()=>e.removeEventListener("change",s)},[]),h.useEffect(()=>{const e=new IntersectionObserver(([e])=>{var s,a;e.isIntersecting&&(U("hero"),S(!0),R||(null==(s=w.current)||s.classList.add("hero--animate-in"),null==(a=k.current)||a.classList.add("hero__content--stagger")))},{threshold:.3,rootMargin:"0px 0px -10% 0px"});return w.current&&e.observe(w.current),()=>e.disconnect()},[U,R]);const $=h.useCallback(e=>{if(!w.current||R)return;const s=w.current.getBoundingClientRect(),a={x:(e.clientX-s.left)/s.width*100,y:(e.clientY-s.top)/s.height*100};P(a)},[R]);h.useEffect(()=>{if(!w.current||R)return;let e;const s=s=>{clearTimeout(e),e=setTimeout(()=>$(s),16)},a=w.current;return a.addEventListener("mousemove",s),a.addEventListener("mouseenter",()=>O(!0)),a.addEventListener("mouseleave",()=>O(!1)),()=>{a.removeEventListener("mousemove",s),a.removeEventListener("mouseenter",()=>O(!0)),a.removeEventListener("mouseleave",()=>O(!1)),clearTimeout(e)}},[$,R]);const q=h.useCallback(()=>{if(i)i();else{const e=document.getElementById("contact");null==e||e.scrollIntoView({behavior:R?"auto":"smooth",block:"start"})}},[i,R]);return h.useCallback(()=>{if(n)n();else{const e=document.getElementById("projects");null==e||e.scrollIntoView({behavior:R?"auto":"smooth",block:"start"})}},[n,R]),h.useCallback(e=>{if(("Enter"===e.key||" "===e.key)&&(e.preventDefault(),u)){const e=document.getElementById("about");null==e||e.scrollIntoView({behavior:R?"auto":"smooth",block:"start"})}},[u,R]),h.useCallback(()=>{const e=document.getElementById("about");null==e||e.scrollIntoView({behavior:R?"auto":"smooth",block:"start"})},[R]),m.jsx("section",{ref:w,id:"hero",className:"hero","aria-label":"Hero section - Health Tracker",role:"banner",children:m.jsx("div",{className:"hero__container",children:m.jsx("div",{className:"hero__content-wrapper",ref:k,children:F?m.jsxs("div",{className:"hero__dashboard-content",children:[m.jsx("div",{className:"hero__welcome",children:m.jsxs("p",{className:"hero__dashboard-greeting",children:["Welcome back, ",(null==(_=null==z?void 0:z.user_metadata)?void 0:_.full_name)||(null==(g=null==z?void 0:z.email)?void 0:g.split("@")[0])||"there","! üëã"]})}),m.jsxs("div",{className:"hero__nutrition-dashboard",children:[m.jsxs("div",{className:"hero__calorie-progress-section",children:[m.jsxs("div",{className:"hero__calorie-status",children:[m.jsxs("div",{className:"hero__calorie-current",children:[m.jsx("span",{className:"hero__calorie-number",children:H.calories}),m.jsx("span",{className:"hero__calorie-unit",children:"cal"})]}),m.jsx("div",{className:"hero__calorie-divider",children:"of"}),m.jsxs("div",{className:"hero__calorie-target",children:[m.jsx("span",{className:"hero__calorie-number",children:H.goalCalories}),m.jsx("span",{className:"hero__calorie-unit",children:"cal"})]})]}),m.jsxs("div",{className:"hero__progress-container",children:[m.jsxs("div",{className:"hero__progress-bar",children:[m.jsx("div",{className:"hero__progress-fill "+(H.calories>H.goalCalories?"hero__progress-fill--over":""),style:{width:`${Math.min(H.calories/H.goalCalories*100,100)}%`}}),H.calories>H.goalCalories&&m.jsx("div",{className:"hero__progress-overflow",style:{width:`${Math.min((H.calories-H.goalCalories)/H.goalCalories*100,50)}%`}})]}),m.jsxs("div",{className:"hero__progress-labels",children:[m.jsx("span",{className:"hero__progress-label hero__progress-label--start",children:"0"}),m.jsx("span",{className:"hero__progress-label hero__progress-label--target",children:"Target"}),H.calories>H.goalCalories&&m.jsxs("span",{className:"hero__progress-label hero__progress-label--over",children:["+",H.calories-H.goalCalories]})]})]}),m.jsxs("div",{className:"hero__calorie-status-message "+(H.calories<.8*H.goalCalories?"hero__calorie-status--low":H.calories>1.1*H.goalCalories?"hero__calorie-status--high":"hero__calorie-status--good"),children:[H.calories<.8*H.goalCalories&&m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"hero__status-icon",children:"üü°"}),m.jsxs("span",{children:["Need ",H.goalCalories-H.calories," more calories"]})]}),H.calories>1.1*H.goalCalories&&m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"hero__status-icon",children:"üî¥"}),m.jsxs("span",{children:[H.calories-H.goalCalories," calories over target"]})]}),H.calories>=.8*H.goalCalories&&H.calories<=1.1*H.goalCalories&&m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"hero__status-icon",children:"üü¢"}),m.jsx("span",{children:"On track with your calorie goals!"})]})]})]}),m.jsxs("div",{className:"hero__macro-cards",children:[m.jsxs("div",{className:"hero__macro-card hero__macro-card--protein",children:[m.jsxs("div",{className:"hero__macro-header",children:[m.jsx("span",{className:"hero__macro-icon",children:"üí™"}),m.jsx("span",{className:"hero__macro-name",children:"Protein"})]}),m.jsxs("div",{className:"hero__macro-values",children:[m.jsxs("span",{className:"hero__macro-current",children:[H.protein,"g"]}),m.jsxs("span",{className:"hero__macro-target",children:["/ ",H.goalProtein,"g"]})]}),m.jsx("div",{className:"hero__macro-progress",children:m.jsx("div",{className:"hero__macro-progress-bar hero__macro-progress-bar--protein",style:{width:`${Math.min(H.protein/H.goalProtein*100,100)}%`}})}),m.jsxs("div",{className:"hero__macro-percentage",children:[Math.round(H.protein/H.goalProtein*100),"%"]})]}),m.jsxs("div",{className:"hero__macro-card hero__macro-card--carbs",children:[m.jsxs("div",{className:"hero__macro-header",children:[m.jsx("span",{className:"hero__macro-icon",children:"üçû"}),m.jsx("span",{className:"hero__macro-name",children:"Carbs"})]}),m.jsxs("div",{className:"hero__macro-values",children:[m.jsxs("span",{className:"hero__macro-current",children:[H.carbs,"g"]}),m.jsxs("span",{className:"hero__macro-target",children:["/ ",H.goalCarbs,"g"]})]}),m.jsx("div",{className:"hero__macro-progress",children:m.jsx("div",{className:"hero__macro-progress-bar hero__macro-progress-bar--carbs",style:{width:`${Math.min(H.carbs/H.goalCarbs*100,100)}%`}})}),m.jsxs("div",{className:"hero__macro-percentage",children:[Math.round(H.carbs/H.goalCarbs*100),"%"]})]}),m.jsxs("div",{className:"hero__macro-card hero__macro-card--fat",children:[m.jsxs("div",{className:"hero__macro-header",children:[m.jsx("span",{className:"hero__macro-icon",children:"ü•ë"}),m.jsx("span",{className:"hero__macro-name",children:"Fat"})]}),m.jsxs("div",{className:"hero__macro-values",children:[m.jsxs("span",{className:"hero__macro-current",children:[H.fat,"g"]}),m.jsxs("span",{className:"hero__macro-target",children:["/ ",H.goalFat,"g"]})]}),m.jsx("div",{className:"hero__macro-progress",children:m.jsx("div",{className:"hero__macro-progress-bar hero__macro-progress-bar--fat",style:{width:`${Math.min(H.fat/H.goalFat*100,100)}%`}})}),m.jsxs("div",{className:"hero__macro-percentage",children:[Math.round(H.fat/H.goalFat*100),"%"]})]})]}),V.recommendation&&m.jsxs("div",{className:`hero__goal-recommendation hero__goal-recommendation--${V.recommendation.type}`,children:[m.jsxs("span",{className:"hero__recommendation-icon",children:["loss"===V.recommendation.type&&"üìâ","gain"===V.recommendation.type&&"üìà","maintain"===V.recommendation.type&&"‚öñÔ∏è"]}),m.jsx("span",{className:"hero__recommendation-text",children:V.recommendation.message})]}),m.jsxs("div",{className:"hero__meals-list",children:[m.jsx("h3",{className:"hero__meals-title",children:"Today's Meals"}),B.length>0?m.jsx("div",{className:"hero__meals-grid",children:B.map((e,s)=>m.jsxs("div",{className:"hero__meal-card hero__meal-card--compact",children:[m.jsxs("div",{className:"hero__meal-header",children:[m.jsxs("span",{className:"hero__meal-type",children:["breakfast"===e.mealType&&"üåÖ","lunch"===e.mealType&&"‚òÄÔ∏è","dinner"===e.mealType&&"üåô","snack"===e.mealType&&"üçø",e.mealType]}),m.jsxs("span",{className:"hero__meal-calories",children:[e.calories," cal"]})]}),m.jsx("div",{className:"hero__meal-name",children:e.name})]},e.id))}):m.jsxs("div",{className:"hero__no-meals",children:[m.jsx("p",{children:"No meals tracked today yet"}),m.jsx("button",{className:"hero__add-meal-btn",onClick:()=>null==i?void 0:i(),children:"Add Your First Meal"})]})]})]}),V.hasProfile?m.jsxs("div",{className:"hero__calorie-tracking",children:[m.jsxs("div",{className:"hero__metabolic-dashboard",children:[m.jsxs("div",{className:"hero__metabolic-header",children:[m.jsx("h4",{className:"hero__metabolic-title",children:"üìä Your Metabolic Profile"}),m.jsx("p",{className:"hero__metabolic-subtitle",children:"Understanding your body's energy needs"})]}),m.jsxs("div",{className:"hero__metabolic-visual",children:[m.jsxs("div",{className:"hero__energy-flow",children:[m.jsxs("div",{className:"hero__energy-node hero__energy-node--bmr",children:[m.jsx("div",{className:"hero__energy-pulse"}),m.jsx("div",{className:"hero__energy-icon",children:"üî•"}),m.jsx("div",{className:"hero__energy-label",children:"BMR"}),m.jsx("div",{className:"hero__energy-value",children:Math.round((null==(p=V.calculation)?void 0:p.bmr)||0)})]}),m.jsxs("div",{className:"hero__energy-arrow",children:[m.jsx("div",{className:"hero__energy-line"}),m.jsx("div",{className:"hero__energy-tip"}),m.jsxs("span",{className:"hero__energy-multiplier",children:["x ",(null==(v=V.calculation)?void 0:v.tdee)&&(null==(f=V.calculation)?void 0:f.bmr)?(V.calculation.tdee/V.calculation.bmr).toFixed(2):"1.0"]})]}),m.jsxs("div",{className:"hero__energy-node hero__energy-node--tdee",children:[m.jsx("div",{className:"hero__energy-pulse hero__energy-pulse--delayed"}),m.jsx("div",{className:"hero__energy-icon",children:"‚ö°"}),m.jsx("div",{className:"hero__energy-label",children:"TDEE"}),m.jsx("div",{className:"hero__energy-value",children:Math.round((null==(x=V.calculation)?void 0:x.tdee)||0)})]})]}),m.jsxs("div",{className:"hero__metabolic-insights",children:[m.jsxs("div",{className:"hero__insight-item",children:[m.jsx("span",{className:"hero__insight-icon",children:"üõå"}),m.jsxs("span",{className:"hero__insight-text",children:["At rest: ",Math.round((null==(b=V.calculation)?void 0:b.bmr)||0)," cal/day"]})]}),m.jsxs("div",{className:"hero__insight-item",children:[m.jsx("span",{className:"hero__insight-icon",children:"üèÉ‚Äç‚ôÇÔ∏è"}),m.jsxs("span",{className:"hero__insight-text",children:["Active: +",Math.round(((null==(j=V.calculation)?void 0:j.tdee)||0)-((null==(N=V.calculation)?void 0:N.bmr)||0))," cal/day"]})]}),m.jsxs("div",{className:"hero__insight-item",children:[m.jsx("span",{className:"hero__insight-icon",children:"üéØ"}),m.jsxs("span",{className:"hero__insight-text",children:["Target: ",V.targetCalories," cal/day"]})]})]})]})]}),m.jsxs("div",{className:"hero__calorie-overview",children:[m.jsxs("div",{className:"hero__calorie-card hero__calorie-card--target",children:[m.jsx("div",{className:"hero__calorie-label",children:"Target Calories"}),m.jsx("div",{className:"hero__calorie-value",children:V.targetCalories.toLocaleString()}),m.jsx("div",{className:"hero__calorie-subtext",children:null==(y=V.recommendation)?void 0:y.weeklyGoal})]}),m.jsxs("div",{className:"hero__calorie-card hero__calorie-card--current",children:[m.jsx("div",{className:"hero__calorie-label",children:"Current Intake"}),m.jsx("div",{className:"hero__calorie-value",children:V.currentCalories.toLocaleString()}),m.jsx("div",{className:"hero__calorie-subtext",children:V.remainingCalories>0?`${V.remainingCalories} remaining`:`${Math.abs(V.remainingCalories)} over`})]}),m.jsxs("div",{className:"hero__calorie-card hero__calorie-card--progress",children:[m.jsx("div",{className:"hero__calorie-label",children:"Progress"}),m.jsxs("div",{className:"hero__calorie-value",children:[V.percentageConsumed,"%"]}),m.jsx("div",{className:"hero__calorie-progress-bar",children:m.jsx("div",{className:"hero__calorie-progress-fill",style:{width:`${Math.min(V.percentageConsumed,100)}%`}})})]})]})]}):m.jsxs("div",{className:"hero__setup-profile",children:[m.jsx("div",{className:"hero__setup-icon",children:"‚öôÔ∏è"}),m.jsx("p",{className:"hero__setup-message",children:"Complete your profile to see personalized calorie targets"}),m.jsx("button",{className:"hero__setup-btn",onClick:()=>window.location.href="/profile",children:"Setup Profile"})]})]}):m.jsxs("div",{className:"hero__auth-content",children:[m.jsx("div",{className:"hero__auth-visual",children:m.jsx("div",{className:"hero__health-icon",children:"üçé"})}),m.jsxs("div",{className:"hero__auth-text",children:[m.jsx("h1",{className:"hero__title",children:e}),m.jsx("h2",{className:"hero__subtitle",children:s}),m.jsx("p",{className:"hero__description",children:a}),m.jsx("div",{className:"hero__cta-group",children:m.jsxs("button",{className:"hero__cta hero__cta--primary",onClick:q,"aria-label":"Sign in to start tracking your health",type:"button",children:[m.jsx("span",{className:"hero__cta-icon",children:"üîë"}),m.jsx("span",{className:"hero__cta-text",children:t})]})})]})]})})})})},L=()=>{const s=h.useRef(null),{setCurrentSection:a}=M(),{todaysMeals:t,calorieData:r,refreshData:i}=A(),{user:n}=E(),[l,d]=h.useState(""),[_,g]=h.useState("breakfast"),[p,v]=h.useState(!1),[f,x]=h.useState(!1),[b,j]=h.useState(!1),[y,w]=h.useState(null),[k,I]=h.useState(""),[S,C]=h.useState([]),[T,P]=h.useState(!1),[L,O]=h.useState("breakfast"),[R,D]=h.useState(!1),U=h.useRef(null),[F,z]=h.useState({mealName:"",mealType:"breakfast",calories:"",protein:"",carbs:"",fat:"",fiber:"",sugar:"",sodium:"",notes:"",time:"",saveMeal:!1}),V={totalCalories:r.currentCalories,totalProtein:t.reduce((e,s)=>e+s.protein,0),totalCarbs:t.reduce((e,s)=>e+s.carbs,0),totalFat:t.reduce((e,s)=>e+s.fat,0),goalCalories:r.targetCalories,goalProtein:Math.round(.3*r.targetCalories/4),goalCarbs:Math.round(.45*r.targetCalories/4),goalFat:Math.round(.25*r.targetCalories/9)};h.useEffect(()=>{a("add-meals")},[a]);const B=h.useCallback(s=>u(e,null,function*(){if(!s.trim()||!n)return C([]),void P(!1);D(!0);try{const{data:e,error:a}=yield N.searchFoodsAndCustomMeals(n.id,s.trim(),5);a?C([]):(C(e),P(e.length>0))}catch(e){C([])}finally{D(!1)}}),[n]);h.useEffect(()=>{const e=setTimeout(()=>{k.length>=2?B(k):(C([]),P(!1))},300);return()=>clearTimeout(e)},[k,B]),h.useEffect(()=>{const e=e=>{U.current&&!U.current.contains(e.target)&&P(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const G=[{name:"Banana",calories:105,protein:1.3,carbs:27,fat:.4},{name:"Chicken Breast (100g)",calories:165,protein:31,carbs:0,fat:3.6},{name:"Brown Rice (1 cup)",calories:216,protein:5,carbs:45,fat:1.8},{name:"Greek Yogurt",calories:100,protein:17,carbs:6,fat:0},{name:"Almonds (28g)",calories:164,protein:6,carbs:6,fat:14},{name:"Avocado (half)",calories:160,protein:2,carbs:8.5,fat:15},{name:"Oatmeal (1 cup)",calories:154,protein:6,carbs:28,fat:3},{name:"Apple",calories:95,protein:.5,carbs:25,fat:.3}].filter(e=>e.name.toLowerCase().includes(l.toLowerCase())),H=(e,s)=>Math.min(e/s*100,100);return m.jsx("section",{ref:s,id:"add-meals",className:"add-meals",children:m.jsxs("div",{className:"add-meals__container",children:[m.jsxs("div",{className:"add-meals__search-section",children:[m.jsxs("div",{className:"add-meals__search-container",ref:U,children:[m.jsxs("div",{className:"add-meals__search-input-row",children:[m.jsx("input",{type:"text",placeholder:"Search foods and meals...",value:k,onChange:e=>{I(e.target.value),e.target.value.length>=2&&P(!0)},onFocus:()=>{k.length>=2&&S.length>0&&P(!0)},className:"add-meals__autocomplete-input"}),m.jsxs("select",{value:L,onChange:e=>O(e.target.value),className:"add-meals__meal-type-select",children:[m.jsx("option",{value:"breakfast",children:"üåÖ Breakfast"}),m.jsx("option",{value:"lunch",children:"‚òÄÔ∏è Lunch"}),m.jsx("option",{value:"dinner",children:"üåô Dinner"}),m.jsx("option",{value:"snack",children:"üçø Snack"})]})]}),T&&m.jsx("div",{className:"add-meals__autocomplete-dropdown",children:R?m.jsx("div",{className:"add-meals__autocomplete-loading",children:m.jsx("span",{children:"Searching..."})}):S.length>0?S.map(s=>m.jsxs("div",{className:"add-meals__autocomplete-item",onClick:()=>{return a=s,u(e,null,function*(){if(n)try{const e=new Date,s=e.toISOString().split("T")[0],t=e.toTimeString().split(" ")[0].substring(0,5),r=Math.round(a.calories_per_100g),l=a.protein_g,o=a.carbohydrates_g,c=a.fats_g,d=a.fiber_g||0,u=a.free_sugar_g||0,h=a.sodium_mg||0,m={user_id:n.id,meal_type:L,meal_name:a.name,date:s,time:t,foods:{[a.source]:{id:a.id,name:a.name,calories:r,protein:l,carbs:o,fat:c,fiber:d,sugar:u,sodium:h,serving:"100g"}},total_calories:r,total_protein_g:l,total_carbs_g:o,total_fat_g:c,total_fiber_g:d,total_sugar_g:u,total_sodium_mg:h},{error:_}=yield N.addMeal(m);_?w({text:"Failed to add meal. Please try again.",type:"error"}):(w({text:`${a.name} added successfully!`,type:"success"}),I(""),P(!1),yield i(),setTimeout(()=>{w(null)},3e3))}catch(e){w({text:"An unexpected error occurred. Please try again.",type:"error"})}});var a},children:[m.jsxs("div",{className:"add-meals__autocomplete-item-content",children:[m.jsxs("div",{className:"add-meals__autocomplete-item-header",children:[m.jsx("span",{className:"add-meals__autocomplete-item-name",children:s.name}),m.jsx("span",{className:"add-meals__autocomplete-item-source",children:"custom_meals"===s.source?"üë§ Custom":"üçé Standard"})]}),m.jsxs("div",{className:"add-meals__autocomplete-item-nutrition",children:[m.jsxs("span",{children:[Math.round(s.calories_per_100g)," cal"]}),m.jsxs("span",{children:[s.protein_g,"g protein"]}),m.jsxs("span",{children:[s.carbohydrates_g,"g carbs"]}),m.jsxs("span",{children:[s.fats_g,"g fat"]})]})]}),m.jsx("button",{className:"add-meals__autocomplete-add-btn",children:"+"})]},`${s.source}-${s.id}`)):k.length>=2?m.jsx("div",{className:"add-meals__autocomplete-empty",children:m.jsxs("span",{children:['No foods found for "',k,'"']})}):null})]}),y&&m.jsx("div",{className:`add-meals__message add-meals__message--${y.type}`,children:y.text})]}),m.jsxs("div",{className:"add-meals__quick-actions",children:[m.jsx("button",{className:"add-meals__quick-btn add-meals__quick-btn--primary",onClick:()=>v(!p),children:"üçé Quick Add Food"}),m.jsx("button",{className:"add-meals__quick-btn",onClick:()=>x(!f),children:"üìä Custom Entry"})]}),m.jsxs("div",{className:"add-meals__nutrition-summary",children:[m.jsx("h2",{className:"add-meals__section-title",children:"Today's Nutrition"}),m.jsxs("div",{className:"add-meals__nutrition-visual",children:[m.jsx("div",{className:"add-meals__macro-circle",children:m.jsxs("div",{className:"add-meals__circle-container",children:[m.jsxs("svg",{className:"add-meals__circle-svg",width:"100",height:"100",viewBox:"0 0 36 36",children:[m.jsx("path",{className:"add-meals__circle-bg",d:"M18 2.0845\r\n                                           a 15.9155 15.9155 0 0 1 0 31.831\r\n                                           a 15.9155 15.9155 0 0 1 0 -31.831"}),m.jsx("path",{className:"add-meals__circle-progress add-meals__circle-progress--calories",strokeDasharray:`${H(V.totalCalories,V.goalCalories)}, 100`,d:"M18 2.0845\r\n                                           a 15.9155 15.9155 0 0 1 0 31.831\r\n                                           a 15.9155 15.9155 0 0 1 0 -31.831"})]}),m.jsxs("div",{className:"add-meals__circle-content",children:[m.jsx("div",{className:"add-meals__circle-icon",children:"üî•"}),m.jsx("div",{className:"add-meals__circle-value",children:Math.round(V.totalCalories)}),m.jsx("div",{className:"add-meals__circle-label",children:"Calories"})]})]})}),m.jsx("div",{className:"add-meals__macro-circle",children:m.jsxs("div",{className:"add-meals__circle-container",children:[m.jsxs("svg",{className:"add-meals__circle-svg",width:"100",height:"100",viewBox:"0 0 36 36",children:[m.jsx("path",{className:"add-meals__circle-bg",d:"M18 2.0845\r\n                                           a 15.9155 15.9155 0 0 1 0 31.831\r\n                                           a 15.9155 15.9155 0 0 1 0 -31.831"}),m.jsx("path",{className:"add-meals__circle-progress add-meals__circle-progress--protein",strokeDasharray:`${H(V.totalProtein,V.goalProtein)}, 100`,d:"M18 2.0845\r\n                                           a 15.9155 15.9155 0 0 1 0 31.831\r\n                                           a 15.9155 15.9155 0 0 1 0 -31.831"})]}),m.jsxs("div",{className:"add-meals__circle-content",children:[m.jsx("div",{className:"add-meals__circle-icon",children:"üí™"}),m.jsxs("div",{className:"add-meals__circle-value",children:[Math.round(V.totalProtein),"g"]}),m.jsx("div",{className:"add-meals__circle-label",children:"Protein"})]})]})}),m.jsx("div",{className:"add-meals__macro-circle",children:m.jsxs("div",{className:"add-meals__circle-container",children:[m.jsxs("svg",{className:"add-meals__circle-svg",width:"100",height:"100",viewBox:"0 0 36 36",children:[m.jsx("path",{className:"add-meals__circle-bg",d:"M18 2.0845\r\n                                           a 15.9155 15.9155 0 0 1 0 31.831\r\n                                           a 15.9155 15.9155 0 0 1 0 -31.831"}),m.jsx("path",{className:"add-meals__circle-progress add-meals__circle-progress--carbs",strokeDasharray:`${H(V.totalCarbs,V.goalCarbs)}, 100`,d:"M18 2.0845\r\n                                           a 15.9155 15.9155 0 0 1 0 31.831\r\n                                           a 15.9155 15.9155 0 0 1 0 -31.831"})]}),m.jsxs("div",{className:"add-meals__circle-content",children:[m.jsx("div",{className:"add-meals__circle-icon",children:"üåæ"}),m.jsxs("div",{className:"add-meals__circle-value",children:[Math.round(V.totalCarbs),"g"]}),m.jsx("div",{className:"add-meals__circle-label",children:"Carbs"})]})]})}),m.jsx("div",{className:"add-meals__macro-circle",children:m.jsxs("div",{className:"add-meals__circle-container",children:[m.jsxs("svg",{className:"add-meals__circle-svg",width:"100",height:"100",viewBox:"0 0 36 36",children:[m.jsx("path",{className:"add-meals__circle-bg",d:"M18 2.0845\r\n                                           a 15.9155 15.9155 0 0 1 0 31.831\r\n                                           a 15.9155 15.9155 0 0 1 0 -31.831"}),m.jsx("path",{className:"add-meals__circle-progress add-meals__circle-progress--fat",strokeDasharray:`${H(V.totalFat,V.goalFat)}, 100`,d:"M18 2.0845\r\n                                           a 15.9155 15.9155 0 0 1 0 31.831\r\n                                           a 15.9155 15.9155 0 0 1 0 -31.831"})]}),m.jsxs("div",{className:"add-meals__circle-content",children:[m.jsx("div",{className:"add-meals__circle-icon",children:"ü•ë"}),m.jsxs("div",{className:"add-meals__circle-value",children:[Math.round(V.totalFat),"g"]}),m.jsx("div",{className:"add-meals__circle-label",children:"Fat"})]})]})})]})]}),p&&m.jsxs("div",{className:"add-meals__quick-add-panel",children:[m.jsxs("div",{className:"add-meals__panel-header",children:[m.jsx("h3",{className:"add-meals__panel-title",children:"Quick Add Foods"}),m.jsx("button",{className:"add-meals__close-btn",onClick:()=>v(!1),children:"‚úï"})]}),m.jsxs("div",{className:"add-meals__meal-type-selector",children:[m.jsx("label",{className:"add-meals__meal-label",children:"Meal Type:"}),m.jsxs("select",{value:_,onChange:e=>g(e.target.value),className:"add-meals__meal-select",children:[m.jsx("option",{value:"breakfast",children:"üåÖ Breakfast"}),m.jsx("option",{value:"lunch",children:"‚òÄÔ∏è Lunch"}),m.jsx("option",{value:"dinner",children:"üåô Dinner"}),m.jsx("option",{value:"snack",children:"üçø Snack"})]})]}),m.jsx("div",{className:"add-meals__search-box",children:m.jsx("input",{type:"text",placeholder:"Search foods...",value:l,onChange:e=>d(e.target.value),className:"add-meals__search-input"})}),m.jsx("div",{className:"add-meals__foods-grid",children:G.map((s,a)=>m.jsxs("div",{className:"add-meals__food-card",children:[m.jsxs("div",{className:"add-meals__food-info",children:[m.jsx("h4",{className:"add-meals__food-name",children:s.name}),m.jsxs("div",{className:"add-meals__food-nutrition",children:[m.jsxs("span",{children:[s.calories," cal"]}),m.jsxs("span",{children:[s.protein,"g protein"]})]})]}),m.jsx("button",{className:"add-meals__add-food-btn",onClick:()=>u(e,null,function*(){yield i(),v(!1)}),children:"+"})]},a))})]}),f&&m.jsxs("div",{className:"add-meals__custom-entry-panel",children:[m.jsxs("div",{className:"add-meals__panel-header",children:[m.jsx("h3",{className:"add-meals__panel-title",children:"Custom Meal Entry"}),m.jsx("button",{className:"add-meals__close-btn",onClick:()=>x(!1),children:"‚úï"})]}),m.jsxs("form",{className:"add-meals__custom-form",onSubmit:s=>u(e,null,function*(){if(s.preventDefault(),n)if(F.mealName.trim()&&F.calories){j(!0),w(null);try{const e=parseFloat(F.calories)||0,s=parseFloat(F.protein)||0,a=parseFloat(F.carbs)||0,t=parseFloat(F.fat)||0,r=parseFloat(F.fiber)||0,l=parseFloat(F.sugar)||0,o=parseFloat(F.sodium)||0,c=new Date,d=c.toISOString().split("T")[0],u=F.time||c.toTimeString().split(" ")[0].substring(0,5),h={user_id:n.id,meal_type:F.mealType,meal_name:F.mealName.trim(),date:d,time:u,foods:{custom:{name:F.mealName.trim(),calories:e,protein:s,carbs:a,fat:t,fiber:r,sugar:l,sodium:o,notes:F.notes}},total_calories:Math.round(e),total_protein_g:s,total_carbs_g:a,total_fat_g:t,total_fiber_g:r,total_sugar_g:l,total_sodium_mg:o,notes:F.notes},{error:m}=yield N.addMeal(h);if(m)return void w({text:"Failed to add meal. Please try again.",type:"error"});if(F.saveMeal){const{exists:i,error:c}=yield N.checkCustomMealExists(n.id,F.mealName.trim(),e,s,a,t);if(c)w({text:"Meal added, but failed to save for future reference",type:"info"});else if(i)w({text:"Meal added! This meal is already saved for future reference.",type:"success"});else{const i={name:F.mealName.trim(),calories_per_100g:e,protein_g:s,carbohydrates_g:a,fats_g:t,fiber_g:r,free_sugar_g:l,sodium_mg:o,submitted_by:n.id,status:"pending"},{error:c}=yield N.addCustomMeal(i);w(c?{text:"Meal added, but failed to save for future reference",type:"info"}:{text:"Meal added successfully and saved for future reference!",type:"success"})}}else w({text:"Meal added successfully!",type:"success"});z({mealName:"",mealType:"breakfast",calories:"",protein:"",carbs:"",fat:"",fiber:"",sugar:"",sodium:"",notes:"",time:"",saveMeal:!1}),yield i(),setTimeout(()=>{w(null)},3e3)}catch(e){w({text:"An unexpected error occurred. Please try again.",type:"error"})}finally{j(!1)}}else w({text:"Please fill in meal name and calories",type:"error"});else w({text:"Please log in to add meals",type:"error"})}),children:[y&&m.jsx("div",{className:`add-meals__message add-meals__message--${y.type}`,children:y.text}),m.jsxs("div",{className:"add-meals__form-group",children:[m.jsx("label",{className:"add-meals__form-label",children:"Meal Name *"}),m.jsx("input",{type:"text",className:"add-meals__form-input",value:F.mealName,onChange:e=>z(s=>c(o({},s),{mealName:e.target.value})),placeholder:"Enter meal name",required:!0})]}),m.jsxs("div",{className:"add-meals__form-group",children:[m.jsx("label",{className:"add-meals__form-label",children:"Meal Type *"}),m.jsxs("select",{className:"add-meals__form-select",value:F.mealType,onChange:e=>z(s=>c(o({},s),{mealType:e.target.value})),children:[m.jsx("option",{value:"breakfast",children:"üåÖ Breakfast"}),m.jsx("option",{value:"lunch",children:"‚òÄÔ∏è Lunch"}),m.jsx("option",{value:"dinner",children:"üåô Dinner"}),m.jsx("option",{value:"snack",children:"üçø Snack"})]})]}),m.jsxs("div",{className:"add-meals__form-group",children:[m.jsx("label",{className:"add-meals__form-label",children:"Time"}),m.jsx("input",{type:"time",className:"add-meals__form-input",value:F.time,onChange:e=>z(s=>c(o({},s),{time:e.target.value}))})]}),m.jsxs("div",{className:"add-meals__form-row",children:[m.jsxs("div",{className:"add-meals__form-group add-meals__form-group--half",children:[m.jsx("label",{className:"add-meals__form-label",children:"Calories *"}),m.jsx("input",{type:"number",className:"add-meals__form-input",value:F.calories,onChange:e=>z(s=>c(o({},s),{calories:e.target.value})),placeholder:"0",min:"0",step:"1",required:!0})]}),m.jsxs("div",{className:"add-meals__form-group add-meals__form-group--half",children:[m.jsx("label",{className:"add-meals__form-label",children:"Protein (g)"}),m.jsx("input",{type:"number",className:"add-meals__form-input",value:F.protein,onChange:e=>z(s=>c(o({},s),{protein:e.target.value})),placeholder:"0",min:"0",step:"0.1"})]})]}),m.jsxs("div",{className:"add-meals__form-row",children:[m.jsxs("div",{className:"add-meals__form-group add-meals__form-group--half",children:[m.jsx("label",{className:"add-meals__form-label",children:"Carbs (g)"}),m.jsx("input",{type:"number",className:"add-meals__form-input",value:F.carbs,onChange:e=>z(s=>c(o({},s),{carbs:e.target.value})),placeholder:"0",min:"0",step:"0.1"})]}),m.jsxs("div",{className:"add-meals__form-group add-meals__form-group--half",children:[m.jsx("label",{className:"add-meals__form-label",children:"Fat (g)"}),m.jsx("input",{type:"number",className:"add-meals__form-input",value:F.fat,onChange:e=>z(s=>c(o({},s),{fat:e.target.value})),placeholder:"0",min:"0",step:"0.1"})]})]}),m.jsxs("div",{className:"add-meals__form-row",children:[m.jsxs("div",{className:"add-meals__form-group add-meals__form-group--half",children:[m.jsx("label",{className:"add-meals__form-label",children:"Fiber (g)"}),m.jsx("input",{type:"number",className:"add-meals__form-input",value:F.fiber,onChange:e=>z(s=>c(o({},s),{fiber:e.target.value})),placeholder:"0",min:"0",step:"0.1"})]}),m.jsxs("div",{className:"add-meals__form-group add-meals__form-group--half",children:[m.jsx("label",{className:"add-meals__form-label",children:"Sugar (g)"}),m.jsx("input",{type:"number",className:"add-meals__form-input",value:F.sugar,onChange:e=>z(s=>c(o({},s),{sugar:e.target.value})),placeholder:"0",min:"0",step:"0.1"})]})]}),m.jsxs("div",{className:"add-meals__form-group",children:[m.jsx("label",{className:"add-meals__form-label",children:"Sodium (mg)"}),m.jsx("input",{type:"number",className:"add-meals__form-input",value:F.sodium,onChange:e=>z(s=>c(o({},s),{sodium:e.target.value})),placeholder:"0",min:"0",step:"0.1"})]}),m.jsxs("div",{className:"add-meals__form-group",children:[m.jsx("label",{className:"add-meals__form-label",children:"Notes"}),m.jsx("textarea",{className:"add-meals__form-textarea",value:F.notes,onChange:e=>z(s=>c(o({},s),{notes:e.target.value})),placeholder:"Additional notes about the meal...",rows:3})]}),m.jsx("div",{className:"add-meals__form-group",children:m.jsxs("label",{className:"add-meals__form-checkbox-label",children:[m.jsx("input",{type:"checkbox",className:"add-meals__form-checkbox",checked:F.saveMeal,onChange:e=>z(s=>c(o({},s),{saveMeal:e.target.checked}))}),m.jsx("span",{className:"add-meals__form-checkbox-text",children:"Save meal for future references"})]})}),m.jsx("div",{className:"add-meals__form-actions",children:m.jsx("button",{type:"submit",className:"add-meals__add-meal-btn add-meals__add-meal-btn--primary",disabled:b,children:b?"Adding Meal...":"Add Meal"})})]})]}),m.jsxs("div",{className:"add-meals__meals-section",children:[m.jsx("h2",{className:"add-meals__section-title",children:"Today's Meals"}),["breakfast","lunch","dinner","snack"].map(s=>{const a=(r=s,t.filter(e=>e.mealType===r));var r;const n=a.reduce((e,s)=>e+s.calories,0);return m.jsxs("div",{className:"add-meals__meal-type-section",children:[m.jsxs("div",{className:"add-meals__meal-type-header",children:[m.jsxs("h3",{className:"add-meals__meal-type-title",children:["breakfast"===s&&"üåÖ","lunch"===s&&"‚òÄÔ∏è","dinner"===s&&"üåô","snack"===s&&"üçø",s.charAt(0).toUpperCase()+s.slice(1)]}),m.jsxs("span",{className:"add-meals__meal-type-calories",children:[Math.round(n)," calories"]})]}),a.length>0?m.jsx("div",{className:"add-meals__meal-list",children:a.map(s=>m.jsxs("div",{className:"add-meals__meal-item",children:[m.jsxs("div",{className:"add-meals__meal-info",children:[m.jsx("span",{className:"add-meals__meal-name",children:s.name}),m.jsxs("span",{className:"add-meals__meal-nutrition",children:[s.calories," cal ‚Ä¢ ",s.protein,"g protein ‚Ä¢ ",s.carbs,"g carbs ‚Ä¢ ",s.fat,"g fat"]})]}),m.jsx("button",{className:"add-meals__remove-btn",onClick:()=>(s.id,u(e,null,function*(){yield i()})),children:"üóëÔ∏è"})]},s.id))}):m.jsxs("div",{className:"add-meals__empty-meal-type",children:[m.jsxs("p",{children:["No ",s," entries yet"]}),m.jsxs("button",{className:"add-meals__add-meal-btn",onClick:()=>{g(s),v(!0)},children:["+ Add ",s]})]})]},s)})]})]})})},O=()=>{const{user:s,signOut:a}=E(),[t,r]=h.useState({height_cm:0,weight_kg:0,target_weight_kg:0,target_duration:0,target_duration_unit:"weeks",activity_level:"moderate",orientation:"",age:0,gender:""}),[i,n]=h.useState(!1),[l,d]=h.useState("cm"),[_,g]=h.useState("kg"),[p,v]=h.useState("kg"),[f,x]=h.useState(0),[b,j]=h.useState(0),[y,k]=h.useState(!1),[I,S]=h.useState(!1),[C,M]=h.useState([]),T=h.useCallback(()=>{var e,a,t;return s?(null==(e=s.user_metadata)?void 0:e.full_name)||(null==(a=s.user_metadata)?void 0:a.name)||(null==(t=s.email)?void 0:t.split("@")[0])||"User":""},[s]),A=h.useCallback(()=>{var e,a;if(!(null==s?void 0:s.email))return"U";const t=s.email,r=(null==(e=s.user_metadata)?void 0:e.full_name)||(null==(a=s.user_metadata)?void 0:a.name);if(r){const e=r.trim().split(" ");return e.length>=2?(e[0][0]+e[e.length-1][0]).toUpperCase():r[0].toUpperCase()}return t[0].toUpperCase()},[s]);h.useEffect(()=>{P(),L()},[s]),h.useEffect(()=>{L()},[t.weight_kg,t.target_weight_kg]);const P=()=>u(e,null,function*(){if(s)try{const{data:e}=yield N.getUserProfile(s.id);if(e){if(r({height_cm:e.height_cm||0,weight_kg:e.weight_kg||0,target_weight_kg:e.target_weight_kg||0,target_duration:e.target_duration||0,target_duration_unit:e.target_duration_unit||"weeks",activity_level:e.activity_level||"moderate",orientation:e.orientation||"",age:e.age||0,gender:e.gender||""}),S(!0),e.height_cm){const s=Math.floor(e.height_cm/30.48),a=Math.round(e.height_cm%30.48/2.54);x(s),j(a)}}else n(!0)}catch(e){}}),L=()=>u(e,null,function*(){try{const e=t.weight_kg,s=t.target_weight_kg;let a="both";e>0&&s>0&&(s<e?a="weight_loss":s>e&&(a="weight_gain"));const{data:r,error:i}=yield N.getOrientations(a);M(i?U(a):r.map(e=>({value:e.value,label:e.label})))}catch(e){const s=t.weight_kg,a=t.target_weight_kg;let r="both";s>0&&a>0&&(a<s?r="weight_loss":a>s&&(r="weight_gain")),M(U(r))}}),O=(e,s)=>Math.round(30.48*e+2.54*s),R=(e,s,a)=>s===a?e:"kg"===s&&"lbs"===a?Math.round(2.20462*e*10)/10:"lbs"===s&&"kg"===a?Math.round(e/2.20462*10)/10:e,D=(e,s)=>{r(a=>c(o({},a),{[e]:s}))},U=e=>"weight_loss"===e?[{value:"energy_focused",label:"Energy Focussed"},{value:"muscle_preservation",label:"Muscle Preservation"}]:"weight_gain"===e?[{value:"lean_muscle_building",label:"Lean Muscle Building"},{value:"energetic_bulking",label:"Energetic Bulking"}]:[{value:"energy_focused",label:"Energy Focussed"},{value:"muscle_preservation",label:"Muscle Preservation"},{value:"lean_muscle_building",label:"Lean Muscle Building"},{value:"energetic_bulking",label:"Energetic Bulking"}];return m.jsx("div",{className:"profile",children:m.jsxs("div",{className:"profile__container",children:[m.jsxs("div",{className:"profile__header",children:[m.jsxs("div",{className:"profile__user",children:[m.jsx("div",{className:"profile__avatar",children:m.jsx("span",{className:"profile__initials",children:A()})}),m.jsxs("ul",{className:"profile__info",children:[m.jsx("li",{className:"profile__name",children:T()}),m.jsx("li",{className:"profile__email",children:null==s?void 0:s.email})]})]}),m.jsx("button",{className:"profile__signout-btn",onClick:()=>u(e,null,function*(){try{yield a()}catch(e){w.getInstance().show("Failed to sign out","error")}}),type:"button",children:"Sign Out"})]}),m.jsx("div",{className:"profile__content",children:m.jsxs("div",{className:"profile__section",children:[m.jsxs("div",{className:"profile__section-header",children:[m.jsx("h2",{children:"Setup Profile"}),!i&&I&&m.jsx("button",{className:"profile__edit-btn",onClick:()=>n(!0),children:"Edit"})]}),m.jsxs("div",{className:"profile__form",children:[m.jsxs("div",{className:"profile__row",children:[m.jsxs("div",{className:"profile__field-group",children:[m.jsxs("div",{className:"profile__field-header",children:[m.jsx("h3",{children:"Height"}),m.jsx("button",{type:"button",className:"profile__unit-toggle",onClick:()=>{d(e=>"cm"===e?"ft":"cm")},disabled:!i,children:"cm"===l?"ft/in":"cm"})]}),"cm"===l?m.jsxs("div",{className:"profile__input-group",children:[m.jsx("input",{id:"height-cm",name:"height-cm",type:"number",min:"0",max:"250",value:t.height_cm,onChange:e=>D("height_cm",parseInt(e.target.value)||0),disabled:!i,placeholder:"Height in cm"}),m.jsx("span",{className:"profile__unit",children:"cm"})]}):m.jsxs("div",{className:"profile__height-row",children:[m.jsxs("div",{className:"profile__input-group",children:[m.jsx("input",{id:"height-feet",name:"height-feet",type:"number",min:"0",max:"8",value:f,onChange:e=>{const s=parseInt(e.target.value)||0;x(s),D("height_cm",O(s,b))},disabled:!i,placeholder:"Feet"}),m.jsx("span",{className:"profile__unit",children:"ft"})]}),m.jsxs("div",{className:"profile__input-group",children:[m.jsx("input",{id:"height-inches",name:"height-inches",type:"number",min:"0",max:"11",value:b,onChange:e=>{const s=parseInt(e.target.value)||0;j(s),D("height_cm",O(f,s))},disabled:!i,placeholder:"Inches"}),m.jsx("span",{className:"profile__unit",children:"in"})]})]})]}),m.jsxs("div",{className:"profile__field-group",children:[m.jsxs("div",{className:"profile__field-header",children:[m.jsx("h3",{children:"Weight"}),m.jsx("button",{type:"button",className:"profile__unit-toggle",onClick:()=>{g(e=>"kg"===e?"lbs":"kg")},disabled:!i,children:"kg"===_?"lbs":"kg"})]}),m.jsxs("div",{className:"profile__input-group",children:[m.jsx("input",{id:"weight",name:"weight",type:"number",min:"0",max:"kg"===_?"500":"1100",step:"0.1",value:"kg"===_?t.weight_kg:R(t.weight_kg,"kg","lbs"),onChange:e=>{const s=parseFloat(e.target.value)||0;D("weight_kg","kg"===_?s:R(s,"lbs","kg"))},disabled:!i,placeholder:`Weight in ${_}`}),m.jsx("span",{className:"profile__unit",children:_})]})]})]}),m.jsxs("div",{className:"profile__row",children:[m.jsxs("div",{className:"profile__field-group",children:[m.jsxs("div",{className:"profile__field-header",children:[m.jsx("h3",{children:"Target Weight"}),m.jsx("button",{type:"button",className:"profile__unit-toggle",onClick:()=>{v(e=>"kg"===e?"lbs":"kg")},disabled:!i,children:"kg"===p?"lbs":"kg"})]}),m.jsxs("div",{className:"profile__input-group",children:[m.jsx("input",{id:"target-weight",name:"target-weight",type:"number",min:"0",max:"kg"===p?"500":"1100",step:"0.1",value:"kg"===p?t.target_weight_kg:R(t.target_weight_kg,"kg","lbs"),onChange:e=>{const s=parseFloat(e.target.value)||0;D("target_weight_kg","kg"===p?s:R(s,"lbs","kg"))},disabled:!i,placeholder:`Target weight in ${p}`}),m.jsx("span",{className:"profile__unit",children:p})]})]}),m.jsxs("div",{className:"profile__field-group",children:[m.jsx("div",{className:"profile__field-header",children:m.jsx("h3",{children:"Target Duration"})}),m.jsxs("div",{className:"profile__duration-row",children:[m.jsx("div",{className:"profile__input-group",children:m.jsx("input",{id:"target-duration",name:"target-duration",type:"number",min:"1",max:"999",value:t.target_duration,onChange:e=>D("target_duration",parseInt(e.target.value)||0),disabled:!i,placeholder:"Duration"})}),m.jsxs("select",{id:"target-duration-unit",name:"target-duration-unit",value:t.target_duration_unit,onChange:e=>D("target_duration_unit",e.target.value),disabled:!i,className:"profile__select profile__duration-unit",children:[m.jsx("option",{value:"days",children:"Days"}),m.jsx("option",{value:"weeks",children:"Weeks"}),m.jsx("option",{value:"months",children:"Months"})]})]})]})]}),m.jsx("div",{className:"profile__row",children:m.jsxs("div",{className:"profile__field-group",children:[m.jsx("div",{className:"profile__field-header",children:m.jsx("h3",{children:"Age"})}),m.jsxs("div",{className:"profile__input-group",children:[m.jsx("input",{id:"age",name:"age",type:"number",min:"1",max:"120",value:t.age,onChange:e=>D("age",parseInt(e.target.value)||0),disabled:!i,placeholder:"Age"}),m.jsx("span",{className:"profile__unit",children:"years"})]})]})}),m.jsx("div",{className:"profile__row",children:m.jsxs("div",{className:"profile__field-group",children:[m.jsx("div",{className:"profile__field-header",children:m.jsx("h3",{children:"Gender"})}),m.jsxs("select",{id:"gender",name:"gender",value:t.gender,onChange:e=>D("gender",e.target.value),disabled:!i,className:"profile__select",children:[m.jsx("option",{value:"",children:"Select gender"}),m.jsx("option",{value:"male",children:"Male"}),m.jsx("option",{value:"female",children:"Female"}),m.jsx("option",{value:"other",children:"Other"})]})]})}),m.jsxs("div",{className:"profile__row",children:[m.jsxs("div",{className:"profile__field-group",children:[m.jsx("div",{className:"profile__field-header",children:m.jsx("h3",{children:"Activity Level"})}),m.jsxs("select",{id:"activity-level",name:"activity-level",value:t.activity_level,onChange:e=>D("activity_level",e.target.value),disabled:!i,className:"profile__select",children:[m.jsx("option",{value:"sedentary",children:"Sedentary"}),m.jsx("option",{value:"light",children:"Light"}),m.jsx("option",{value:"moderate",children:"Moderate"}),m.jsx("option",{value:"active",children:"Active"}),m.jsx("option",{value:"very_active",children:"Very Active"})]})]}),m.jsxs("div",{className:"profile__field-group",children:[m.jsx("div",{className:"profile__field-header",children:m.jsx("h3",{children:"Orientation"})}),m.jsxs("select",{id:"orientation",name:"orientation",value:t.orientation,onChange:e=>D("orientation",e.target.value),disabled:!i,className:"profile__select",children:[m.jsx("option",{value:"",children:"Select orientation"}),C.map(e=>m.jsx("option",{value:e.value,children:e.label},e.value))]})]})]})]}),m.jsx("div",{className:"profile__actions",children:i?m.jsxs(m.Fragment,{children:[m.jsx("button",{className:"profile__save-btn "+(y?"profile__save-btn--loading":""),onClick:()=>u(e,null,function*(){if(s&&(()=>{if("ft"===l){if(f<0||f>8||b<0||b>=12)return w.getInstance().show("Please enter valid height (0-8 feet, 0-11 inches)","error"),!1}else if(t.height_cm<0||t.height_cm>250)return w.getInstance().show("Please enter valid height (0-250 cm)","error"),!1;const e="kg"===_?t.weight_kg:R(t.weight_kg,"lbs","kg");if(e<0||e>500)return w.getInstance().show("Please enter valid weight","error"),!1;const s="kg"===p?t.target_weight_kg:R(t.target_weight_kg,"lbs","kg");return s<0||s>500?(w.getInstance().show("Please enter valid target weight","error"),!1):t.target_duration<=0?(w.getInstance().show("Please enter valid target duration","error"),!1):!t.age||t.age<1||t.age>120?(w.getInstance().show("Please enter valid age (1-120)","error"),!1):!!t.gender||(w.getInstance().show("Please select a gender","error"),!1)})()){k(!0);try{const e={};e.height_cm="ft"===l?O(f,b):t.height_cm,e.weight_kg="lbs"===_?R(t.weight_kg,"lbs","kg"):t.weight_kg,e.target_weight_kg="lbs"===p?R(t.target_weight_kg,"lbs","kg"):t.target_weight_kg,e.activity_level=t.activity_level,e.target_duration=t.target_duration,e.target_duration_unit=t.target_duration_unit,e.orientation=t.orientation,e.age=t.age,e.gender=t.gender;const{error:a}=yield N.updateUserProfile(s.id,e);if(a)throw a;w.getInstance().show("Profile updated successfully!","success"),n(!1),S(!0)}catch(e){w.getInstance().show(e.message||"Failed to save profile","error")}finally{k(!1)}}}),disabled:y,children:y?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"profile__loading-spinner"}),"Updating..."]}):I?"Update Profile":"Save Profile"}),I&&m.jsx("button",{className:"profile__cancel-btn",onClick:()=>{P(),n(!1)},disabled:y,children:"Cancel"})]}):I&&m.jsx("button",{className:"profile__edit-btn",onClick:()=>n(!0),children:"Edit Profile"})})]})})]})})},R=(e,s)=>Math.min(e/s*100,100),D=(e,s)=>{const a=e*(e===s?1:4);return s>0?Math.round(a/s*100):0},U={caloriesPerGramProtein:4,caloriesPerGramCarbs:4,caloriesPerGramFat:9,caloriesPerGramAlcohol:7,defaultMacroDistribution:{protein:.25,carbs:.45,fat:.3},mealTypeIcons:{breakfast:"üåÖ",lunch:"‚òÄÔ∏è",dinner:"üåô",snack:"üçø"},nutritionIcons:{calories:"üî•",protein:"üí™",carbs:"üåæ",fat:"ü•ë"}},F=()=>{const e=h.useRef(null),{setCurrentSection:s}=M(),{todaysMeals:a,calorieData:t}=A(),r={goalCalories:t.targetCalories,goalProtein:Math.round(.3*t.targetCalories/4),goalCarbs:Math.round(.45*t.targetCalories/4),goalFat:Math.round(.25*t.targetCalories/9)},i=o({totalCalories:t.currentCalories,totalProtein:a.reduce((e,s)=>e+s.protein,0),totalCarbs:a.reduce((e,s)=>e+s.carbs,0),totalFat:a.reduce((e,s)=>e+s.fat,0)},r);h.useEffect(()=>{s("journal")},[s]);const n=e=>a.filter(s=>s.mealType===e);return m.jsx("section",{ref:e,id:"journal",className:"journal",children:m.jsxs("div",{className:"journal__container",children:[m.jsxs("div",{className:"journal__header",children:[m.jsx("h1",{className:"journal__title",children:"üìù Today's Health Journal"}),m.jsx("div",{className:"journal__date",children:(new Date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),m.jsxs("div",{className:"journal__nutrition-overview",children:[m.jsx("h2",{className:"journal__section-title",children:"Daily Nutrition Summary"}),m.jsxs("div",{className:"journal__nutrition-grid",children:[m.jsxs("div",{className:"journal__nutrition-card journal__nutrition-card--calories",children:[m.jsx("div",{className:"journal__nutrition-icon",children:U.nutritionIcons.calories}),m.jsxs("div",{className:"journal__nutrition-content",children:[m.jsxs("div",{className:"journal__nutrition-value",children:[Math.round(i.totalCalories)," / ",i.goalCalories]}),m.jsx("div",{className:"journal__nutrition-label",children:"Calories"}),m.jsx("div",{className:"journal__progress-bar",children:m.jsx("div",{className:"journal__progress-fill journal__progress-fill--calories",style:{width:`${R(i.totalCalories,i.goalCalories)}%`}})})]})]}),m.jsxs("div",{className:"journal__nutrition-card journal__nutrition-card--protein",children:[m.jsx("div",{className:"journal__nutrition-icon",children:U.nutritionIcons.protein}),m.jsxs("div",{className:"journal__nutrition-content",children:[m.jsxs("div",{className:"journal__nutrition-value",children:[Math.round(i.totalProtein),"g / ",i.goalProtein,"g"]}),m.jsx("div",{className:"journal__nutrition-label",children:"Protein"}),m.jsx("div",{className:"journal__progress-bar",children:m.jsx("div",{className:"journal__progress-fill journal__progress-fill--protein",style:{width:`${R(i.totalProtein,i.goalProtein)}%`}})})]})]}),m.jsxs("div",{className:"journal__nutrition-card journal__nutrition-card--carbs",children:[m.jsx("div",{className:"journal__nutrition-icon",children:U.nutritionIcons.carbs}),m.jsxs("div",{className:"journal__nutrition-content",children:[m.jsxs("div",{className:"journal__nutrition-value",children:[Math.round(i.totalCarbs),"g / ",i.goalCarbs,"g"]}),m.jsx("div",{className:"journal__nutrition-label",children:"Carbs"}),m.jsx("div",{className:"journal__progress-bar",children:m.jsx("div",{className:"journal__progress-fill journal__progress-fill--carbs",style:{width:`${R(i.totalCarbs,i.goalCarbs)}%`}})})]})]}),m.jsxs("div",{className:"journal__nutrition-card journal__nutrition-card--fat",children:[m.jsx("div",{className:"journal__nutrition-icon",children:U.nutritionIcons.fat}),m.jsxs("div",{className:"journal__nutrition-content",children:[m.jsxs("div",{className:"journal__nutrition-value",children:[Math.round(i.totalFat),"g / ",i.goalFat,"g"]}),m.jsx("div",{className:"journal__nutrition-label",children:"Fat"}),m.jsx("div",{className:"journal__progress-bar",children:m.jsx("div",{className:"journal__progress-fill journal__progress-fill--fat",style:{width:`${R(i.totalFat,i.goalFat)}%`}})})]})]})]})]}),m.jsxs("div",{className:"journal__meals-timeline",children:[m.jsx("h2",{className:"journal__section-title",children:"Today's Detailed Meal Log"}),["breakfast","lunch","dinner","snack"].map(e=>{const s=n(e),a=n(e).reduce((e,s)=>e+s.calories,0);return 0===s.length?null:m.jsxs("div",{className:"journal__meal-section",children:[m.jsxs("div",{className:"journal__meal-header",children:[m.jsxs("div",{className:"journal__meal-type",children:[m.jsx("span",{className:"journal__meal-icon",children:U.mealTypeIcons[e]}),m.jsx("h3",{className:"journal__meal-title",children:e.charAt(0).toUpperCase()+e.slice(1)})]}),m.jsxs("div",{className:"journal__meal-summary",children:[m.jsxs("span",{className:"journal__meal-count",children:[s.length," ",1===s.length?"item":"items"]}),m.jsxs("span",{className:"journal__meal-calories",children:[Math.round(a)," cal"]})]})]}),m.jsx("div",{className:"journal__meal-items",children:s.map(e=>m.jsxs("div",{className:"journal__meal-item",children:[m.jsx("div",{className:"journal__meal-time",children:e.time}),m.jsxs("div",{className:"journal__meal-details",children:[m.jsx("div",{className:"journal__meal-name",children:e.name}),m.jsxs("div",{className:"journal__meal-nutrition",children:[m.jsxs("span",{className:"journal__nutrition-item",children:[U.nutritionIcons.calories," ",e.calories," cal"]}),m.jsxs("span",{className:"journal__nutrition-item",children:[U.nutritionIcons.protein," ",e.protein,"g protein"]}),m.jsxs("span",{className:"journal__nutrition-item",children:[U.nutritionIcons.carbs," ",e.carbs,"g carbs"]}),m.jsxs("span",{className:"journal__nutrition-item",children:[U.nutritionIcons.fat," ",e.fat,"g fat"]})]})]})]},e.id))})]},e)})]}),m.jsxs("div",{className:"journal__quick-stats",children:[m.jsx("h2",{className:"journal__section-title",children:"Today's Quick Stats"}),m.jsxs("div",{className:"journal__stats-grid",children:[m.jsxs("div",{className:"journal__stat-card",children:[m.jsx("div",{className:"journal__stat-value",children:a.length}),m.jsx("div",{className:"journal__stat-label",children:"Total Meals/Snacks"})]}),m.jsxs("div",{className:"journal__stat-card",children:[m.jsxs("div",{className:"journal__stat-value",children:[Math.round(i.totalCalories/i.goalCalories*100),"%"]}),m.jsx("div",{className:"journal__stat-label",children:"Daily Goal Progress"})]}),m.jsxs("div",{className:"journal__stat-card",children:[m.jsx("div",{className:"journal__stat-value",children:(l=i.totalCalories,c=a.length,c>0?Math.round(l/c):0)}),m.jsx("div",{className:"journal__stat-label",children:"Avg Calories per Meal"})]}),m.jsxs("div",{className:"journal__stat-card",children:[m.jsxs("div",{className:"journal__stat-value",children:[D(i.totalProtein,i.totalCalories),"%"]}),m.jsx("div",{className:"journal__stat-label",children:"Protein Ratio"})]})]})]})]})});var l,c},z=()=>{const[s,a]=h.useState("processing"),[t,r]=h.useState("Completing sign in..."),i=_();return h.useEffect(()=>{u(e,null,function*(){try{a("processing"),r("Completing sign in...");const e=yield N.handleOAuthCallback();e.success?(a("success"),r("Sign in successful! Redirecting..."),window.opener&&window.opener!==window||setTimeout(()=>{i("/",{replace:!0})},1500)):(a("error"),r(e.error||"Authentication failed. Please try again."),window.opener&&window.opener!==window||setTimeout(()=>{i("/",{replace:!0})},3e3))}catch(e){a("error"),r("Authentication callback failed. Please try again."),window.opener&&window.opener!==window?(window.opener.postMessage({type:"SUPABASE_AUTH_ERROR",error:{message:"Authentication callback failed"}},window.location.origin),window.close()):setTimeout(()=>{i("/",{replace:!0})},3e3)}})},[i]),m.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",fontFamily:"Arial, sans-serif",backgroundColor:"#f5f5f5"},children:m.jsxs("div",{style:{textAlign:"center",padding:"2rem",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:["processing"===s&&m.jsx("div",{style:{width:"40px",height:"40px",border:"3px solid #e3e3e3",borderTop:"3px solid #007bff",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),"success"===s&&m.jsx("div",{style:{fontSize:"2rem",color:"#28a745",margin:"0 auto 1rem"},children:"‚úì"}),"error"===s&&m.jsx("div",{style:{fontSize:"2rem",color:"#dc3545",margin:"0 auto 1rem"},children:"‚úó"}),m.jsx("p",{style:{margin:0,color:"error"===s?"#dc3545":"success"===s?"#28a745":"#666"},children:t}),m.jsx("style",{children:"\n                    @keyframes spin {\n                        0% { transform: rotate(0deg); }\n                        100% { transform: rotate(360deg); }\n                    }\n                "})]})})},V=({size:e="md",message:s="Loading..."})=>m.jsxs("div",{className:`loading-spinner loading-spinner--${e}`,children:[m.jsx("div",{className:"loading-spinner__circle"}),s&&m.jsx("p",{className:"loading-spinner__message",children:s})]}),B=({children:s,requireAdmin:a=!1,fallback:t=null})=>{const{loading:r,isAuthenticated:i,isAdmin:n,user:l,signInWithGoogle:o,authLoading:c}=E(),d=h.useCallback(()=>u(e,null,function*(){if(!c)try{(yield o()).success}catch(e){}}),[o,c]);return r?m.jsx("div",{className:"protected-route protected-route--loading",children:m.jsx(V,{})}):i?a&&!n?m.jsx("div",{className:"protected-route protected-route--unauthorized",children:m.jsxs("div",{className:"protected-route__container",children:[m.jsx("h2",{className:"protected-route__title",children:"Access Denied"}),m.jsx("p",{className:"protected-route__message",children:"You don't have admin privileges to access this area."}),m.jsxs("p",{className:"protected-route__user-info",children:["Signed in as: ",null==l?void 0:l.email]})]})}):m.jsx(m.Fragment,{children:s}):m.jsx("div",{className:"protected-route protected-route--unauthorized",children:m.jsxs("div",{className:"protected-route__container",children:[m.jsx("h2",{className:"protected-route__title",children:"Sign In Required"}),m.jsx("p",{className:"protected-route__message",children:"Please sign in to access this page."}),m.jsx("button",{className:"protected-route__signin-btn",onClick:d,disabled:c,type:"button",children:c?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"protected-route__signin-icon",children:"‚è≥"}),"Signing in..."]}):m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"protected-route__signin-icon",children:"üîê"}),"Sign In with Google"]})})]})})},G=(e,s=!1)=>{const t=((e={})=>{const{autoInit:s=!0,onStateChange:t}=e,r=h.useRef(null),i=h.useRef(null),n=h.useRef(t);n.current=t;const[l,o]=h.useState(()=>a.getInstance().getState()),[c,d]=h.useState(()=>({items:[],animationDuration:300,radius:120,centerSize:60,itemSize:50,autoClose:!0,closeDelay:1e3,enableKeyboard:!0,enableTouch:!0,centerIcon:"menu",centerLabel:"Menu"}));return h.useEffect(()=>{if(!s)return;r.current=a.getInstance(),d(r.current.getConfig()),o(r.current.getState()),i.current=r.current.subscribe(e=>{var s;o(e),null==(s=n.current)||s.call(n,e)});const e=()=>{r.current&&d(r.current.getConfig())};return document.addEventListener("navigation:config-updated",e),()=>{var s;null==(s=i.current)||s.call(i),i.current=null,document.removeEventListener("navigation:config-updated",e)}},[s]),{state:l,actions:h.useMemo(()=>({open:()=>{var e;return null==(e=r.current)?void 0:e.open()},close:()=>{var e;return null==(e=r.current)?void 0:e.close()},toggle:()=>{var e;return null==(e=r.current)?void 0:e.toggle()},navigate:e=>{var s;return null==(s=r.current)?void 0:s.navigate(e)},setHovered:e=>{var s;return null==(s=r.current)?void 0:s.setHoveredItem(e)},updateAuthState:e=>{var s;return null==(s=r.current)?void 0:s.updateAuthState(e)}}),[]),config:c}})();return h.useEffect(()=>{!s&&t.actions.updateAuthState&&t.actions.updateAuthState(e)},[e,s,t.actions]),t},H=class e{constructor(){d(this,"observer",null),d(this,"elements",new Map),d(this,"scrollPosition",0),d(this,"isScrolling",!1),d(this,"scrollTimeout",null),d(this,"callbacks",new Set),d(this,"defaultConfig",{threshold:.1,rootMargin:"0px 0px -50px 0px",triggerOnce:!1,reverse:!0}),this.init()}static getInstance(){return e.instance||(e.instance=new e),e.instance}init(){this.setupIntersectionObserver(),this.setupScrollListener(),this.bindMethods()}bindMethods(){this.handleIntersection=this.handleIntersection.bind(this),this.handleScroll=this.handleScroll.bind(this)}setupIntersectionObserver(){const e={threshold:[0,.1,.25,.5,.75,1],rootMargin:this.defaultConfig.rootMargin};this.observer=new IntersectionObserver(this.handleIntersection,e)}setupScrollListener(){let e=!1;window.addEventListener("scroll",()=>{e||(requestAnimationFrame(()=>{this.handleScroll(),e=!1}),e=!0)},{passive:!0})}handleIntersection(e){e.forEach(e=>{const s=e.target.getAttribute("data-scroll-id");if(!s)return;const a=this.elements.get(s);if(!a)return;const t=e.isIntersecting,r=a.isVisible;a.isVisible=t,t&&!r?this.triggerAnimation(s,"enter"):!t&&r&&a.config.reverse&&this.triggerAnimation(s,"exit")})}handleScroll(){const e=window.pageYOffset||document.documentElement.scrollTop,s=e>this.scrollPosition?"down":"up";this.scrollPosition=e,this.isScrolling=!0,this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=window.setTimeout(()=>{this.isScrolling=!1},150),this.callbacks.forEach(a=>{a(e,s)})}register(e,s,a={}){const t=`scroll-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,r=o(o({},this.defaultConfig),a);return e.setAttribute("data-scroll-id",t),this.elements.set(t,{element:e,animation:s,config:r,isVisible:!1,hasAnimated:!1}),this.observer&&this.observer.observe(e),t}unregister(e){const s=this.elements.get(e);s&&this.observer&&(this.observer.unobserve(s.element),s.element.removeAttribute("data-scroll-id")),this.elements.delete(e)}triggerAnimation(e,s){const a=this.elements.get(e);if(!a)return;const{element:t,animation:r,config:i}=a;if(i.triggerOnce&&a.hasAnimated&&"enter"===s)return;const n="enter"===s?`${r}-enter`:`${r}-exit`;t.classList.remove(`${r}-enter`,`${r}-exit`),t.offsetHeight,t.classList.add(n),"enter"===s&&(a.hasAnimated=!0);const l=new CustomEvent("scrollAnimation",{detail:{id:e,type:s,animation:r,element:t}});t.dispatchEvent(l)}onScroll(e){return this.callbacks.add(e),()=>{this.callbacks.delete(e)}}getScrollPosition(){return this.scrollPosition}isCurrentlyScrolling(){return this.isScrolling}scrollTo(e,s=!0){const a={behavior:s?"smooth":"auto"};if("number"==typeof e)a.top=e;else{const s=e.getBoundingClientRect();a.top=window.pageYOffset+s.top}window.scrollTo(a)}destroy(){this.observer&&(this.observer.disconnect(),this.observer=null),this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.elements.clear(),this.callbacks.clear()}};d(H,"instance");let $=H;const q=class e{constructor(){d(this,"metrics",{fcp:null,lcp:null,fid:null,cls:null,ttfb:null}),d(this,"observers",new Map),this.init()}static getInstance(){return e.instance||(e.instance=new e),e.instance}init(){"undefined"!=typeof window&&(this.observeWebVitals(),this.observeResourceTiming(),this.setupErrorTracking())}observeWebVitals(){if("PerformanceObserver"in window){const s=new PerformanceObserver(e=>{for(const s of e.getEntries())"first-contentful-paint"===s.name&&(this.metrics.fcp=s.startTime,this.reportMetric("fcp",s.startTime))});s.observe({entryTypes:["paint"]}),this.observers.set("paint",s);const a=new PerformanceObserver(e=>{const s=e.getEntries(),a=s[s.length-1];this.metrics.lcp=a.startTime,this.reportMetric("lcp",a.startTime)});a.observe({entryTypes:["largest-contentful-paint"]}),this.observers.set("lcp",a);const t=new PerformanceObserver(e=>{for(const s of e.getEntries()){const e=s;void 0!==e.processingStart&&(this.metrics.fid=e.processingStart-e.startTime,this.reportMetric("fid",this.metrics.fid))}});try{t.observe({entryTypes:["first-input"]}),this.observers.set("fid",t)}catch(e){}let r=0;const i=new PerformanceObserver(e=>{for(const s of e.getEntries()){const e=s;e.hadRecentInput||(r+=e.value)}this.metrics.cls=r,this.reportMetric("cls",r)});try{i.observe({entryTypes:["layout-shift"]}),this.observers.set("cls",i)}catch(e){}}}observeResourceTiming(){if("PerformanceObserver"in window){const e=new PerformanceObserver(e=>{for(const s of e.getEntries())this.analyzeResourceTiming(s)});e.observe({entryTypes:["resource"]}),this.observers.set("resource",e)}}analyzeResourceTiming(e){e.responseEnd,e.startTime,"navigation"===e.initiatorType&&(this.metrics.ttfb=e.responseStart-e.startTime,this.reportMetric("ttfb",this.metrics.ttfb))}setupErrorTracking(){window.addEventListener("error",e=>{var s;this.reportError({type:"javascript",message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,stack:null==(s=e.error)?void 0:s.stack})}),window.addEventListener("unhandledrejection",e=>{var s,a;this.reportError({type:"promise",message:(null==(s=e.reason)?void 0:s.message)||"Unhandled Promise Rejection",stack:null==(a=e.reason)?void 0:a.stack})})}reportMetric(e,s){this.sendToAnalytics("performance_metric",{metric_name:e,metric_value:s,url:window.location.href,timestamp:Date.now()})}reportError(e){this.sendToAnalytics("error",c(o({},e),{url:window.location.href,userAgent:navigator.userAgent,timestamp:Date.now()}))}sendToAnalytics(e,s){}getMetrics(){return o({},this.metrics)}startMark(e){"performance"in window&&performance.mark&&performance.mark(`${e}-start`)}endMark(e){if("performance"in window&&performance.mark&&performance.measure){performance.mark(`${e}-end`),performance.measure(e,`${e}-start`,`${e}-end`);const s=performance.getEntriesByName(e,"measure");return s.length>0?s[0].duration:null}return null}destroy(){this.observers.forEach(e=>e.disconnect()),this.observers.clear()}};d(q,"instance");let Y=q;const J=(e,s)=>{const a={VITE_SUPABASE_URL:"https://syxygcrxrldnhlcnpbyr.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN5eHlnY3J4cmxkbmhsY25wYnlyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1ODU3NDMsImV4cCI6MjA3MTE2MTc0M30.21zINCjjS_O5bSdR5EMRhmUHum6yStGwCe_haGUgYeo",VITE_APP_NAME:"Health Tracker",VITE_APP_VERSION:"1.0.0",VITE_APP_DOMAIN:"health.gamingdronzz.com",VITE_APP_URL:"https://health.gamingdronzz.com",VITE_DEBUG_MODE:"false",VITE_ENABLE_DEBUG_PANEL:"false",VITE_ENABLE_LOGGING:"false",VITE_ENABLE_PERFORMANCE_MONITORING:"true",VITE_ENABLE_EXPERIMENTAL_FEATURES:"false",VITE_API_BASE_URL:"https://api.health.gamingdronzz.com/api",VITE_API_TIMEOUT:"10000",VITE_OAUTH_REDIRECT_URL:"https://health.gamingdronzz.com/auth/callback",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}[e];return void 0===a&&void 0===s?"":a||s||""},W=(e,s=!1)=>{const a={VITE_SUPABASE_URL:"https://syxygcrxrldnhlcnpbyr.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN5eHlnY3J4cmxkbmhsY25wYnlyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1ODU3NDMsImV4cCI6MjA3MTE2MTc0M30.21zINCjjS_O5bSdR5EMRhmUHum6yStGwCe_haGUgYeo",VITE_APP_NAME:"Health Tracker",VITE_APP_VERSION:"1.0.0",VITE_APP_DOMAIN:"health.gamingdronzz.com",VITE_APP_URL:"https://health.gamingdronzz.com",VITE_DEBUG_MODE:"false",VITE_ENABLE_DEBUG_PANEL:"false",VITE_ENABLE_LOGGING:"false",VITE_ENABLE_PERFORMANCE_MONITORING:"true",VITE_ENABLE_EXPERIMENTAL_FEATURES:"false",VITE_API_BASE_URL:"https://api.health.gamingdronzz.com/api",VITE_API_TIMEOUT:"10000",VITE_OAUTH_REDIRECT_URL:"https://health.gamingdronzz.com/auth/callback",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}[e];return void 0===a?s:"true"===a||"1"===a||"yes"===a},K=(e,s=0)=>{const a={VITE_SUPABASE_URL:"https://syxygcrxrldnhlcnpbyr.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN5eHlnY3J4cmxkbmhsY25wYnlyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1ODU3NDMsImV4cCI6MjA3MTE2MTc0M30.21zINCjjS_O5bSdR5EMRhmUHum6yStGwCe_haGUgYeo",VITE_APP_NAME:"Health Tracker",VITE_APP_VERSION:"1.0.0",VITE_APP_DOMAIN:"health.gamingdronzz.com",VITE_APP_URL:"https://health.gamingdronzz.com",VITE_DEBUG_MODE:"false",VITE_ENABLE_DEBUG_PANEL:"false",VITE_ENABLE_LOGGING:"false",VITE_ENABLE_PERFORMANCE_MONITORING:"true",VITE_ENABLE_EXPERIMENTAL_FEATURES:"false",VITE_API_BASE_URL:"https://api.health.gamingdronzz.com/api",VITE_API_TIMEOUT:"10000",VITE_OAUTH_REDIRECT_URL:"https://health.gamingdronzz.com/auth/callback",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}[e];if(void 0===a)return s;const t=parseInt(a,10);return isNaN(t)?s:t},X=(()=>{const e=(()=>{const e={}.NODE_ENV;return"production"===e?"production":"development"===e?"development":"production"})(),s="development"===e,a="production"===e;return{env:e,isDevelopment:s,isProduction:a,name:J("VITE_APP_NAME","Health Tracker Prototype"),version:J("VITE_APP_VERSION",a?"1.0.0":"1.0.0-dev"),description:J("VITE_APP_DESCRIPTION","Health and nutrition tracking prototype"),api:{baseUrl:J("VITE_API_BASE_URL",a?"/api":"http://localhost:3001/api"),timeout:K("VITE_API_TIMEOUT",1e4)},supabase:{url:J("VITE_SUPABASE_URL"),anonKey:J("VITE_SUPABASE_ANON_KEY")},debug:{enabled:W("VITE_DEBUG_MODE",s),showPanel:W("VITE_ENABLE_DEBUG_PANEL",s),enableLogging:W("VITE_ENABLE_LOGGING",s),enablePerformanceMonitoring:W("VITE_ENABLE_PERFORMANCE_MONITORING",s)},features:{experimentalFeatures:W("VITE_ENABLE_EXPERIMENTAL_FEATURES",s)}}})();"undefined"!=typeof window&&(()=>{const e=["VITE_SUPABASE_URL","VITE_SUPABASE_ANON_KEY"].filter(e=>!J(e));if(e.length>0)throw new Error(`Missing required environment variables: ${e.join(", ")}`)})();const Z=({children:e})=>{const s=E(),a=G(s.isAuthenticated,s.loading),{actions:t}=a,r="/"===x().pathname;return m.jsxs("div",{className:"app",children:[m.jsx(k,{position:"fixed-top",onNavigate:e=>{t.navigate(e)},brand:"Health Tracker",brandHref:"/"}),m.jsx("main",{className:"app__main",children:e}),r&&m.jsx("footer",{className:"app__footer",children:m.jsxs("div",{className:"app__footer-content",children:[m.jsx("div",{className:"app__footer-main",children:m.jsxs("div",{className:"app__footer-brand",children:[m.jsx("strong",{children:X.name}),m.jsx("span",{children:"Your health journey starts here"})]})}),m.jsxs("div",{className:"app__footer-bottom",children:[m.jsxs("span",{children:["¬© 2025 ",X.name]}),X.debug.enabled&&m.jsxs("span",{className:"app__footer-version",children:["v",X.version]})]})]})})]})},Q=()=>{const s=E(),a=G(s.isAuthenticated,s.loading),{isAuthenticated:t,authLoading:r}=s,{actions:i}=a,n=r?"Signing in...":t?"Go to Add Meals":"Sign In with Google";return m.jsx("section",{id:"home",className:"app__section",children:m.jsx(P,{title:`Welcome to ${X.name}`,subtitle:"Track your health and nutrition journey with ease",primaryCtaText:n,onPrimaryCtaClick:()=>{var a;if(!r)return t?(a="add-meals",void i.navigate(a)):u(e,null,function*(){yield s.signInWithGoogle()})}})})};function ee(){const[e,s]=h.useState(!0),t=E(),r=G(t.isAuthenticated,t.loading),{isAuthenticated:i,loading:n,authLoading:l}=t;h.useEffect(()=>{const e=$.getInstance(),s=Y.getInstance();return X.debug.enablePerformanceMonitoring&&s.startMark("app-init"),()=>{e.destroy(),s.destroy()}},[]),((e,s,t=[])=>{const r=h.useRef(s);r.current=s,h.useEffect(()=>{const s=s=>{var t,i;const n=s,l={type:n.type.replace("navigation:",""),item:null==(t=n.detail)?void 0:t.item,state:(null==(i=n.detail)?void 0:i.state)||a.getInstance().getState(),timestamp:Date.now()};"all"!==e&&l.type!==e||r.current(l)},t="all"===e?["navigation:open","navigation:close","navigation:navigate","navigation:navigate-blocked","navigation:hover","navigation:focus","navigation:config-updated"]:[`navigation:${e}`];return t.forEach(e=>{document.addEventListener(e,s)}),()=>{t.forEach(e=>{document.removeEventListener(e,s)})}},[e,...t])})("all",e=>{e.type},[]),h.useEffect(()=>{const e=e=>u(this,null,function*(){var s;const a=null==(s=e.detail)?void 0:s.item;try{(yield t.signInWithGoogle()).success&&a&&setTimeout(()=>{r.actions.navigate(a.id)},1e3)}catch(i){}});return document.addEventListener("navigation:google-signin-requested",e),()=>{document.removeEventListener("navigation:google-signin-requested",e)}},[t,r.actions]);const o=()=>{s(!1),document.body.classList.add("app-loaded"),X.debug.enableLogging&&X.debug.enablePerformanceMonitoring&&Y.getInstance().endMark("app-init")};return e&&!l?m.jsx(I,{onComplete:o,duration:1200,minDisplayTime:800}):m.jsx(g,{children:m.jsx(Z,{children:m.jsxs(p,{children:[m.jsx(v,{path:"/",element:m.jsx(Q,{})}),m.jsx(v,{path:"/auth/callback",element:m.jsx(z,{})}),m.jsx(v,{path:"/add-meals",element:m.jsx(B,{children:m.jsx(L,{})})}),m.jsx(v,{path:"/profile",element:m.jsx(B,{children:m.jsx(O,{})})}),m.jsx(v,{path:"/journal",element:m.jsx(B,{children:m.jsx(F,{})})}),m.jsx(v,{path:"*",element:m.jsx(f,{to:"/",replace:!0})})]})})})}b(document.getElementById("root")).render(m.jsx(h.StrictMode,{children:m.jsx(ee,{})}))}},function(){return y||(0,N[t(N)[0]])((y={exports:{}}).exports,y),y.exports});export default w();
