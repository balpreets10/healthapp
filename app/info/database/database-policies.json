[
    {
        "schemaname": "public",
        "tablename": "foods",
        "policyname": "Allow service_role to manage foods",
        "permissive": "PERMISSIVE",
        "roles": "{public}",
        "cmd": "ALL",
        "qual": "(auth.role() = 'service_role'::text)",
        "with_check": null
    },
    {
        "schemaname": "public",
        "tablename": "foods",
        "policyname": "Allow authenticated users to read foods",
        "permissive": "PERMISSIVE",
        "roles": "{public}",
        "cmd": "SELECT",
        "qual": "(auth.role() = 'authenticated'::text)",
        "with_check": null
    },
    {
        "schemaname": "public",
        "tablename": "user_roles",
        "policyname": "Authenticated users can have roles",
        "permissive": "PERMISSIVE",
        "roles": "{public}",
        "cmd": "INSERT",
        "qual": null,
        "with_check": "(auth.uid() IS NOT NULL)"
    },
    {
        "schemaname": "public",
        "tablename": "user_roles",
        "policyname": "Users can view own role",
        "permissive": "PERMISSIVE",
        "roles": "{public}",
        "cmd": "SELECT",
        "qual": "(auth.uid() = user_id)",
        "with_check": null
    },
    {
        "schemaname": "public",
        "tablename": "meals",
        "policyname": "Users can manage own meals",
        "permissive": "PERMISSIVE",
        "roles": "{public}",
        "cmd": "ALL",
        "qual": "(auth.uid() = user_id)",
        "with_check": null
    },
    {
        "schemaname": "public",
        "tablename": "health_journal_entries",
        "policyname": "Users can manage own journal entries",
        "permissive": "PERMISSIVE",
        "roles": "{public}",
        "cmd": "ALL",
        "qual": "(auth.uid() = user_id)",
        "with_check": null
    },
    {
        "schemaname": "public",
        "tablename": "orientations",
        "policyname": "Allow public read access to orientations",
        "permissive": "PERMISSIVE",
        "roles": "{public}",
        "cmd": "SELECT",
        "qual": "true",
        "with_check": null
    },
    {
        "schemaname": "public",
        "tablename": "user_profiles",
        "policyname": "Users can view own profile",
        "permissive": "PERMISSIVE",
        "roles": "{public}",
        "cmd": "ALL",
        "qual": "(auth.uid() = user_id)",
        "with_check": null
    },
    {
        "schemaname": "public",
        "tablename": "custom_meal_rate_limits",
        "policyname": "Users can update own rate limits",
        "permissive": "PERMISSIVE",
        "roles": "{public}",
        "cmd": "UPDATE",
        "qual": "(user_id = auth.uid())",
        "with_check": null
    },
    {
        "schemaname": "public",
        "tablename": "custom_meal_rate_limits",
        "policyname": "Users can insert own rate limits",
        "permissive": "PERMISSIVE",
        "roles": "{public}",
        "cmd": "INSERT",
        "qual": null,
        "with_check": "(user_id = auth.uid())"
    },
    {
        "schemaname": "public",
        "tablename": "custom_meal_rate_limits",
        "policyname": "Users can view own rate limits",
        "permissive": "PERMISSIVE",
        "roles": "{public}",
        "cmd": "SELECT",
        "qual": "(user_id = auth.uid())",
        "with_check": null
    },
    {
        "schemaname": "public",
        "tablename": "custom_meals",
        "policyname": "Only admins can delete custom meals",
        "permissive": "PERMISSIVE",
        "roles": "{public}",
        "cmd": "DELETE",
        "qual": "(EXISTS ( SELECT 1\n   FROM user_roles\n  WHERE ((user_roles.user_id = auth.uid()) AND (user_roles.role = 'admin'::text))))",
        "with_check": null
    },
    {
        "schemaname": "public",
        "tablename": "custom_meals",
        "policyname": "Only admins can update custom meals",
        "permissive": "PERMISSIVE",
        "roles": "{public}",
        "cmd": "UPDATE",
        "qual": "(EXISTS ( SELECT 1\n   FROM user_roles\n  WHERE ((user_roles.user_id = auth.uid()) AND (user_roles.role = 'admin'::text))))",
        "with_check": null
    },
    {
        "schemaname": "public",
        "tablename": "custom_meals",
        "policyname": "Users can submit custom meals",
        "permissive": "PERMISSIVE",
        "roles": "{public}",
        "cmd": "INSERT",
        "qual": null,
        "with_check": "(submitted_by = auth.uid())"
    },
    {
        "schemaname": "public",
        "tablename": "custom_meals",
        "policyname": "Users can view own submissions and approved meals",
        "permissive": "PERMISSIVE",
        "roles": "{public}",
        "cmd": "SELECT",
        "qual": "((submitted_by = auth.uid()) OR (status = 'approved'::text) OR (EXISTS ( SELECT 1\n   FROM user_roles\n  WHERE ((user_roles.user_id = auth.uid()) AND (user_roles.role = 'admin'::text)))))",
        "with_check": null
    }
]